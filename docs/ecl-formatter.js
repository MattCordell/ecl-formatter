"use strict";var EclFormatter=(()=>{var Li=Object.defineProperty;var kc=Object.getOwnPropertyDescriptor;var Mc=Object.getOwnPropertyNames;var wc=Object.prototype.hasOwnProperty;var Fc=(e,t)=>{for(var r in t)Li(e,r,{get:t[r],enumerable:!0})},Uc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Mc(t))!wc.call(e,i)&&i!==r&&Li(e,i,{get:()=>t[i],enumerable:!(n=kc(t,i))||n.enumerable});return e};var Dc=e=>Uc(Li({},"__esModule",{value:!0}),e);var DA={};Fc(DA,{defaultOptions:()=>xr,formatEcl:()=>Lc});var Bc=typeof global=="object"&&global&&global.Object===Object&&global,nn=Bc;var Gc=typeof self=="object"&&self&&self.Object===Object&&self,$c=nn||Gc||Function("return this")(),Z=$c;var Kc=Z.Symbol,it=Kc;var As=Object.prototype,Wc=As.hasOwnProperty,jc=As.toString,yr=it?it.toStringTag:void 0;function Vc(e){var t=Wc.call(e,yr),r=e[yr];try{e[yr]=void 0;var n=!0}catch{}var i=jc.call(e);return n&&(t?e[yr]=r:delete e[yr]),i}var Ts=Vc;var zc=Object.prototype,Hc=zc.toString;function Xc(e){return Hc.call(e)}var Os=Xc;var Yc="[object Null]",qc="[object Undefined]",Ss=it?it.toStringTag:void 0;function Zc(e){return e==null?e===void 0?qc:Yc:Ss&&Ss in Object(e)?Ts(e):Os(e)}var pt=Zc;function Qc(e){return e!=null&&typeof e=="object"}var H=Qc;var Jc="[object Symbol]";function tf(e){return typeof e=="symbol"||H(e)&&pt(e)==Jc}var ie=tf;function ef(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var wt=ef;var rf=Array.isArray,O=rf;var nf=1/0,Rs=it?it.prototype:void 0,ys=Rs?Rs.toString:void 0;function Is(e){if(typeof e=="string")return e;if(O(e))return wt(e,Is)+"";if(ie(e))return ys?ys.call(e):"";var t=e+"";return t=="0"&&1/e==-nf?"-0":t}var Ns=Is;var of=/\s/;function sf(e){for(var t=e.length;t--&&of.test(e.charAt(t)););return t}var Cs=sf;var af=/^\s+/;function lf(e){return e&&e.slice(0,Cs(e)+1).replace(af,"")}var bs=lf;function uf(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $=uf;var vs=NaN,cf=/^[-+]0x[0-9a-f]+$/i,ff=/^0b[01]+$/i,pf=/^0o[0-7]+$/i,hf=parseInt;function mf(e){if(typeof e=="number")return e;if(ie(e))return vs;if($(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bs(e);var r=ff.test(e);return r||pf.test(e)?hf(e.slice(2),r?2:8):cf.test(e)?vs:+e}var Ls=mf;var _s=1/0,df=17976931348623157e292;function gf(e){if(!e)return e===0?e:0;if(e=Ls(e),e===_s||e===-_s){var t=e<0?-1:1;return t*df}return e===e?e:0}var Ps=gf;function Ef(e){var t=Ps(e),r=t%1;return t===t?r?t-r:t:0}var Ft=Ef;function xf(e){return e}var Nt=xf;var Af="[object AsyncFunction]",Tf="[object Function]",Of="[object GeneratorFunction]",Sf="[object Proxy]";function Rf(e){if(!$(e))return!1;var t=pt(e);return t==Tf||t==Of||t==Af||t==Sf}var ht=Rf;var yf=Z["__core-js_shared__"],on=yf;var ks=function(){var e=/[^.]+$/.exec(on&&on.keys&&on.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function If(e){return!!ks&&ks in e}var Ms=If;var Nf=Function.prototype,Cf=Nf.toString;function bf(e){if(e!=null){try{return Cf.call(e)}catch{}try{return e+""}catch{}}return""}var Xt=bf;var vf=/[\\^$.*+?()[\]{}|]/g,Lf=/^\[object .+?Constructor\]$/,_f=Function.prototype,Pf=Object.prototype,kf=_f.toString,Mf=Pf.hasOwnProperty,wf=RegExp("^"+kf.call(Mf).replace(vf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ff(e){if(!$(e)||Ms(e))return!1;var t=ht(e)?wf:Lf;return t.test(Xt(e))}var ws=Ff;function Uf(e,t){return e?.[t]}var Fs=Uf;function Df(e,t){var r=Fs(e,t);return ws(r)?r:void 0}var xt=Df;var Bf=xt(Z,"WeakMap"),sn=Bf;var Us=Object.create,Gf=function(){function e(){}return function(t){if(!$(t))return{};if(Us)return Us(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Ds=Gf;function $f(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Bs=$f;function Kf(){}var K=Kf;function Wf(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Gs=Wf;var jf=800,Vf=16,zf=Date.now;function Hf(e){var t=0,r=0;return function(){var n=zf(),i=Vf-(n-r);if(r=n,i>0){if(++t>=jf)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var $s=Hf;function Xf(e){return function(){return e}}var Ks=Xf;var Yf=function(){try{var e=xt(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ke=Yf;var qf=ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:Ks(t),writable:!0})}:Nt,Ws=qf;var Zf=$s(Ws),js=Zf;function Qf(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var an=Qf;function Jf(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var ln=Jf;function tp(e){return e!==e}var Vs=tp;function ep(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var zs=ep;function rp(e,t,r){return t===t?zs(e,t,r):ln(e,Vs,r)}var Me=rp;function np(e,t){var r=e==null?0:e.length;return!!r&&Me(e,t,0)>-1}var un=np;var ip=9007199254740991,op=/^(?:0|[1-9]\d*)$/;function sp(e,t){var r=typeof e;return t=t??ip,!!t&&(r=="number"||r!="symbol"&&op.test(e))&&e>-1&&e%1==0&&e<t}var oe=sp;function ap(e,t,r){t=="__proto__"&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var we=ap;function lp(e,t){return e===t||e!==e&&t!==t}var Ut=lp;var up=Object.prototype,cp=up.hasOwnProperty;function fp(e,t,r){var n=e[t];(!(cp.call(e,t)&&Ut(n,r))||r===void 0&&!(t in e))&&we(e,t,r)}var se=fp;function pp(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=n?n(r[a],e[a],a,r,e):void 0;l===void 0&&(l=e[a]),i?we(r,a,l):se(r,a,l)}return r}var Dt=pp;var Hs=Math.max;function hp(e,t,r){return t=Hs(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=Hs(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),Bs(e,this,a)}}var Xs=hp;function mp(e,t){return js(Xs(e,t,Nt),e+"")}var Fe=mp;var dp=9007199254740991;function gp(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dp}var Ue=gp;function Ep(e){return e!=null&&Ue(e.length)&&!ht(e)}var Q=Ep;function xp(e,t,r){if(!$(r))return!1;var n=typeof t;return(n=="number"?Q(r)&&oe(t,r.length):n=="string"&&t in r)?Ut(r[t],e):!1}var ae=xp;function Ap(e){return Fe(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,s&&ae(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}var Ys=Ap;var Tp=Object.prototype;function Op(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Tp;return e===r}var Bt=Op;function Sp(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var qs=Sp;var Rp="[object Arguments]";function yp(e){return H(e)&&pt(e)==Rp}var _i=yp;var Zs=Object.prototype,Ip=Zs.hasOwnProperty,Np=Zs.propertyIsEnumerable,Cp=_i(function(){return arguments}())?_i:function(e){return H(e)&&Ip.call(e,"callee")&&!Np.call(e,"callee")},le=Cp;function bp(){return!1}var Qs=bp;var ea=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Js=ea&&typeof module=="object"&&module&&!module.nodeType&&module,vp=Js&&Js.exports===ea,ta=vp?Z.Buffer:void 0,Lp=ta?ta.isBuffer:void 0,_p=Lp||Qs,Yt=_p;var Pp="[object Arguments]",kp="[object Array]",Mp="[object Boolean]",wp="[object Date]",Fp="[object Error]",Up="[object Function]",Dp="[object Map]",Bp="[object Number]",Gp="[object Object]",$p="[object RegExp]",Kp="[object Set]",Wp="[object String]",jp="[object WeakMap]",Vp="[object ArrayBuffer]",zp="[object DataView]",Hp="[object Float32Array]",Xp="[object Float64Array]",Yp="[object Int8Array]",qp="[object Int16Array]",Zp="[object Int32Array]",Qp="[object Uint8Array]",Jp="[object Uint8ClampedArray]",th="[object Uint16Array]",eh="[object Uint32Array]",U={};U[Hp]=U[Xp]=U[Yp]=U[qp]=U[Zp]=U[Qp]=U[Jp]=U[th]=U[eh]=!0;U[Pp]=U[kp]=U[Vp]=U[Mp]=U[zp]=U[wp]=U[Fp]=U[Up]=U[Dp]=U[Bp]=U[Gp]=U[$p]=U[Kp]=U[Wp]=U[jp]=!1;function rh(e){return H(e)&&Ue(e.length)&&!!U[pt(e)]}var ra=rh;function nh(e){return function(t){return e(t)}}var Gt=nh;var na=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ir=na&&typeof module=="object"&&module&&!module.nodeType&&module,ih=Ir&&Ir.exports===na,Pi=ih&&nn.process,oh=function(){try{var e=Ir&&Ir.require&&Ir.require("util").types;return e||Pi&&Pi.binding&&Pi.binding("util")}catch{}}(),Ct=oh;var ia=Ct&&Ct.isTypedArray,sh=ia?Gt(ia):ra,De=sh;var ah=Object.prototype,lh=ah.hasOwnProperty;function uh(e,t){var r=O(e),n=!r&&le(e),i=!r&&!n&&Yt(e),o=!r&&!n&&!i&&De(e),s=r||n||i||o,a=s?qs(e.length,String):[],l=a.length;for(var u in e)(t||lh.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||oe(u,l)))&&a.push(u);return a}var cn=uh;function ch(e,t){return function(r){return e(t(r))}}var fn=ch;var fh=fn(Object.keys,Object),oa=fh;var ph=Object.prototype,hh=ph.hasOwnProperty;function mh(e){if(!Bt(e))return oa(e);var t=[];for(var r in Object(e))hh.call(e,r)&&r!="constructor"&&t.push(r);return t}var pn=mh;function dh(e){return Q(e)?cn(e):pn(e)}var P=dh;var gh=Object.prototype,Eh=gh.hasOwnProperty,xh=Ys(function(e,t){if(Bt(t)||Q(t)){Dt(t,P(t),e);return}for(var r in t)Eh.call(t,r)&&se(e,r,t[r])}),st=xh;function Ah(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var sa=Ah;var Th=Object.prototype,Oh=Th.hasOwnProperty;function Sh(e){if(!$(e))return sa(e);var t=Bt(e),r=[];for(var n in e)n=="constructor"&&(t||!Oh.call(e,n))||r.push(n);return r}var aa=Sh;function Rh(e){return Q(e)?cn(e,!0):aa(e)}var ue=Rh;var yh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ih=/^\w*$/;function Nh(e,t){if(O(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ie(e)?!0:Ih.test(e)||!yh.test(e)||t!=null&&e in Object(t)}var Be=Nh;var Ch=xt(Object,"create"),qt=Ch;function bh(){this.__data__=qt?qt(null):{},this.size=0}var la=bh;function vh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ua=vh;var Lh="__lodash_hash_undefined__",_h=Object.prototype,Ph=_h.hasOwnProperty;function kh(e){var t=this.__data__;if(qt){var r=t[e];return r===Lh?void 0:r}return Ph.call(t,e)?t[e]:void 0}var ca=kh;var Mh=Object.prototype,wh=Mh.hasOwnProperty;function Fh(e){var t=this.__data__;return qt?t[e]!==void 0:wh.call(t,e)}var fa=Fh;var Uh="__lodash_hash_undefined__";function Dh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=qt&&t===void 0?Uh:t,this}var pa=Dh;function Ge(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ge.prototype.clear=la;Ge.prototype.delete=ua;Ge.prototype.get=ca;Ge.prototype.has=fa;Ge.prototype.set=pa;var ki=Ge;function Bh(){this.__data__=[],this.size=0}var ha=Bh;function Gh(e,t){for(var r=e.length;r--;)if(Ut(e[r][0],t))return r;return-1}var ce=Gh;var $h=Array.prototype,Kh=$h.splice;function Wh(e){var t=this.__data__,r=ce(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Kh.call(t,r,1),--this.size,!0}var ma=Wh;function jh(e){var t=this.__data__,r=ce(t,e);return r<0?void 0:t[r][1]}var da=jh;function Vh(e){return ce(this.__data__,e)>-1}var ga=Vh;function zh(e,t){var r=this.__data__,n=ce(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Ea=zh;function $e(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$e.prototype.clear=ha;$e.prototype.delete=ma;$e.prototype.get=da;$e.prototype.has=ga;$e.prototype.set=Ea;var fe=$e;var Hh=xt(Z,"Map"),pe=Hh;function Xh(){this.size=0,this.__data__={hash:new ki,map:new(pe||fe),string:new ki}}var xa=Xh;function Yh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Aa=Yh;function qh(e,t){var r=e.__data__;return Aa(t)?r[typeof t=="string"?"string":"hash"]:r.map}var he=qh;function Zh(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t}var Ta=Zh;function Qh(e){return he(this,e).get(e)}var Oa=Qh;function Jh(e){return he(this,e).has(e)}var Sa=Jh;function tm(e,t){var r=he(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Ra=tm;function Ke(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ke.prototype.clear=xa;Ke.prototype.delete=Ta;Ke.prototype.get=Oa;Ke.prototype.has=Sa;Ke.prototype.set=Ra;var Se=Ke;var em="Expected a function";function Mi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(em);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Mi.Cache||Se),r}Mi.Cache=Se;var ya=Mi;var rm=500;function nm(e){var t=ya(e,function(n){return r.size===rm&&r.clear(),n}),r=t.cache;return t}var Ia=nm;var im=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,om=/\\(\\)?/g,sm=Ia(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(im,function(r,n,i,o){t.push(i?o.replace(om,"$1"):n||r)}),t}),Na=sm;function am(e){return e==null?"":Ns(e)}var Ca=am;function lm(e,t){return O(e)?e:Be(e,t)?[e]:Na(Ca(e))}var me=lm;var um=1/0;function cm(e){if(typeof e=="string"||ie(e))return e;var t=e+"";return t=="0"&&1/e==-um?"-0":t}var $t=cm;function fm(e,t){t=me(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[$t(t[r++])];return r&&r==n?e:void 0}var We=fm;function pm(e,t,r){var n=e==null?void 0:We(e,t);return n===void 0?r:n}var ba=pm;function hm(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var je=hm;var va=it?it.isConcatSpreadable:void 0;function mm(e){return O(e)||le(e)||!!(va&&e&&e[va])}var La=mm;function _a(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=La),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?_a(a,t-1,r,n,i):je(i,a):n||(i[i.length]=a)}return i}var Ve=_a;function dm(e){var t=e==null?0:e.length;return t?Ve(e,1):[]}var et=dm;var gm=fn(Object.getPrototypeOf,Object),hn=gm;function Em(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var mn=Em;function xm(e,t,r,n){var i=-1,o=e==null?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}var Pa=xm;function Am(){this.__data__=new fe,this.size=0}var ka=Am;function Tm(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Ma=Tm;function Om(e){return this.__data__.get(e)}var wa=Om;function Sm(e){return this.__data__.has(e)}var Fa=Sm;var Rm=200;function ym(e,t){var r=this.__data__;if(r instanceof fe){var n=r.__data__;if(!pe||n.length<Rm-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Se(n)}return r.set(e,t),this.size=r.size,this}var Ua=ym;function ze(e){var t=this.__data__=new fe(e);this.size=t.size}ze.prototype.clear=ka;ze.prototype.delete=Ma;ze.prototype.get=wa;ze.prototype.has=Fa;ze.prototype.set=Ua;var de=ze;function Im(e,t){return e&&Dt(t,P(t),e)}var Da=Im;function Nm(e,t){return e&&Dt(t,ue(t),e)}var Ba=Nm;var Wa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ga=Wa&&typeof module=="object"&&module&&!module.nodeType&&module,Cm=Ga&&Ga.exports===Wa,$a=Cm?Z.Buffer:void 0,Ka=$a?$a.allocUnsafe:void 0;function bm(e,t){if(t)return e.slice();var r=e.length,n=Ka?Ka(r):new e.constructor(r);return e.copy(n),n}var ja=bm;function vm(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}var He=vm;function Lm(){return[]}var dn=Lm;var _m=Object.prototype,Pm=_m.propertyIsEnumerable,Va=Object.getOwnPropertySymbols,km=Va?function(e){return e==null?[]:(e=Object(e),He(Va(e),function(t){return Pm.call(e,t)}))}:dn,Xe=km;function Mm(e,t){return Dt(e,Xe(e),t)}var za=Mm;var wm=Object.getOwnPropertySymbols,Fm=wm?function(e){for(var t=[];e;)je(t,Xe(e)),e=hn(e);return t}:dn,gn=Fm;function Um(e,t){return Dt(e,gn(e),t)}var Ha=Um;function Dm(e,t,r){var n=t(e);return O(e)?n:je(n,r(e))}var En=Dm;function Bm(e){return En(e,P,Xe)}var Nr=Bm;function Gm(e){return En(e,ue,gn)}var xn=Gm;var $m=xt(Z,"DataView"),An=$m;var Km=xt(Z,"Promise"),Tn=Km;var Wm=xt(Z,"Set"),ge=Wm;var Xa="[object Map]",jm="[object Object]",Ya="[object Promise]",qa="[object Set]",Za="[object WeakMap]",Qa="[object DataView]",Vm=Xt(An),zm=Xt(pe),Hm=Xt(Tn),Xm=Xt(ge),Ym=Xt(sn),Re=pt;(An&&Re(new An(new ArrayBuffer(1)))!=Qa||pe&&Re(new pe)!=Xa||Tn&&Re(Tn.resolve())!=Ya||ge&&Re(new ge)!=qa||sn&&Re(new sn)!=Za)&&(Re=function(e){var t=pt(e),r=t==jm?e.constructor:void 0,n=r?Xt(r):"";if(n)switch(n){case Vm:return Qa;case zm:return Xa;case Hm:return Ya;case Xm:return qa;case Ym:return Za}return t});var Lt=Re;var qm=Object.prototype,Zm=qm.hasOwnProperty;function Qm(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Zm.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Ja=Qm;var Jm=Z.Uint8Array,Ye=Jm;function td(e){var t=new e.constructor(e.byteLength);return new Ye(t).set(new Ye(e)),t}var qe=td;function ed(e,t){var r=t?qe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var tl=ed;var rd=/\w*$/;function nd(e){var t=new e.constructor(e.source,rd.exec(e));return t.lastIndex=e.lastIndex,t}var el=nd;var rl=it?it.prototype:void 0,nl=rl?rl.valueOf:void 0;function id(e){return nl?Object(nl.call(e)):{}}var il=id;function od(e,t){var r=t?qe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var ol=od;var sd="[object Boolean]",ad="[object Date]",ld="[object Map]",ud="[object Number]",cd="[object RegExp]",fd="[object Set]",pd="[object String]",hd="[object Symbol]",md="[object ArrayBuffer]",dd="[object DataView]",gd="[object Float32Array]",Ed="[object Float64Array]",xd="[object Int8Array]",Ad="[object Int16Array]",Td="[object Int32Array]",Od="[object Uint8Array]",Sd="[object Uint8ClampedArray]",Rd="[object Uint16Array]",yd="[object Uint32Array]";function Id(e,t,r){var n=e.constructor;switch(t){case md:return qe(e);case sd:case ad:return new n(+e);case dd:return tl(e,r);case gd:case Ed:case xd:case Ad:case Td:case Od:case Sd:case Rd:case yd:return ol(e,r);case ld:return new n;case ud:case pd:return new n(e);case cd:return el(e);case fd:return new n;case hd:return il(e)}}var sl=Id;function Nd(e){return typeof e.constructor=="function"&&!Bt(e)?Ds(hn(e)):{}}var al=Nd;var Cd="[object Map]";function bd(e){return H(e)&&Lt(e)==Cd}var ll=bd;var ul=Ct&&Ct.isMap,vd=ul?Gt(ul):ll,cl=vd;var Ld="[object Set]";function _d(e){return H(e)&&Lt(e)==Ld}var fl=_d;var pl=Ct&&Ct.isSet,Pd=pl?Gt(pl):fl,hl=Pd;var kd=1,Md=2,wd=4,ml="[object Arguments]",Fd="[object Array]",Ud="[object Boolean]",Dd="[object Date]",Bd="[object Error]",dl="[object Function]",Gd="[object GeneratorFunction]",$d="[object Map]",Kd="[object Number]",gl="[object Object]",Wd="[object RegExp]",jd="[object Set]",Vd="[object String]",zd="[object Symbol]",Hd="[object WeakMap]",Xd="[object ArrayBuffer]",Yd="[object DataView]",qd="[object Float32Array]",Zd="[object Float64Array]",Qd="[object Int8Array]",Jd="[object Int16Array]",tg="[object Int32Array]",eg="[object Uint8Array]",rg="[object Uint8ClampedArray]",ng="[object Uint16Array]",ig="[object Uint32Array]",k={};k[ml]=k[Fd]=k[Xd]=k[Yd]=k[Ud]=k[Dd]=k[qd]=k[Zd]=k[Qd]=k[Jd]=k[tg]=k[$d]=k[Kd]=k[gl]=k[Wd]=k[jd]=k[Vd]=k[zd]=k[eg]=k[rg]=k[ng]=k[ig]=!0;k[Bd]=k[dl]=k[Hd]=!1;function On(e,t,r,n,i,o){var s,a=t&kd,l=t&Md,u=t&wd;if(r&&(s=i?r(e,n,i,o):r(e)),s!==void 0)return s;if(!$(e))return e;var c=O(e);if(c){if(s=Ja(e),!a)return Gs(e,s)}else{var f=Lt(e),p=f==dl||f==Gd;if(Yt(e))return ja(e,a);if(f==gl||f==ml||p&&!i){if(s=l||p?{}:al(e),!a)return l?Ha(e,Ba(s,e)):za(e,Da(s,e))}else{if(!k[f])return i?e:{};s=sl(e,f,a)}}o||(o=new de);var E=o.get(e);if(E)return E;o.set(e,s),hl(e)?e.forEach(function(I){s.add(On(I,t,r,I,e,o))}):cl(e)&&e.forEach(function(I,T){s.set(T,On(I,t,r,T,e,o))});var S=u?l?xn:Nr:l?ue:P,R=c?void 0:S(e);return an(R||e,function(I,T){R&&(T=I,I=e[T]),se(s,T,On(I,t,r,T,e,o))}),s}var El=On;var og=4;function sg(e){return El(e,og)}var M=sg;function ag(e){for(var t=-1,r=e==null?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i}var Kt=ag;var lg="__lodash_hash_undefined__";function ug(e){return this.__data__.set(e,lg),this}var xl=ug;function cg(e){return this.__data__.has(e)}var Al=cg;function Sn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Se;++t<r;)this.add(e[t])}Sn.prototype.add=Sn.prototype.push=xl;Sn.prototype.has=Al;var Ze=Sn;function fg(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Rn=fg;function pg(e,t){return e.has(t)}var Qe=pg;var hg=1,mg=2;function dg(e,t,r,n,i,o){var s=r&hg,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var f=-1,p=!0,E=r&mg?new Ze:void 0;for(o.set(e,t),o.set(t,e);++f<a;){var S=e[f],R=t[f];if(n)var I=s?n(R,S,f,t,e,o):n(S,R,f,e,t,o);if(I!==void 0){if(I)continue;p=!1;break}if(E){if(!Rn(t,function(T,g){if(!Qe(E,g)&&(S===T||i(S,T,r,n,o)))return E.push(g)})){p=!1;break}}else if(!(S===R||i(S,R,r,n,o))){p=!1;break}}return o.delete(e),o.delete(t),p}var yn=dg;function gg(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Tl=gg;function Eg(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Je=Eg;var xg=1,Ag=2,Tg="[object Boolean]",Og="[object Date]",Sg="[object Error]",Rg="[object Map]",yg="[object Number]",Ig="[object RegExp]",Ng="[object Set]",Cg="[object String]",bg="[object Symbol]",vg="[object ArrayBuffer]",Lg="[object DataView]",Ol=it?it.prototype:void 0,wi=Ol?Ol.valueOf:void 0;function _g(e,t,r,n,i,o,s){switch(r){case Lg:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case vg:return!(e.byteLength!=t.byteLength||!o(new Ye(e),new Ye(t)));case Tg:case Og:case yg:return Ut(+e,+t);case Sg:return e.name==t.name&&e.message==t.message;case Ig:case Cg:return e==t+"";case Rg:var a=Tl;case Ng:var l=n&xg;if(a||(a=Je),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;n|=Ag,s.set(e,t);var c=yn(a(e),a(t),n,i,o,s);return s.delete(e),c;case bg:if(wi)return wi.call(e)==wi.call(t)}return!1}var Sl=_g;var Pg=1,kg=Object.prototype,Mg=kg.hasOwnProperty;function wg(e,t,r,n,i,o){var s=r&Pg,a=Nr(e),l=a.length,u=Nr(t),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var p=a[f];if(!(s?p in t:Mg.call(t,p)))return!1}var E=o.get(e),S=o.get(t);if(E&&S)return E==t&&S==e;var R=!0;o.set(e,t),o.set(t,e);for(var I=s;++f<l;){p=a[f];var T=e[p],g=t[p];if(n)var h=s?n(g,T,p,t,e,o):n(T,g,p,e,t,o);if(!(h===void 0?T===g||i(T,g,r,n,o):h)){R=!1;break}I||(I=p=="constructor")}if(R&&!I){var N=e.constructor,C=t.constructor;N!=C&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof C=="function"&&C instanceof C)&&(R=!1)}return o.delete(e),o.delete(t),R}var Rl=wg;var Fg=1,yl="[object Arguments]",Il="[object Array]",In="[object Object]",Ug=Object.prototype,Nl=Ug.hasOwnProperty;function Dg(e,t,r,n,i,o){var s=O(e),a=O(t),l=s?Il:Lt(e),u=a?Il:Lt(t);l=l==yl?In:l,u=u==yl?In:u;var c=l==In,f=u==In,p=l==u;if(p&&Yt(e)){if(!Yt(t))return!1;s=!0,c=!1}if(p&&!c)return o||(o=new de),s||De(e)?yn(e,t,r,n,i,o):Sl(e,t,l,r,n,i,o);if(!(r&Fg)){var E=c&&Nl.call(e,"__wrapped__"),S=f&&Nl.call(t,"__wrapped__");if(E||S){var R=E?e.value():e,I=S?t.value():t;return o||(o=new de),i(R,I,r,n,o)}}return p?(o||(o=new de),Rl(e,t,r,n,i,o)):!1}var Cl=Dg;function bl(e,t,r,n,i){return e===t?!0:e==null||t==null||!H(e)&&!H(t)?e!==e&&t!==t:Cl(e,t,r,n,bl,i)}var Nn=bl;var Bg=1,Gg=2;function $g(e,t,r,n){var i=r.length,o=i,s=!n;if(e==null)return!o;for(e=Object(e);i--;){var a=r[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=r[i];var l=a[0],u=e[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in e))return!1}else{var f=new de;if(n)var p=n(u,c,l,e,t,f);if(!(p===void 0?Nn(c,u,Bg|Gg,n,f):p))return!1}}return!0}var vl=$g;function Kg(e){return e===e&&!$(e)}var Cn=Kg;function Wg(e){for(var t=P(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Cn(i)]}return t}var Ll=Wg;function jg(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var bn=jg;function Vg(e){var t=Ll(e);return t.length==1&&t[0][2]?bn(t[0][0],t[0][1]):function(r){return r===e||vl(r,e,t)}}var _l=Vg;function zg(e,t){return e!=null&&t in Object(e)}var Pl=zg;function Hg(e,t,r){t=me(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var s=$t(t[n]);if(!(o=e!=null&&r(e,s)))break;e=e[s]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&Ue(i)&&oe(s,i)&&(O(e)||le(e)))}var vn=Hg;function Xg(e,t){return e!=null&&vn(e,t,Pl)}var kl=Xg;var Yg=1,qg=2;function Zg(e,t){return Be(e)&&Cn(t)?bn($t(e),t):function(r){var n=ba(r,e);return n===void 0&&n===t?kl(r,e):Nn(t,n,Yg|qg)}}var Ml=Zg;function Qg(e){return function(t){return t?.[e]}}var wl=Qg;function Jg(e){return function(t){return We(t,e)}}var Fl=Jg;function tE(e){return Be(e)?wl($t(e)):Fl(e)}var Ul=tE;function eE(e){return typeof e=="function"?e:e==null?Nt:typeof e=="object"?O(e)?Ml(e[0],e[1]):_l(e):Ul(e)}var J=eE;function rE(e,t,r,n){for(var i=-1,o=e==null?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}var Dl=rE;function nE(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var l=s[e?a:++i];if(r(o[l],l,o)===!1)break}return t}}var Bl=nE;var iE=Bl(),Gl=iE;function oE(e,t){return e&&Gl(e,t,P)}var $l=oE;function sE(e,t){return function(r,n){if(r==null)return r;if(!Q(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Object(r);(t?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var Kl=sE;var aE=Kl($l),At=aE;function lE(e,t,r,n){return At(e,function(i,o,s){t(n,i,r(i),s)}),n}var Wl=lE;function uE(e,t){return function(r,n){var i=O(r)?Dl:Wl,o=t?t():{};return i(r,e,J(n,2),o)}}var jl=uE;var Vl=Object.prototype,cE=Vl.hasOwnProperty,fE=Fe(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&ae(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],s=ue(o),a=-1,l=s.length;++a<l;){var u=s[a],c=e[u];(c===void 0||Ut(c,Vl[u])&&!cE.call(e,u))&&(e[u]=o[u])}return e}),tr=fE;function pE(e){return H(e)&&Q(e)}var Fi=pE;function hE(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Ln=hE;var mE=200;function dE(e,t,r,n){var i=-1,o=un,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;r&&(t=wt(t,Gt(r))),n?(o=Ln,s=!1):t.length>=mE&&(o=Qe,s=!1,t=new Ze(t));t:for(;++i<a;){var c=e[i],f=r==null?c:r(c);if(c=n||c!==0?c:0,s&&f===f){for(var p=u;p--;)if(t[p]===f)continue t;l.push(c)}else o(t,f,n)||l.push(c)}return l}var zl=dE;var gE=Fe(function(e,t){return Fi(e)?zl(e,Ve(t,1,Fi,!0)):[]}),Ee=gE;function EE(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var _t=EE;function xE(e,t,r){var n=e==null?0:e.length;return n?(t=r||t===void 0?1:Ft(t),mn(e,t<0?0:t,n)):[]}var X=xE;function AE(e,t,r){var n=e==null?0:e.length;return n?(t=r||t===void 0?1:Ft(t),t=n-t,mn(e,0,t<0?0:t)):[]}var Zt=AE;function TE(e){return typeof e=="function"?e:Nt}var Hl=TE;function OE(e,t){var r=O(e)?an:At;return r(e,Hl(t))}var x=OE;function SE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Xl=SE;function RE(e,t){var r=!0;return At(e,function(n,i,o){return r=!!t(n,i,o),r}),r}var Yl=RE;function yE(e,t,r){var n=O(e)?Xl:Yl;return r&&ae(e,t,r)&&(t=void 0),n(e,J(t,3))}var ut=yE;function IE(e,t){var r=[];return At(e,function(n,i,o){t(n,i,o)&&r.push(n)}),r}var _n=IE;function NE(e,t){var r=O(e)?He:_n;return r(e,J(t,3))}var ct=NE;function CE(e){return function(t,r,n){var i=Object(t);if(!Q(t)){var o=J(r,3);t=P(t),r=function(a){return o(i[a],a,i)}}var s=e(t,r,n);return s>-1?i[o?t[s]:s]:void 0}}var ql=CE;var bE=Math.max;function vE(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:Ft(r);return i<0&&(i=bE(n+i,0)),ln(e,J(t,3),i)}var Zl=vE;var LE=ql(Zl),Wt=LE;function _E(e){return e&&e.length?e[0]:void 0}var ot=_E;function PE(e,t){var r=-1,n=Q(e)?Array(e.length):[];return At(e,function(i,o,s){n[++r]=t(i,o,s)}),n}var Ql=PE;function kE(e,t){var r=O(e)?wt:Ql;return r(e,J(t,3))}var d=kE;function ME(e,t){return Ve(d(e,t),1)}var mt=ME;var wE=Object.prototype,FE=wE.hasOwnProperty,UE=jl(function(e,t,r){FE.call(e,r)?e[r].push(t):we(e,r,[t])}),Ui=UE;var DE=Object.prototype,BE=DE.hasOwnProperty;function GE(e,t){return e!=null&&BE.call(e,t)}var Jl=GE;function $E(e,t){return e!=null&&vn(e,t,Jl)}var A=$E;var KE="[object String]";function WE(e){return typeof e=="string"||!O(e)&&H(e)&&pt(e)==KE}var rt=WE;function jE(e,t){return wt(t,function(r){return e[r]})}var tu=jE;function VE(e){return e==null?[]:tu(e,P(e))}var _=VE;var zE=Math.max;function HE(e,t,r,n){e=Q(e)?e:_(e),r=r&&!n?Ft(r):0;var i=e.length;return r<0&&(r=zE(i+r,0)),rt(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Me(e,t,r)>-1}var B=HE;var XE=Math.max;function YE(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:Ft(r);return i<0&&(i=XE(n+i,0)),Me(e,t,i)}var Pn=YE;var qE="[object Map]",ZE="[object Set]",QE=Object.prototype,JE=QE.hasOwnProperty;function tx(e){if(e==null)return!0;if(Q(e)&&(O(e)||typeof e=="string"||typeof e.splice=="function"||Yt(e)||De(e)||le(e)))return!e.length;var t=Lt(e);if(t==qE||t==ZE)return!e.size;if(Bt(e))return!pn(e).length;for(var r in e)if(JE.call(e,r))return!1;return!0}var b=tx;var ex="[object RegExp]";function rx(e){return H(e)&&pt(e)==ex}var eu=rx;var ru=Ct&&Ct.isRegExp,nx=ru?Gt(ru):eu,bt=nx;function ix(e){return e===void 0}var ft=ix;var ox="Expected a function";function sx(e){if(typeof e!="function")throw new TypeError(ox);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var nu=sx;function ax(e,t,r,n){if(!$(e))return e;t=me(t,e);for(var i=-1,o=t.length,s=o-1,a=e;a!=null&&++i<o;){var l=$t(t[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=s){var c=a[l];u=n?n(c,l,a):void 0,u===void 0&&(u=$(c)?c:oe(t[i+1])?[]:{})}se(a,l,u),a=a[l]}return e}var iu=ax;function lx(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=We(e,s);r(a,s)&&iu(o,me(s,e),a)}return o}var ou=lx;function ux(e,t){if(e==null)return{};var r=wt(xn(e),function(n){return[n]});return t=J(t),ou(e,r,function(n,i){return t(n,i[0])})}var Tt=ux;function cx(e,t,r,n,i){return i(e,function(o,s,a){r=n?(n=!1,o):t(r,o,s,a)}),r}var su=cx;function fx(e,t,r){var n=O(e)?Pa:su,i=arguments.length<3;return n(e,J(t,4),r,i,At)}var tt=fx;function px(e,t){var r=O(e)?He:_n;return r(e,nu(J(t,3)))}var xe=px;function hx(e,t){var r;return At(e,function(n,i,o){return r=t(n,i,o),!r}),!!r}var au=hx;function mx(e,t,r){var n=O(e)?Rn:au;return r&&ae(e,t,r)&&(t=void 0),n(e,J(t,3))}var Cr=mx;var dx=1/0,gx=ge&&1/Je(new ge([,-0]))[1]==dx?function(e){return new ge(e)}:K,lu=gx;var Ex=200;function xx(e,t,r){var n=-1,i=un,o=e.length,s=!0,a=[],l=a;if(r)s=!1,i=Ln;else if(o>=Ex){var u=t?null:lu(e);if(u)return Je(u);s=!1,i=Qe,l=new Ze}else l=t?[]:a;t:for(;++n<o;){var c=e[n],f=t?t(c):c;if(c=r||c!==0?c:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue t;t&&l.push(f),a.push(c)}else i(l,f,r)||(l!==a&&l.push(f),a.push(c))}return a}var uu=xx;function Ax(e){return e&&e.length?uu(e):[]}var er=Ax;function rr(e){console&&console.error&&console.error(`Error: ${e}`)}function br(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function vr(e){let t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}function Lr(e){function t(){}t.prototype=e;let r=new t;function n(){return typeof r.bar}return n(),n(),e;(0,eval)(e)}function Tx(e){return Ox(e)?e.LABEL:e.name}function Ox(e){return rt(e.LABEL)&&e.LABEL!==""}var yt=class{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),x(this.definition,r=>{r.accept(t)})}},w=class extends yt{constructor(t){super([]),this.idx=1,st(this,Tt(t,r=>r!==void 0))}set definition(t){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(t){t.visit(this)}},dt=class extends yt{constructor(t){super(t.definition),this.orgText="",st(this,Tt(t,r=>r!==void 0))}},F=class extends yt{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,st(this,Tt(t,r=>r!==void 0))}},D=class extends yt{constructor(t){super(t.definition),this.idx=1,st(this,Tt(t,r=>r!==void 0))}},Y=class extends yt{constructor(t){super(t.definition),this.idx=1,st(this,Tt(t,r=>r!==void 0))}},q=class extends yt{constructor(t){super(t.definition),this.idx=1,st(this,Tt(t,r=>r!==void 0))}},L=class extends yt{constructor(t){super(t.definition),this.idx=1,st(this,Tt(t,r=>r!==void 0))}},j=class extends yt{constructor(t){super(t.definition),this.idx=1,st(this,Tt(t,r=>r!==void 0))}},V=class extends yt{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,st(this,Tt(t,r=>r!==void 0))}},v=class{constructor(t){this.idx=1,st(this,Tt(t,r=>r!==void 0))}accept(t){t.visit(this)}};function kn(e){return d(e,nr)}function nr(e){function t(r){return d(r,nr)}if(e instanceof w){let r={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return rt(e.label)&&(r.label=e.label),r}else{if(e instanceof F)return{type:"Alternative",definition:t(e.definition)};if(e instanceof D)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof Y)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof q)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:nr(new v({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof j)return{type:"RepetitionWithSeparator",idx:e.idx,separator:nr(new v({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof L)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof V)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof v){let r={type:"Terminal",name:e.terminalType.name,label:Tx(e.terminalType),idx:e.idx};rt(e.label)&&(r.terminalLabel=e.label);let n=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=bt(n)?n.source:n),r}else{if(e instanceof dt)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}var gt=class{visit(t){let r=t;switch(r.constructor){case w:return this.visitNonTerminal(r);case F:return this.visitAlternative(r);case D:return this.visitOption(r);case Y:return this.visitRepetitionMandatory(r);case q:return this.visitRepetitionMandatoryWithSeparator(r);case j:return this.visitRepetitionWithSeparator(r);case L:return this.visitRepetition(r);case V:return this.visitAlternation(r);case v:return this.visitTerminal(r);case dt:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}};function Di(e){return e instanceof F||e instanceof D||e instanceof L||e instanceof Y||e instanceof q||e instanceof j||e instanceof v||e instanceof dt}function ye(e,t=[]){return e instanceof D||e instanceof L||e instanceof j?!0:e instanceof V?Cr(e.definition,n=>ye(n,t)):e instanceof w&&B(t,e)?!1:e instanceof yt?(e instanceof w&&t.push(e),ut(e.definition,n=>ye(n,t))):!1}function Bi(e){return e instanceof V}function Ot(e){if(e instanceof w)return"SUBRULE";if(e instanceof D)return"OPTION";if(e instanceof V)return"OR";if(e instanceof Y)return"AT_LEAST_ONE";if(e instanceof q)return"AT_LEAST_ONE_SEP";if(e instanceof j)return"MANY_SEP";if(e instanceof L)return"MANY";if(e instanceof v)return"CONSUME";throw Error("non exhaustive match")}var Qt=class{walk(t,r=[]){x(t.definition,(n,i)=>{let o=X(t.definition,i+1);if(n instanceof w)this.walkProdRef(n,o,r);else if(n instanceof v)this.walkTerminal(n,o,r);else if(n instanceof F)this.walkFlat(n,o,r);else if(n instanceof D)this.walkOption(n,o,r);else if(n instanceof Y)this.walkAtLeastOne(n,o,r);else if(n instanceof q)this.walkAtLeastOneSep(n,o,r);else if(n instanceof j)this.walkManySep(n,o,r);else if(n instanceof L)this.walkMany(n,o,r);else if(n instanceof V)this.walkOr(n,o,r);else throw Error("non exhaustive match")})}walkTerminal(t,r,n){}walkProdRef(t,r,n){}walkFlat(t,r,n){let i=r.concat(n);this.walk(t,i)}walkOption(t,r,n){let i=r.concat(n);this.walk(t,i)}walkAtLeastOne(t,r,n){let i=[new D({definition:t.definition})].concat(r,n);this.walk(t,i)}walkAtLeastOneSep(t,r,n){let i=cu(t,r,n);this.walk(t,i)}walkMany(t,r,n){let i=[new D({definition:t.definition})].concat(r,n);this.walk(t,i)}walkManySep(t,r,n){let i=cu(t,r,n);this.walk(t,i)}walkOr(t,r,n){let i=r.concat(n);x(t.definition,o=>{let s=new F({definition:[o]});this.walk(s,i)})}};function cu(e,t,r){return[new D({definition:[new v({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function Ie(e){if(e instanceof w)return Ie(e.referencedRule);if(e instanceof v)return yx(e);if(Di(e))return Sx(e);if(Bi(e))return Rx(e);throw Error("non exhaustive match")}function Sx(e){let t=[],r=e.definition,n=0,i=r.length>n,o,s=!0;for(;i&&s;)o=r[n],s=ye(o),t=t.concat(Ie(o)),n=n+1,i=r.length>n;return er(t)}function Rx(e){let t=d(e.definition,r=>Ie(r));return er(et(t))}function yx(e){return[e.terminalType]}var Mn="_~IN~_";var Gi=class extends Qt{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,r,n){}walkProdRef(t,r,n){let i=Ix(t.referencedRule,t.idx)+this.topProd.name,o=r.concat(n),s=new F({definition:o}),a=Ie(s);this.follows[i]=a}};function fu(e){let t={};return x(e,r=>{let n=new Gi(r).startWalking();st(t,n)}),t}function Ix(e,t){return e.name+t+Mn}function y(e){return e.charCodeAt(0)}function wn(e,t){Array.isArray(e)?e.forEach(function(r){t.push(r)}):t.push(e)}function ir(e,t){if(e[t]===!0)throw"duplicate flag "+t;let r=e[t];e[t]=!0}function Ne(e){if(e===void 0)throw Error("Internal Error - Should never get here!");return!0}function _r(){throw Error("Internal Error - Should never get here!")}function $i(e){return e.type==="Character"}var Pr=[];for(let e=y("0");e<=y("9");e++)Pr.push(e);var kr=[y("_")].concat(Pr);for(let e=y("a");e<=y("z");e++)kr.push(e);for(let e=y("A");e<=y("Z");e++)kr.push(e);var Ki=[y(" "),y("\f"),y(`
`),y("\r"),y("	"),y("\v"),y("	"),y("\xA0"),y("\u1680"),y("\u2000"),y("\u2001"),y("\u2002"),y("\u2003"),y("\u2004"),y("\u2005"),y("\u2006"),y("\u2007"),y("\u2008"),y("\u2009"),y("\u200A"),y("\u2028"),y("\u2029"),y("\u202F"),y("\u205F"),y("\u3000"),y("\uFEFF")];var Nx=/[0-9a-fA-F]/,Fn=/[0-9]/,Cx=/[1-9]/,Mr=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":ir(n,"global");break;case"i":ir(n,"ignoreCase");break;case"m":ir(n,"multiLine");break;case"u":ir(n,"unicode");break;case"y":ir(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){let t=[],r=this.idx;for(t.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(r)}}alternative(){let t=[],r=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}Ne(r);let n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(t)}}return _r()}quantifier(t=!1){let r,n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let o;this.isDigit()?(o=this.integerIncludingZero(),r={atLeast:i,atMost:o}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(t===!0&&r===void 0)return;Ne(r);break}if(!(t===!0&&r===void 0)&&Ne(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let t,r=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}return t===void 0&&this.isPatternCharacter()&&(t=this.patternCharacter()),Ne(t)?(t.loc=this.loc(r),this.isQuantifier()&&(t.quantifier=this.quantifier()),t):_r()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[y(`
`),y("\r"),y("\u2028"),y("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,r=!1;switch(this.popChar()){case"d":t=Pr;break;case"D":t=Pr,r=!0;break;case"s":t=Ki;break;case"S":t=Ki,r=!0;break;case"w":t=kr;break;case"W":t=kr,r=!0;break}return Ne(t)?{type:"Set",value:t,complement:r}:_r()}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=y("\f");break;case"n":t=y(`
`);break;case"r":t=y("\r");break;case"t":t=y("	");break;case"v":t=y("\v");break}return Ne(t)?{type:"Character",value:t}:_r()}controlLetterEscapeAtom(){this.consumeChar("c");let t=this.popChar();if(/[a-zA-Z]/.test(t)===!1)throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:y("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let t=this.popChar();return{type:"Character",value:y(t)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let t=this.popChar();return{type:"Character",value:y(t)}}}characterClass(){let t=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let n=this.classAtom(),i=n.type==="Character";if($i(n)&&this.isRangeDash()){this.consumeChar("-");let o=this.classAtom(),s=o.type==="Character";if($i(o)){if(o.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:o.value})}else wn(n.value,t),t.push(y("-")),wn(o.value,t)}else wn(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:r,value:t}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:y("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++;break}let r=this.disjunction();this.consumeChar(")");let n={type:"Group",capturing:t,value:r};return t&&(n.idx=this.groupIdx),n}positiveInteger(){let t=this.popChar();if(Cx.test(t)===!1)throw Error("Expecting a positive integer");for(;Fn.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(Fn.test(t)===!1)throw Error("Expecting an integer");for(;Fn.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){let t=this.popChar();switch(t){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:y(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Fn.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){let t=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let r="";for(let i=0;i<t;i++){let o=this.popChar();if(Nx.test(o)===!1)throw Error("Expecting a HexDecimal digits");r+=o}return{type:"Character",value:parseInt(r,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){let t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(t!==void 0&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}};var Ae=class{visitChildren(t){for(let r in t){let n=t[r];t.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Lookbehind":this.visitLookbehind(t);break;case"NegativeLookbehind":this.visitNegativeLookbehind(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t);break}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitLookbehind(t){}visitNegativeLookbehind(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}};var Un={},bx=new Mr;function or(e){let t=e.toString();if(Un.hasOwnProperty(t))return Un[t];{let r=bx.pattern(t);return Un[t]=r,r}}function pu(){Un={}}var mu="Complement Sets are not supported for first char optimization",wr=`Unable to use "first char" lexer optimizations:
`;function du(e,t=!1){try{let r=or(e);return Wi(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===mu)t&&br(`${wr}	Unable to optimize: < ${e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";t&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),rr(`${wr}
	Failed parsing: < ${e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function Wi(e,t,r){switch(e.type){case"Disjunction":for(let i=0;i<e.value.length;i++)Wi(e.value[i],t,r);break;case"Alternative":let n=e.value;for(let i=0;i<n.length;i++){let o=n[i];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=o;switch(s.type){case"Character":Dn(s.value,t,r);break;case"Set":if(s.complement===!0)throw Error(mu);x(s.value,l=>{if(typeof l=="number")Dn(l,t,r);else{let u=l;if(r===!0)for(let c=u.from;c<=u.to;c++)Dn(c,t,r);else{for(let c=u.from;c<=u.to&&c<sr;c++)Dn(c,t,r);if(u.to>=sr){let c=u.from>=sr?u.from:sr,f=u.to,p=jt(c),E=jt(f);for(let S=p;S<=E;S++)t[S]=S}}}});break;case"Group":Wi(s.value,t,r);break;default:throw Error("Non Exhaustive Match")}let a=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&ji(s)===!1||s.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return _(t)}function Dn(e,t,r){let n=jt(e);t[n]=n,r===!0&&vx(e,t)}function vx(e,t){let r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){let i=jt(n.charCodeAt(0));t[i]=i}else{let i=r.toLowerCase();if(i!==r){let o=jt(i.charCodeAt(0));t[o]=o}}}function hu(e,t){return Wt(e.value,r=>{if(typeof r=="number")return B(t,r);{let n=r;return Wt(t,i=>n.from<=i&&i<=n.to)!==void 0}})}function ji(e){let t=e.quantifier;return t&&t.atLeast===0?!0:e.value?O(e.value)?ut(e.value,ji):ji(e.value):!1}var Vi=class extends Ae{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(this.found!==!0){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return;case"Lookbehind":this.visitLookbehind(t);return;case"NegativeLookbehind":this.visitNegativeLookbehind(t);return}super.visitChildren(t)}}visitCharacter(t){B(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?hu(t,this.targetCharCodes)===void 0&&(this.found=!0):hu(t,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Bn(e,t){if(t instanceof RegExp){let r=or(t),n=new Vi(e);return n.visit(r),n.found}else return Wt(t,r=>B(e,r.charCodeAt(0)))!==void 0}var Ce="PATTERN",ar="defaultMode",Gn="modes",Hi=typeof new RegExp("(?:)").sticky=="boolean";function xu(e,t){t=tr(t,{useSticky:Hi,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(g,h)=>h()});let r=t.tracer;r("initCharCodeToOptimizedIndexMap",()=>{Xx()});let n;r("Reject Lexer.NA",()=>{n=xe(e,g=>g[Ce]===z.NA)});let i=!1,o;r("Transform Patterns",()=>{i=!1,o=d(n,g=>{let h=g[Ce];if(bt(h)){let N=h.source;return N.length===1&&N!=="^"&&N!=="$"&&N!=="."&&!h.ignoreCase?N:N.length===2&&N[0]==="\\"&&!B(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],N[1])?N[1]:t.useSticky?Eu(h):gu(h)}else{if(ht(h))return i=!0,{exec:h};if(typeof h=="object")return i=!0,h;if(typeof h=="string"){if(h.length===1)return h;{let N=h.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),C=new RegExp(N);return t.useSticky?Eu(C):gu(C)}}else throw Error("non exhaustive match")}})});let s,a,l,u,c;r("misc mapping",()=>{s=d(n,g=>g.tokenTypeIdx),a=d(n,g=>{let h=g.GROUP;if(h!==z.SKIPPED){if(rt(h))return h;if(ft(h))return!1;throw Error("non exhaustive match")}}),l=d(n,g=>{let h=g.LONGER_ALT;if(h)return O(h)?d(h,C=>Pn(n,C)):[Pn(n,h)]}),u=d(n,g=>g.PUSH_MODE),c=d(n,g=>A(g,"POP_MODE"))});let f;r("Line Terminator Handling",()=>{let g=Nu(t.lineTerminatorCharacters);f=d(n,h=>!1),t.positionTracking!=="onlyOffset"&&(f=d(n,h=>A(h,"LINE_BREAKS")?!!h.LINE_BREAKS:Iu(h,g)===!1&&Bn(g,h.PATTERN)))});let p,E,S,R;r("Misc Mapping #2",()=>{p=d(n,Ru),E=d(o,zx),S=tt(n,(g,h)=>{let N=h.GROUP;return rt(N)&&N!==z.SKIPPED&&(g[N]=[]),g},{}),R=d(o,(g,h)=>({pattern:o[h],longerAlt:l[h],canLineTerminator:f[h],isCustom:p[h],short:E[h],group:a[h],push:u[h],pop:c[h],tokenTypeIdx:s[h],tokenType:n[h]}))});let I=!0,T=[];return t.safeMode||r("First Char Optimization",()=>{T=tt(n,(g,h,N)=>{if(typeof h.PATTERN=="string"){let C=h.PATTERN.charCodeAt(0),St=jt(C);zi(g,St,R[N])}else if(O(h.START_CHARS_HINT)){let C;x(h.START_CHARS_HINT,St=>{let Ni=typeof St=="string"?St.charCodeAt(0):St,Mt=jt(Ni);C!==Mt&&(C=Mt,zi(g,Mt,R[N]))})}else if(bt(h.PATTERN))if(h.PATTERN.unicode)I=!1,t.ensureOptimizations&&rr(`${wr}	Unable to analyze < ${h.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let C=du(h.PATTERN,t.ensureOptimizations);b(C)&&(I=!1),x(C,St=>{zi(g,St,R[N])})}else t.ensureOptimizations&&rr(`${wr}	TokenType: <${h.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),I=!1;return g},[])}),{emptyGroups:S,patternIdxToConfig:R,charCodeToPatternIdxToConfig:T,hasCustom:i,canBeOptimized:I}}function Au(e,t){let r=[],n=_x(e);r=r.concat(n.errors);let i=Px(n.valid),o=i.valid;return r=r.concat(i.errors),r=r.concat(Lx(o)),r=r.concat(Gx(o)),r=r.concat($x(o,t)),r=r.concat(Kx(o)),r}function Lx(e){let t=[],r=ct(e,n=>bt(n[Ce]));return t=t.concat(Mx(r)),t=t.concat(Ux(r)),t=t.concat(Dx(r)),t=t.concat(Bx(r)),t=t.concat(wx(r)),t}function _x(e){let t=ct(e,i=>!A(i,Ce)),r=d(t,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:G.MISSING_PATTERN,tokenTypes:[i]})),n=Ee(e,t);return{errors:r,valid:n}}function Px(e){let t=ct(e,i=>{let o=i[Ce];return!bt(o)&&!ht(o)&&!A(o,"exec")&&!rt(o)}),r=d(t,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:G.INVALID_PATTERN,tokenTypes:[i]})),n=Ee(e,t);return{errors:r,valid:n}}var kx=/[^\\][$]/;function Mx(e){class t extends Ae{constructor(){super(...arguments),this.found=!1}visitEndAnchor(o){this.found=!0}}let r=ct(e,i=>{let o=i.PATTERN;try{let s=or(o),a=new t;return a.visit(s),a.found}catch{return kx.test(o.source)}});return d(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:G.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function wx(e){let t=ct(e,n=>n.PATTERN.test(""));return d(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:G.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}var Fx=/[^\\[][\^]|^\^/;function Ux(e){class t extends Ae{constructor(){super(...arguments),this.found=!1}visitStartAnchor(o){this.found=!0}}let r=ct(e,i=>{let o=i.PATTERN;try{let s=or(o),a=new t;return a.visit(s),a.found}catch{return Fx.test(o.source)}});return d(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:G.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Dx(e){let t=ct(e,n=>{let i=n[Ce];return i instanceof RegExp&&(i.multiline||i.global)});return d(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:G.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function Bx(e){let t=[],r=d(e,o=>tt(e,(s,a)=>(o.PATTERN.source===a.PATTERN.source&&!B(t,a)&&a.PATTERN!==z.NA&&(t.push(a),s.push(a)),s),[]));r=Kt(r);let n=ct(r,o=>o.length>1);return d(n,o=>{let s=d(o,l=>l.name);return{message:`The same RegExp pattern ->${ot(o).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:G.DUPLICATE_PATTERNS_FOUND,tokenTypes:o}})}function Gx(e){let t=ct(e,n=>{if(!A(n,"GROUP"))return!1;let i=n.GROUP;return i!==z.SKIPPED&&i!==z.NA&&!rt(i)});return d(t,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:G.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function $x(e,t){let r=ct(e,i=>i.PUSH_MODE!==void 0&&!B(t,i.PUSH_MODE));return d(r,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:G.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Kx(e){let t=[],r=tt(e,(n,i,o)=>{let s=i.PATTERN;return s===z.NA||(rt(s)?n.push({str:s,idx:o,tokenType:i}):bt(s)&&jx(s)&&n.push({str:s.source,idx:o,tokenType:i})),n},[]);return x(e,(n,i)=>{x(r,({str:o,idx:s,tokenType:a})=>{if(i<s&&Wx(o,n.PATTERN)){let l=`Token: ->${a.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:l,type:G.UNREACHABLE_PATTERN,tokenTypes:[n,a]})}})}),t}function Wx(e,t){if(bt(t)){if(Vx(t))return!1;let r=t.exec(e);return r!==null&&r.index===0}else{if(ht(t))return t(e,0,[],{});if(A(t,"exec"))return t.exec(e,0,[],{});if(typeof t=="string")return t===e;throw Error("non exhaustive match")}}function jx(e){return Wt([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>e.source.indexOf(r)!==-1)===void 0}function Vx(e){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(e.source)}function gu(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function Eu(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function Tu(e,t,r){let n=[];return A(e,ar)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+ar+`> property in its definition
`,type:G.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),A(e,Gn)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Gn+`> property in its definition
`,type:G.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),A(e,Gn)&&A(e,ar)&&!A(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${ar}: <${e.defaultMode}>which does not exist
`,type:G.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),A(e,Gn)&&x(e.modes,(i,o)=>{x(i,(s,a)=>{if(ft(s))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${o}> at index: <${a}>
`,type:G.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(A(s,"LONGER_ALT")){let l=O(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];x(l,u=>{!ft(u)&&!B(i,u)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${s.name}> outside of mode <${o}>
`,type:G.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function Ou(e,t,r){let n=[],i=!1,o=Kt(et(_(e.modes))),s=xe(o,l=>l[Ce]===z.NA),a=Nu(r);return t&&x(s,l=>{let u=Iu(l,a);if(u!==!1){let f={message:Hx(l,u),type:u.issue,tokenType:l};n.push(f)}else A(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(i=!0):Bn(a,l.PATTERN)&&(i=!0)}),t&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:G.NO_LINE_BREAKS_FLAGS}),n}function Su(e){let t={},r=P(e);return x(r,n=>{let i=e[n];if(O(i))t[n]=[];else throw Error("non exhaustive match")}),t}function Ru(e){let t=e.PATTERN;if(bt(t))return!1;if(ht(t))return!0;if(A(t,"exec"))return!0;if(rt(t))return!1;throw Error("non exhaustive match")}function zx(e){return rt(e)&&e.length===1?e.charCodeAt(0):!1}var yu={test:function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let n=e.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return e.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function Iu(e,t){if(A(e,"LINE_BREAKS"))return!1;if(bt(e.PATTERN)){try{Bn(t,e.PATTERN)}catch(r){return{issue:G.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(rt(e.PATTERN))return!1;if(Ru(e))return{issue:G.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Hx(e,t){if(t.issue===G.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${e.name}> Token Type
	 Root cause: ${t.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===G.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Nu(e){return d(e,r=>rt(r)?r.charCodeAt(0):r)}function zi(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}var sr=256,$n=[];function jt(e){return e<sr?e:$n[e]}function Xx(){if(b($n)){$n=new Array(65536);for(let e=0;e<65536;e++)$n[e]=e>255?255+~~(e/255):e}}function Jt(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[r]===!0}function lr(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var Cu=1,vu={};function te(e){let t=Yx(e);qx(t),Qx(t),Zx(t),x(t,r=>{r.isParent=r.categoryMatches.length>0})}function Yx(e){let t=M(e),r=e,n=!0;for(;n;){r=Kt(et(d(r,o=>o.CATEGORIES)));let i=Ee(r,t);t=t.concat(i),b(i)?n=!1:r=i}return t}function qx(e){x(e,t=>{Xi(t)||(vu[Cu]=t,t.tokenTypeIdx=Cu++),bu(t)&&!O(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),bu(t)||(t.CATEGORIES=[]),Jx(t)||(t.categoryMatches=[]),tA(t)||(t.categoryMatchesMap={})})}function Zx(e){x(e,t=>{t.categoryMatches=[],x(t.categoryMatchesMap,(r,n)=>{t.categoryMatches.push(vu[n].tokenTypeIdx)})})}function Qx(e){x(e,t=>{Lu([],t)})}function Lu(e,t){x(e,r=>{t.categoryMatchesMap[r.tokenTypeIdx]=!0}),x(t.CATEGORIES,r=>{let n=e.concat(t);B(n,r)||Lu(n,r)})}function Xi(e){return A(e,"tokenTypeIdx")}function bu(e){return A(e,"CATEGORIES")}function Jx(e){return A(e,"categoryMatches")}function tA(e){return A(e,"categoryMatchesMap")}function _u(e){return A(e,"tokenTypeIdx")}var Yi={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,n,i,o){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`}};var G;(function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(G||(G={}));var Fr={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Yi,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Fr);var z=class{constructor(t,r=Fr){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,o)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);let{time:a,value:l}=vr(o),u=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${s}<-- <${i}> time: ${a}ms`),this.traceInitIndent--,l}else return o()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=st({},Fr,r);let n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,o=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Fr.lineTerminatorsPattern)this.config.lineTerminatorsPattern=yu;else if(this.config.lineTerminatorCharacters===Fr.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),O(t)?i={modes:{defaultMode:M(t)},defaultMode:ar}:(o=!1,i=M(t))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Tu(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Ou(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},x(i.modes,(a,l)=>{i.modes[l]=xe(a,u=>ft(u))});let s=P(i.modes);if(x(i.modes,(a,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Au(a,s))}),b(this.lexerDefinitionErrors)){te(a);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=xu(a,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=u.charCodeToPatternIdxToConfig,this.emptyGroups=st({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!b(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let l=d(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}x(this.lexerDefinitionWarning,a=>{br(a.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Hi?(this.chopInput=Nt,this.match=this.matchWithTest):(this.updateLastIndex=K,this.match=this.matchWithExec),o&&(this.handleModes=K),this.trackStartLines===!1&&(this.computeNewColumn=Nt),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=K),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let a=tt(this.canModeBeOptimized,(l,u,c)=>(u===!1&&l.push(c),l),[]);if(r.ensureOptimizations&&!b(a))throw Error(`Lexer Modes: < ${a.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{pu()}),this.TRACE_INIT("toFastProperties",()=>{Lr(this)})})}tokenize(t,r=this.defaultMode){if(!b(this.lexerDefinitionErrors)){let i=d(this.lexerDefinitionErrors,o=>o.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(t,r)}tokenizeInternal(t,r){let n,i,o,s,a,l,u,c,f,p,E,S,R,I,T,g,h=t,N=h.length,C=0,St=0,Ni=this.hasCustom?0:Math.floor(t.length/10),Mt=new Array(Ni),Ci=[],Ar=this.trackStartLines?1:void 0,ee=this.trackStartLines?1:void 0,Tr=Su(this.emptyGroups),_c=this.trackStartLines,bi=this.config.lineTerminatorsPattern,rn=0,re=[],Or=[],Sr=[],hs=[];Object.freeze(hs);let Rr;function ms(){return re}function ds(lt){let It=jt(lt),Pe=Or[It];return Pe===void 0?hs:Pe}let Pc=lt=>{if(Sr.length===1&&lt.tokenType.PUSH_MODE===void 0){let It=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(lt);Ci.push({offset:lt.startOffset,line:lt.startLine,column:lt.startColumn,length:lt.image.length,message:It})}else{Sr.pop();let It=_t(Sr);re=this.patternIdxToConfig[It],Or=this.charCodeToPatternIdxToConfig[It],rn=re.length;let Pe=this.canModeBeOptimized[It]&&this.config.safeMode===!1;Or&&Pe?Rr=ds:Rr=ms}};function gs(lt){Sr.push(lt),Or=this.charCodeToPatternIdxToConfig[lt],re=this.patternIdxToConfig[lt],rn=re.length,rn=re.length;let It=this.canModeBeOptimized[lt]&&this.config.safeMode===!1;Or&&It?Rr=ds:Rr=ms}gs.call(this,r);let vt,Es=this.config.recoveryEnabled;for(;C<N;){l=null;let lt=h.charCodeAt(C),It=Rr(lt),Pe=It.length;for(n=0;n<Pe;n++){vt=It[n];let Rt=vt.pattern;u=null;let zt=vt.short;if(zt!==!1?lt===zt&&(l=Rt):vt.isCustom===!0?(g=Rt.exec(h,C,Mt,Tr),g!==null?(l=g[0],g.payload!==void 0&&(u=g.payload)):l=null):(this.updateLastIndex(Rt,C),l=this.match(Rt,t,C)),l!==null){if(a=vt.longerAlt,a!==void 0){let ne=a.length;for(o=0;o<ne;o++){let Ht=re[a[o]],Oe=Ht.pattern;if(c=null,Ht.isCustom===!0?(g=Oe.exec(h,C,Mt,Tr),g!==null?(s=g[0],g.payload!==void 0&&(c=g.payload)):s=null):(this.updateLastIndex(Oe,C),s=this.match(Oe,t,C)),s&&s.length>l.length){l=s,u=c,vt=Ht;break}}}break}}if(l!==null){if(f=l.length,p=vt.group,p!==void 0&&(E=vt.tokenTypeIdx,S=this.createTokenInstance(l,C,E,vt.tokenType,Ar,ee,f),this.handlePayload(S,u),p===!1?St=this.addToken(Mt,St,S):Tr[p].push(S)),t=this.chopInput(t,f),C=C+f,ee=this.computeNewColumn(ee,f),_c===!0&&vt.canLineTerminator===!0){let Rt=0,zt,ne;bi.lastIndex=0;do zt=bi.test(l),zt===!0&&(ne=bi.lastIndex-1,Rt++);while(zt===!0);Rt!==0&&(Ar=Ar+Rt,ee=f-ne,this.updateTokenEndLineColumnLocation(S,p,ne,Rt,Ar,ee,f))}this.handleModes(vt,Pc,gs,S)}else{let Rt=C,zt=Ar,ne=ee,Ht=Es===!1;for(;Ht===!1&&C<N;)for(t=this.chopInput(t,1),C++,i=0;i<rn;i++){let Oe=re[i],vi=Oe.pattern,xs=Oe.short;if(xs!==!1?h.charCodeAt(C)===xs&&(Ht=!0):Oe.isCustom===!0?Ht=vi.exec(h,C,Mt,Tr)!==null:(this.updateLastIndex(vi,C),Ht=vi.exec(t)!==null),Ht===!0)break}if(R=C-Rt,ee=this.computeNewColumn(ee,R),T=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(h,Rt,R,zt,ne,_t(Sr)),Ci.push({offset:Rt,line:zt,column:ne,length:R,message:T}),Es===!1)break}}return this.hasCustom||(Mt.length=St),{tokens:Mt,groups:Tr,errors:Ci}}handleModes(t,r,n,i){if(t.pop===!0){let o=t.push;r(i),o!==void 0&&n.call(this,o)}else t.push!==void 0&&n.call(this,t.push)}chopInput(t,r){return t.substring(r)}updateLastIndex(t,r){t.lastIndex=r}updateTokenEndLineColumnLocation(t,r,n,i,o,s,a){let l,u;r!==void 0&&(l=n===a-1,u=l?-1:0,i===1&&l===!0||(t.endLine=o+u,t.endColumn=s-1+-u))}computeNewColumn(t,r){return t+r}createOffsetOnlyToken(t,r,n,i){return{image:t,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(t,r,n,i,o,s){return{image:t,startOffset:r,startLine:o,startColumn:s,tokenTypeIdx:n,tokenType:i}}createFullToken(t,r,n,i,o,s,a){return{image:t,startOffset:r,endOffset:r+a-1,startLine:o,endLine:o,startColumn:s,endColumn:s+a-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(t,r,n){return t.push(n),r}addTokenUsingMemberAccess(t,r,n){return t[r]=n,r++,r}handlePayloadNoCustom(t,r){}handlePayloadWithCustom(t,r){r!==null&&(t.payload=r)}matchWithTest(t,r,n){return t.test(r)===!0?r.substring(n,t.lastIndex):null}matchWithExec(t,r){let n=t.exec(r);return n!==null?n[0]:null}};z.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";z.NA=/NOT_APPLICABLE/;function be(e){return qi(e)?e.LABEL:e.name}function qi(e){return rt(e.LABEL)&&e.LABEL!==""}var eA="parent",Pu="categories",ku="label",Mu="group",wu="push_mode",Fu="pop_mode",Uu="longer_alt",Du="line_breaks",Bu="start_chars_hint";function m(e){return rA(e)}function rA(e){let t=e.pattern,r={};if(r.name=e.name,ft(t)||(r.PATTERN=t),A(e,eA))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return A(e,Pu)&&(r.CATEGORIES=e[Pu]),te([r]),A(e,ku)&&(r.LABEL=e[ku]),A(e,Mu)&&(r.GROUP=e[Mu]),A(e,Fu)&&(r.POP_MODE=e[Fu]),A(e,wu)&&(r.PUSH_MODE=e[wu]),A(e,Uu)&&(r.LONGER_ALT=e[Uu]),A(e,Du)&&(r.LINE_BREAKS=e[Du]),A(e,Bu)&&(r.START_CHARS_HINT=e[Bu]),r}var Pt=m({name:"EOF",pattern:z.NA});te([Pt]);function ve(e,t,r,n,i,o,s,a){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:o,startColumn:s,endColumn:a,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function Zi(e,t){return Jt(e,t)}var Kn={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:n}){return`Expecting ${qi(e)?`--> ${be(e)} <--`:`token of type --> ${e.name} <--`} but found --> '${t.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:i}){let o="Expecting: ",a=`
but found: '`+ot(t).image+"'";if(n)return o+n+a;{let l=tt(e,(p,E)=>p.concat(E),[]),u=d(l,p=>`[${d(p,E=>be(E)).join(", ")}]`),f=`one of these possible Token sequences:
${d(u,(p,E)=>`  ${E+1}. ${p}`).join(`
`)}`;return o+f+a}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){let i="Expecting: ",s=`
but found: '`+ot(t).image+"'";if(r)return i+r+s;{let l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${d(e,u=>`[${d(u,c=>be(c)).join(",")}]`).join(" ,")}>`;return i+l+s}}};Object.freeze(Kn);var Gu={buildRuleNotFoundError(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+e.name+"<-"}},kt={buildDuplicateFoundError(e,t){function r(c){return c instanceof v?c.terminalType.name:c instanceof w?c.nonTerminalName:""}let n=e.name,i=ot(t),o=i.idx,s=Ot(i),a=r(i),l=o>0,u=`->${s}${l?o:""}<- ${a?`with argument: ->${a}<-`:""}
                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(e){let t=d(e.prefixPath,i=>be(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(e){let t=d(e.prefixPath,i=>be(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx,n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(e){let t=Ot(e.repetition);return e.repetition.idx!==0&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){return`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(e){return`An Alternation cannot have more than 256 alternatives:
<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
 has ${e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(e){let t=e.topLevelRule.name,r=d(e.leftRecursionPath,o=>o.name),n=`${t} --> ${r.concat([t]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${t}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;return e.topLevelRule instanceof dt?t=e.topLevelRule.name:t=e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function $u(e,t){let r=new Qi(e,t);return r.resolveRefs(),r.errors}var Qi=class extends gt{constructor(t,r){super(),this.nameToTopRule=t,this.errMsgProvider=r,this.errors=[]}resolveRefs(){x(_(this.nameToTopRule),t=>{this.currTopLevel=t,t.accept(this)})}visitNonTerminal(t){let r=this.nameToTopRule[t.nonTerminalName];if(r)t.referencedRule=r;else{let n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:nt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}};var Ji=class extends Qt{constructor(t,r){super(),this.topProd=t,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=M(this.path.ruleStack).reverse(),this.occurrenceStack=M(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,r=[]){this.found||super.walk(t,r)}walkProdRef(t,r,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){let i=r.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,i)}}updateExpectedNext(){b(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Wn=class extends Ji{constructor(t,r){super(t,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,r,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){let i=r.concat(n),o=new F({definition:i});this.possibleTokTypes=Ie(o),this.found=!0}}},ur=class extends Qt{constructor(t,r){super(),this.topRule=t,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},jn=class extends ur{walkMany(t,r,n){if(t.idx===this.occurrence){let i=ot(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(t,r,n)}},Ur=class extends ur{walkManySep(t,r,n){if(t.idx===this.occurrence){let i=ot(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(t,r,n)}},Vn=class extends ur{walkAtLeastOne(t,r,n){if(t.idx===this.occurrence){let i=ot(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(t,r,n)}},Dr=class extends ur{walkAtLeastOneSep(t,r,n){if(t.idx===this.occurrence){let i=ot(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(t,r,n)}};function zn(e,t,r=[]){r=M(r);let n=[],i=0;function o(a){return a.concat(X(e,i+1))}function s(a){let l=zn(o(a),t,r);return n.concat(l)}for(;r.length<t&&i<e.length;){let a=e[i];if(a instanceof F)return s(a.definition);if(a instanceof w)return s(a.definition);if(a instanceof D)n=s(a.definition);else if(a instanceof Y){let l=a.definition.concat([new L({definition:a.definition})]);return s(l)}else if(a instanceof q){let l=[new F({definition:a.definition}),new L({definition:[new v({terminalType:a.separator})].concat(a.definition)})];return s(l)}else if(a instanceof j){let l=a.definition.concat([new L({definition:[new v({terminalType:a.separator})].concat(a.definition)})]);n=s(l)}else if(a instanceof L){let l=a.definition.concat([new L({definition:a.definition})]);n=s(l)}else{if(a instanceof V)return x(a.definition,l=>{b(l.definition)===!1&&(n=s(l.definition))}),n;if(a instanceof v)r.push(a.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:X(e,i)}),n}function Hn(e,t,r,n){let i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE",a=!1,l=t.length,u=l-n-1,c=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!b(f);){let p=f.pop();if(p===s){a&&_t(f).idx<=u&&f.pop();continue}let E=p.def,S=p.idx,R=p.ruleStack,I=p.occurrenceStack;if(b(E))continue;let T=E[0];if(T===i){let g={idx:S,def:X(E),ruleStack:Zt(R),occurrenceStack:Zt(I)};f.push(g)}else if(T instanceof v)if(S<l-1){let g=S+1,h=t[g];if(r(h,T.terminalType)){let N={idx:g,def:X(E),ruleStack:R,occurrenceStack:I};f.push(N)}}else if(S===l-1)c.push({nextTokenType:T.terminalType,nextTokenOccurrence:T.idx,ruleStack:R,occurrenceStack:I}),a=!0;else throw Error("non exhaustive match");else if(T instanceof w){let g=M(R);g.push(T.nonTerminalName);let h=M(I);h.push(T.idx);let N={idx:S,def:T.definition.concat(o,X(E)),ruleStack:g,occurrenceStack:h};f.push(N)}else if(T instanceof D){let g={idx:S,def:X(E),ruleStack:R,occurrenceStack:I};f.push(g),f.push(s);let h={idx:S,def:T.definition.concat(X(E)),ruleStack:R,occurrenceStack:I};f.push(h)}else if(T instanceof Y){let g=new L({definition:T.definition,idx:T.idx}),h=T.definition.concat([g],X(E)),N={idx:S,def:h,ruleStack:R,occurrenceStack:I};f.push(N)}else if(T instanceof q){let g=new v({terminalType:T.separator}),h=new L({definition:[g].concat(T.definition),idx:T.idx}),N=T.definition.concat([h],X(E)),C={idx:S,def:N,ruleStack:R,occurrenceStack:I};f.push(C)}else if(T instanceof j){let g={idx:S,def:X(E),ruleStack:R,occurrenceStack:I};f.push(g),f.push(s);let h=new v({terminalType:T.separator}),N=new L({definition:[h].concat(T.definition),idx:T.idx}),C=T.definition.concat([N],X(E)),St={idx:S,def:C,ruleStack:R,occurrenceStack:I};f.push(St)}else if(T instanceof L){let g={idx:S,def:X(E),ruleStack:R,occurrenceStack:I};f.push(g),f.push(s);let h=new L({definition:T.definition,idx:T.idx}),N=T.definition.concat([h],X(E)),C={idx:S,def:N,ruleStack:R,occurrenceStack:I};f.push(C)}else if(T instanceof V)for(let g=T.definition.length-1;g>=0;g--){let h=T.definition[g],N={idx:S,def:h.definition.concat(X(E)),ruleStack:R,occurrenceStack:I};f.push(N),f.push(s)}else if(T instanceof F)f.push({idx:S,def:T.definition.concat(X(E)),ruleStack:R,occurrenceStack:I});else if(T instanceof dt)f.push(nA(T,S,R,I));else throw Error("non exhaustive match")}return c}function nA(e,t,r,n){let i=M(r);i.push(e.name);let o=M(n);return o.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:o}}var W;(function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"})(W||(W={}));function Yn(e){if(e instanceof D||e==="Option")return W.OPTION;if(e instanceof L||e==="Repetition")return W.REPETITION;if(e instanceof Y||e==="RepetitionMandatory")return W.REPETITION_MANDATORY;if(e instanceof q||e==="RepetitionMandatoryWithSeparator")return W.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof j||e==="RepetitionWithSeparator")return W.REPETITION_WITH_SEPARATOR;if(e instanceof V||e==="Alternation")return W.ALTERNATION;throw Error("non exhaustive match")}function Wu(e,t,r,n,i,o){let s=Br(e,t,r),a=Yu(s)?lr:Jt;return o(s,n,a,i)}function ju(e,t,r,n,i,o){let s=Gr(e,t,i,r),a=Yu(s)?lr:Jt;return o(s[0],a,n)}function Vu(e,t,r,n){let i=e.length,o=ut(e,s=>ut(s,a=>a.length===1));if(t)return function(s){let a=d(s,l=>l.GATE);for(let l=0;l<i;l++){let u=e[l],c=u.length,f=a[l];if(!(f!==void 0&&f.call(this)===!1))t:for(let p=0;p<c;p++){let E=u[p],S=E.length;for(let R=0;R<S;R++){let I=this.LA(R+1);if(r(I,E[R])===!1)continue t}return l}}};if(o&&!n){let s=d(e,l=>et(l)),a=tt(s,(l,u,c)=>(x(u,f=>{A(l,f.tokenTypeIdx)||(l[f.tokenTypeIdx]=c),x(f.categoryMatches,p=>{A(l,p)||(l[p]=c)})}),l),{});return function(){let l=this.LA(1);return a[l.tokenTypeIdx]}}else return function(){for(let s=0;s<i;s++){let a=e[s],l=a.length;t:for(let u=0;u<l;u++){let c=a[u],f=c.length;for(let p=0;p<f;p++){let E=this.LA(p+1);if(r(E,c[p])===!1)continue t}return s}}}}function zu(e,t,r){let n=ut(e,o=>o.length===1),i=e.length;if(n&&!r){let o=et(e);if(o.length===1&&b(o[0].categoryMatches)){let a=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}else{let s=tt(o,(a,l,u)=>(a[l.tokenTypeIdx]=!0,x(l.categoryMatches,c=>{a[c]=!0}),a),[]);return function(){let a=this.LA(1);return s[a.tokenTypeIdx]===!0}}}else return function(){t:for(let o=0;o<i;o++){let s=e[o],a=s.length;for(let l=0;l<a;l++){let u=this.LA(l+1);if(t(u,s[l])===!1)continue t}return!0}return!1}}var eo=class extends Qt{constructor(t,r,n){super(),this.topProd=t,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,r,n,i){return t.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(t,r,n){this.checkIsTarget(t,W.OPTION,r,n)||super.walkOption(t,r,n)}walkAtLeastOne(t,r,n){this.checkIsTarget(t,W.REPETITION_MANDATORY,r,n)||super.walkOption(t,r,n)}walkAtLeastOneSep(t,r,n){this.checkIsTarget(t,W.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(t,r,n)}walkMany(t,r,n){this.checkIsTarget(t,W.REPETITION,r,n)||super.walkOption(t,r,n)}walkManySep(t,r,n){this.checkIsTarget(t,W.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(t,r,n)}},Xn=class extends gt{constructor(t,r,n){super(),this.targetOccurrence=t,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(t,r){t.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||t===this.targetRef)&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,W.OPTION)}visitRepetition(t){this.checkIsTarget(t,W.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,W.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,W.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,W.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,W.ALTERNATION)}};function Ku(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function to(e){let t=[""];for(let r=0;r<e.length;r++){let n=e[r],i=[];for(let o=0;o<t.length;o++){let s=t[o];i.push(s+"_"+n.tokenTypeIdx);for(let a=0;a<n.categoryMatches.length;a++){let l="_"+n.categoryMatches[a];i.push(s+l)}}t=i}return t}function iA(e,t,r){for(let n=0;n<e.length;n++){if(n===r)continue;let i=e[n];for(let o=0;o<t.length;o++){let s=t[o];if(i[s]===!0)return!1}}return!0}function Hu(e,t){let r=d(e,s=>zn([s],1)),n=Ku(r.length),i=d(r,s=>{let a={};return x(s,l=>{let u=to(l.partialPath);x(u,c=>{a[c]=!0})}),a}),o=r;for(let s=1;s<=t;s++){let a=o;o=Ku(a.length);for(let l=0;l<a.length;l++){let u=a[l];for(let c=0;c<u.length;c++){let f=u[c].partialPath,p=u[c].suffixDef,E=to(f);if(iA(i,E,l)||b(p)||f.length===t){let R=n[l];if(qn(R,f)===!1){R.push(f);for(let I=0;I<E.length;I++){let T=E[I];i[l][T]=!0}}}else{let R=zn(p,s+1,f);o[l]=o[l].concat(R),x(R,I=>{let T=to(I.partialPath);x(T,g=>{i[l][g]=!0})})}}}}return n}function Br(e,t,r,n){let i=new Xn(e,W.ALTERNATION,n);return t.accept(i),Hu(i.result,r)}function Gr(e,t,r,n){let i=new Xn(e,r);t.accept(i);let o=i.result,a=new eo(t,e,r).startWalking(),l=new F({definition:o}),u=new F({definition:a});return Hu([l,u],n)}function qn(e,t){t:for(let r=0;r<e.length;r++){let n=e[r];if(n.length===t.length){for(let i=0;i<n.length;i++){let o=t[i],s=n[i];if((o===s||s.categoryMatchesMap[o.tokenTypeIdx]!==void 0)===!1)continue t}return!0}}return!1}function Xu(e,t){return e.length<t.length&&ut(e,(r,n)=>{let i=t[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function Yu(e){return ut(e,t=>ut(t,r=>ut(r,n=>b(n.categoryMatches))))}function qu(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return d(t,r=>Object.assign({type:nt.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Zu(e,t,r,n){let i=mt(e,l=>oA(l,r)),o=fA(e,t,r),s=mt(e,l=>lA(l,r)),a=mt(e,l=>aA(l,e,n,r));return i.concat(o,s,a)}function oA(e,t){let r=new ro;e.accept(r);let n=r.allProductions,i=Ui(n,sA),o=Tt(i,a=>a.length>1);return d(_(o),a=>{let l=ot(a),u=t.buildDuplicateFoundError(e,a),c=Ot(l),f={message:u,type:nt.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:c,occurrence:l.idx},p=Qu(l);return p&&(f.parameter=p),f})}function sA(e){return`${Ot(e)}_#_${e.idx}_#_${Qu(e)}`}function Qu(e){return e instanceof v?e.terminalType.name:e instanceof w?e.nonTerminalName:""}var ro=class extends gt{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}};function aA(e,t,r,n){let i=[];if(tt(t,(s,a)=>a.name===e.name?s+1:s,0)>1){let s=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:s,type:nt.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function Ju(e,t,r){let n=[],i;return B(t,e)||(i=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:nt.INVALID_RULE_OVERRIDE,ruleName:e})),n}function io(e,t,r,n=[]){let i=[],o=Zn(t.definition);if(b(o))return[];{let s=e.name;B(o,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:nt.LEFT_RECURSION,ruleName:s});let l=Ee(o,n.concat([e])),u=mt(l,c=>{let f=M(n);return f.push(c),io(e,c,r,f)});return i.concat(u)}}function Zn(e){let t=[];if(b(e))return t;let r=ot(e);if(r instanceof w)t.push(r.referencedRule);else if(r instanceof F||r instanceof D||r instanceof Y||r instanceof q||r instanceof j||r instanceof L)t=t.concat(Zn(r.definition));else if(r instanceof V)t=et(d(r.definition,o=>Zn(o.definition)));else if(!(r instanceof v))throw Error("non exhaustive match");let n=ye(r),i=e.length>1;if(n&&i){let o=X(e);return t.concat(Zn(o))}else return t}var $r=class extends gt{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}};function tc(e,t){let r=new $r;e.accept(r);let n=r.alternations;return mt(n,o=>{let s=Zt(o.definition);return mt(s,(a,l)=>{let u=Hn([a],[],Jt,1);return b(u)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:o,emptyChoiceIdx:l}),type:nt.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:o.idx,alternative:l+1}]:[]})})}function ec(e,t,r){let n=new $r;e.accept(n);let i=n.alternations;return i=xe(i,s=>s.ignoreAmbiguities===!0),mt(i,s=>{let a=s.idx,l=s.maxLookahead||t,u=Br(a,e,l,s),c=uA(u,s,e,r),f=cA(u,s,e,r);return c.concat(f)})}var no=class extends gt{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}};function lA(e,t){let r=new $r;e.accept(r);let n=r.alternations;return mt(n,o=>o.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:o}),type:nt.TOO_MANY_ALTS,ruleName:e.name,occurrence:o.idx}]:[])}function rc(e,t,r){let n=[];return x(e,i=>{let o=new no;i.accept(o);let s=o.allProductions;x(s,a=>{let l=Yn(a),u=a.maxLookahead||t,c=a.idx,p=Gr(c,i,l,u)[0];if(b(et(p))){let E=r.buildEmptyRepetitionError({topLevelRule:i,repetition:a});n.push({message:E,type:nt.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function uA(e,t,r,n){let i=[],o=tt(e,(a,l,u)=>(t.definition[u].ignoreAmbiguities===!0||x(l,c=>{let f=[u];x(e,(p,E)=>{u!==E&&qn(p,c)&&t.definition[E].ignoreAmbiguities!==!0&&f.push(E)}),f.length>1&&!qn(i,c)&&(i.push(c),a.push({alts:f,path:c}))}),a),[]);return d(o,a=>{let l=d(a.alts,c=>c+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:l,prefixPath:a.path}),type:nt.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:a.alts}})}function cA(e,t,r,n){let i=tt(e,(s,a,l)=>{let u=d(a,c=>({idx:l,path:c}));return s.concat(u)},[]);return Kt(mt(i,s=>{if(t.definition[s.idx].ignoreAmbiguities===!0)return[];let l=s.idx,u=s.path,c=ct(i,p=>t.definition[p.idx].ignoreAmbiguities!==!0&&p.idx<l&&Xu(p.path,u));return d(c,p=>{let E=[p.idx+1,l+1],S=t.idx===0?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:E,prefixPath:p.path}),type:nt.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:S,alternatives:E}})}))}function fA(e,t,r){let n=[],i=d(t,o=>o.name);return x(e,o=>{let s=o.name;if(B(i,s)){let a=r.buildNamespaceConflictError(o);n.push({message:a,type:nt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),n}function nc(e){let t=tr(e,{errMsgProvider:Gu}),r={};return x(e.rules,n=>{r[n.name]=n}),$u(r,t.errMsgProvider)}function ic(e){return e=tr(e,{errMsgProvider:kt}),Zu(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}var oc="MismatchedTokenException",sc="NoViableAltException",ac="EarlyExitException",lc="NotAllInputParsedException",uc=[oc,sc,ac,lc];Object.freeze(uc);function Te(e){return B(uc,e.name)}var cr=class extends Error{constructor(t,r){super(t),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Le=class extends cr{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=oc}},Kr=class extends cr{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=sc}},Wr=class extends cr{constructor(t,r){super(t,r),this.name=lc}},jr=class extends cr{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=ac}};var oo={},ao="InRuleRecoveryException",so=class extends Error{constructor(t){super(t),this.name=ao}},Qn=class{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=A(t,"recoveryEnabled")?t.recoveryEnabled:Et.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=pA)}getTokenToInsert(t){let r=ve(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,r,n,i){let o=this.findReSyncTokenType(),s=this.exportLexerState(),a=[],l=!1,u=this.LA(1),c=this.LA(1),f=()=>{let p=this.LA(0),E=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:p,ruleName:this.getCurrRuleFullName()}),S=new Le(E,u,this.LA(0));S.resyncedTokens=Zt(a),this.SAVE_ERROR(S)};for(;!l;)if(this.tokenMatcher(c,i)){f();return}else if(n.call(this)){f(),t.apply(this,r);return}else this.tokenMatcher(c,o)?l=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,a));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(t,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,r)))}getFollowsForInRuleRecovery(t,r){let n=this.getCurrentGrammarPath(t,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(t,r){if(this.canRecoverWithSingleTokenInsertion(t,r))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){let n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new so("sad sad panda")}canPerformInRuleRecovery(t,r){return this.canRecoverWithSingleTokenInsertion(t,r)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,r){if(!this.canTokenTypeBeInsertedInRecovery(t)||b(r))return!1;let n=this.LA(1);return Wt(r,o=>this.tokenMatcher(n,o))!==void 0}canRecoverWithSingleTokenDeletion(t){return this.canTokenTypeBeDeletedInRecovery(t)?this.tokenMatcher(this.LA(2),t):!1}isInCurrentRuleReSyncSet(t){let r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return B(n,t)}findReSyncTokenType(){let t=this.flattenFollowSet(),r=this.LA(1),n=2;for(;;){let i=Wt(t,o=>Zi(r,o));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return oo;let t=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let t=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return d(t,(n,i)=>i===0?oo:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(t[i-1])})}flattenFollowSet(){let t=d(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return et(t)}getFollowSetFromFollowKey(t){if(t===oo)return[Pt];let r=t.ruleName+t.idxInCallingRule+Mn+t.inRule;return this.resyncFollows[r]}addToResyncTokens(t,r){return this.tokenMatcher(t,Pt)||r.push(t),r}reSyncTo(t){let r=[],n=this.LA(1);for(;this.tokenMatcher(n,t)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return Zt(r)}attemptInRepetitionRecovery(t,r,n,i,o,s,a){}getCurrentGrammarPath(t,r){let n=this.getHumanReadableRuleStack(),i=M(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:t,lastTokOccurrence:r}}getHumanReadableRuleStack(){return d(this.RULE_STACK,t=>this.shortRuleNameToFullName(t))}};function pA(e,t,r,n,i,o,s){let a=this.getKeyForAutomaticLookahead(n,i),l=this.firstAfterRepMap[a];if(l===void 0){let p=this.getCurrRuleFullName(),E=this.getGAstProductions()[p];l=new o(E,i).startWalking(),this.firstAfterRepMap[a]=l}let u=l.token,c=l.occurrence,f=l.isEndOfRule;this.RULE_STACK.length===1&&f&&u===void 0&&(u=Pt,c=1),!(u===void 0||c===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,c,s)&&this.tryInRepetitionRecovery(e,t,r,u)}function Jn(e,t,r){return r|t|e}var Vr=class{constructor(t){var r;this.maxLookahead=(r=t?.maxLookahead)!==null&&r!==void 0?r:Et.maxLookahead}validate(t){let r=this.validateNoLeftRecursion(t.rules);if(b(r)){let n=this.validateEmptyOrAlternatives(t.rules),i=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...r,...n,...i,...o]}return r}validateNoLeftRecursion(t){return mt(t,r=>io(r,r,kt))}validateEmptyOrAlternatives(t){return mt(t,r=>tc(r,kt))}validateAmbiguousAlternationAlternatives(t,r){return mt(t,n=>ec(n,r,kt))}validateSomeNonEmptyLookaheadPath(t,r){return rc(t,r,kt)}buildLookaheadForAlternation(t){return Wu(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,Vu)}buildLookaheadForOptional(t){return ju(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,Yn(t.prodType),zu)}};var ei=class{initLooksAhead(t){this.dynamicTokensEnabled=A(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:Et.dynamicTokensEnabled,this.maxLookahead=A(t,"maxLookahead")?t.maxLookahead:Et.maxLookahead,this.lookaheadStrategy=A(t,"lookaheadStrategy")?t.lookaheadStrategy:new Vr({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){x(t,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:n,repetition:i,option:o,repetitionMandatory:s,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:l}=hA(r);x(n,u=>{let c=u.idx===0?"":u.idx;this.TRACE_INIT(`${Ot(u)}${c}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:r,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),p=Jn(this.fullRuleNameToShort[r.name],256,u.idx);this.setLaFuncCache(p,f)})}),x(i,u=>{this.computeLookaheadFunc(r,u.idx,768,"Repetition",u.maxLookahead,Ot(u))}),x(o,u=>{this.computeLookaheadFunc(r,u.idx,512,"Option",u.maxLookahead,Ot(u))}),x(s,u=>{this.computeLookaheadFunc(r,u.idx,1024,"RepetitionMandatory",u.maxLookahead,Ot(u))}),x(a,u=>{this.computeLookaheadFunc(r,u.idx,1536,"RepetitionMandatoryWithSeparator",u.maxLookahead,Ot(u))}),x(l,u=>{this.computeLookaheadFunc(r,u.idx,1280,"RepetitionWithSeparator",u.maxLookahead,Ot(u))})})})}computeLookaheadFunc(t,r,n,i,o,s){this.TRACE_INIT(`${s}${r===0?"":r}`,()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:t,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),l=Jn(this.fullRuleNameToShort[t.name],n,r);this.setLaFuncCache(l,a)})}getKeyForAutomaticLookahead(t,r){let n=this.getLastExplicitRuleShortName();return Jn(n,t,r)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,r){this.lookAheadFuncsCache.set(t,r)}},lo=class extends gt{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}},ti=new lo;function hA(e){ti.reset(),e.accept(ti);let t=ti.dslMethods;return ti.reset(),t}function fo(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function po(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function cc(e,t,r){e.children[r]===void 0?e.children[r]=[t]:e.children[r].push(t)}function fc(e,t,r){e.children[t]===void 0?e.children[t]=[r]:e.children[t].push(r)}var mA="name";function ho(e,t){Object.defineProperty(e,mA,{enumerable:!1,configurable:!0,writable:!1,value:t})}function dA(e,t){let r=P(e),n=r.length;for(let i=0;i<n;i++){let o=r[i],s=e[o],a=s.length;for(let l=0;l<a;l++){let u=s[l];u.tokenTypeIdx===void 0&&this[u.name](u.children,t)}}}function pc(e,t){let r=function(){};ho(r,e+"BaseSemantics");let n={visit:function(i,o){if(O(i)&&(i=i[0]),!ft(i))return this[i.name](i.children,o)},validateVisitor:function(){let i=gA(this,t);if(!b(i)){let o=d(i,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${o.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=t,r}function hc(e,t,r){let n=function(){};ho(n,e+"BaseSemanticsWithDefaults");let i=Object.create(r.prototype);return x(t,o=>{i[o]=dA}),n.prototype=i,n.prototype.constructor=n,n}var mo;(function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"})(mo||(mo={}));function gA(e,t){return EA(e,t)}function EA(e,t){let r=ct(t,i=>ht(e[i])===!1),n=d(r,i=>({msg:`Missing visitor method: <${i}> on ${e.constructor.name} CST Visitor.`,type:mo.MISSING_METHOD,methodName:i}));return Kt(n)}var oi=class{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=A(t,"nodeLocationTracking")?t.nodeLocationTracking:Et.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=K,this.cstFinallyStateUpdate=K,this.cstPostTerminal=K,this.cstPostNonTerminal=K,this.cstPostRule=K;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=po,this.setNodeLocationFromNode=po,this.cstPostRule=K,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=K,this.setNodeLocationFromNode=K,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=fo,this.setNodeLocationFromNode=fo,this.cstPostRule=K,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=K,this.setNodeLocationFromNode=K,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=K,this.setNodeLocationFromNode=K,this.cstPostRule=K,this.setInitialNodeLocation=K;else throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){let r=this.LA(1);t.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){let r={name:t,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){let r=this.LA(0),n=t.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(t){let r=this.LA(0),n=t.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(t,r){let n=this.CST_STACK[this.CST_STACK.length-1];cc(n,r,t),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(t,r){let n=this.CST_STACK[this.CST_STACK.length-1];fc(n,r,t),this.setNodeLocationFromNode(n.location,t.location)}getBaseCstVisitorConstructor(){if(ft(this.baseCstVisitorConstructor)){let t=pc(this.className,P(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(ft(this.baseCstVisitorWithDefaultsConstructor)){let t=hc(this.className,P(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){let t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}};var si=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):fr}LA(t){let r=this.currIdx+t;return r<0||this.tokVectorLength<=r?fr:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var ai=class{ACTION(t){return t.call(this)}consume(t,r,n){return this.consumeInternal(r,t,n)}subrule(t,r,n){return this.subruleInternal(r,t,n)}option(t,r){return this.optionInternal(r,t)}or(t,r){return this.orInternal(r,t)}many(t,r){return this.manyInternal(t,r)}atLeastOne(t,r){return this.atLeastOneInternal(t,r)}CONSUME(t,r){return this.consumeInternal(t,0,r)}CONSUME1(t,r){return this.consumeInternal(t,1,r)}CONSUME2(t,r){return this.consumeInternal(t,2,r)}CONSUME3(t,r){return this.consumeInternal(t,3,r)}CONSUME4(t,r){return this.consumeInternal(t,4,r)}CONSUME5(t,r){return this.consumeInternal(t,5,r)}CONSUME6(t,r){return this.consumeInternal(t,6,r)}CONSUME7(t,r){return this.consumeInternal(t,7,r)}CONSUME8(t,r){return this.consumeInternal(t,8,r)}CONSUME9(t,r){return this.consumeInternal(t,9,r)}SUBRULE(t,r){return this.subruleInternal(t,0,r)}SUBRULE1(t,r){return this.subruleInternal(t,1,r)}SUBRULE2(t,r){return this.subruleInternal(t,2,r)}SUBRULE3(t,r){return this.subruleInternal(t,3,r)}SUBRULE4(t,r){return this.subruleInternal(t,4,r)}SUBRULE5(t,r){return this.subruleInternal(t,5,r)}SUBRULE6(t,r){return this.subruleInternal(t,6,r)}SUBRULE7(t,r){return this.subruleInternal(t,7,r)}SUBRULE8(t,r){return this.subruleInternal(t,8,r)}SUBRULE9(t,r){return this.subruleInternal(t,9,r)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,r,n=pr){if(B(this.definedRulesNames,t)){let s={message:kt.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:nt.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(s)}this.definedRulesNames.push(t);let i=this.defineRule(t,r,n);return this[t]=i,i}OVERRIDE_RULE(t,r,n=pr){let i=Ju(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let o=this.defineRule(t,r,n);return this[t]=o,o}BACKTRACK(t,r){return function(){this.isBackTrackingStack.push(1);let n=this.saveRecogState();try{return t.apply(this,r),!0}catch(i){if(Te(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return kn(_(this.gastProductionsCache))}};var li=class{initRecognizerEngine(t,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=lr,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},A(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(O(t)){if(b(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(O(t))this.tokensMap=tt(t,(o,s)=>(o[s.name]=s,o),{});else if(A(t,"modes")&&ut(et(_(t.modes)),_u)){let o=et(_(t.modes)),s=er(o);this.tokensMap=tt(s,(a,l)=>(a[l.name]=l,a),{})}else if($(t))this.tokensMap=M(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Pt;let n=A(t,"modes")?et(_(t.modes)):_(t),i=ut(n,o=>b(o.categoryMatches));this.tokenMatcher=i?lr:Jt,te(_(this.tokensMap))}defineRule(t,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=A(n,"resyncEnabled")?n.resyncEnabled:pr.resyncEnabled,o=A(n,"recoveryValueFunc")?n.recoveryValueFunc:pr.recoveryValueFunc,s=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=t,this.fullRuleNameToShort[t]=s;let a;return this.outputCst===!0?a=function(...c){try{this.ruleInvocationStateUpdate(s,t,this.subruleIdx),r.apply(this,c);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}}:a=function(...c){try{return this.ruleInvocationStateUpdate(s,t,this.subruleIdx),r.apply(this,c)}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:t,originalGrammarAction:r})}invokeRuleCatch(t,r,n){let i=this.RULE_STACK.length===1,o=r&&!this.isBackTracking()&&this.recoveryEnabled;if(Te(t)){let s=t;if(o){let a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(s.resyncedTokens=this.reSyncTo(a),this.outputCst){let l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return n(t);else{if(this.outputCst){let l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,s.partialCstResult=l}throw s}}else{if(i)return this.moveToTerminatedState(),n(t);throw s}}else throw t}optionInternal(t,r){let n=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(t,r,n)}optionInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof t!="function"){o=t.DEF;let s=t.GATE;if(s!==void 0){let a=i;i=()=>s.call(this)&&a.call(this)}}else o=t;if(i.call(this)===!0)return o.call(this)}atLeastOneInternal(t,r){let n=this.getKeyForAutomaticLookahead(1024,t);return this.atLeastOneInternalLogic(t,r,n)}atLeastOneInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof r!="function"){o=r.DEF;let s=r.GATE;if(s!==void 0){let a=i;i=()=>s.call(this)&&a.call(this)}}else o=r;if(i.call(this)===!0){let s=this.doSingleRepetition(o);for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o)}else throw this.raiseEarlyExitException(t,W.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,r],i,1024,t,Vn)}atLeastOneSepFirstInternal(t,r){let n=this.getKeyForAutomaticLookahead(1536,t);this.atLeastOneSepFirstInternalLogic(t,r,n)}atLeastOneSepFirstInternalLogic(t,r,n){let i=r.DEF,o=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let a=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,a,i,Dr],a,1536,t,Dr)}else throw this.raiseEarlyExitException(t,W.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(t,r){let n=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,r,n)}manyInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof r!="function"){o=r.DEF;let a=r.GATE;if(a!==void 0){let l=i;i=()=>a.call(this)&&l.call(this)}}else o=r;let s=!0;for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[t,r],i,768,t,jn,s)}manySepFirstInternal(t,r){let n=this.getKeyForAutomaticLookahead(1280,t);this.manySepFirstInternalLogic(t,r,n)}manySepFirstInternalLogic(t,r,n){let i=r.DEF,o=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let a=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,a,i,Ur],a,1280,t,Ur)}}repetitionSepSecondInternal(t,r,n,i,o){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,r,n,i,o],n,1536,t,o)}doSingleRepetition(t){let r=this.getLexerPosition();return t.call(this),this.getLexerPosition()>r}orInternal(t,r){let n=this.getKeyForAutomaticLookahead(256,r),i=O(t)?t:t.DEF,s=this.getLaFuncFromCache(n).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(r,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let t=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Wr(r,t))}}subruleInternal(t,r,n){let i;try{let o=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=t.apply(this,o),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:t.ruleName),i}catch(o){throw this.subruleInternalError(o,n,t.ruleName)}}subruleInternalError(t,r,n){throw Te(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete t.partialCstResult),t}consumeInternal(t,r,n){let i;try{let o=this.LA(1);this.tokenMatcher(o,t)===!0?(this.consumeToken(),i=o):this.consumeInternalError(t,o,n)}catch(o){i=this.consumeInternalRecovery(t,r,o)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:t.name,i),i}consumeInternalError(t,r,n){let i,o=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:r,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Le(i,r,o))}consumeInternalRecovery(t,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(t,r);try{return this.tryInRuleRecovery(t,i)}catch(o){throw o.name===ao?n:o}}else throw n}saveRecogState(){let t=this.errors,r=M(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Pt)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var ui=class{initErrorHandler(t){this._errors=[],this.errorMessageProvider=A(t,"errorMessageProvider")?t.errorMessageProvider:Et.errorMessageProvider}SAVE_ERROR(t){if(Te(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:M(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return M(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,r,n){let i=this.getCurrRuleFullName(),o=this.getGAstProductions()[i],a=Gr(t,o,r,this.maxLookahead)[0],l=[];for(let c=1;c<=this.maxLookahead;c++)l.push(this.LA(c));let u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:l,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new jr(u,this.LA(1),this.LA(0)))}raiseNoAltException(t,r){let n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],o=Br(t,i,this.maxLookahead),s=[];for(let u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));let a=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:s,previous:a,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Kr(l,this.LA(1),a))}};var ci=class{initContentAssist(){}computeContentAssist(t,r){let n=this.gastProductionsCache[t];if(ft(n))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return Hn([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){let r=ot(t.ruleStack),i=this.getGAstProductions()[r];return new Wn(i,t).startWalking()}};var hi={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(hi);var mc=!0,dc=Math.pow(2,8)-1,Ec=m({name:"RECORDING_PHASE_TOKEN",pattern:z.NA});te([Ec]);var xc=ve(Ec,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(xc);var AA={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},fi=class{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let t=0;t<10;t++){let r=t>0?t:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,t,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,t,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,t)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,t)},this[`MANY${r}`]=function(n){this.manyInternalRecord(t,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(t,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(t,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(t,n)}}this.consume=function(t,r,n){return this.consumeInternalRecord(r,t,n)},this.subrule=function(t,r,n){return this.subruleInternalRecord(r,t,n)},this.option=function(t,r){return this.optionInternalRecord(r,t)},this.or=function(t,r){return this.orInternalRecord(r,t)},this.many=function(t,r){this.manyInternalRecord(t,r)},this.atLeastOne=function(t,r){this.atLeastOneInternalRecord(t,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let t=this;for(let r=0;r<10;r++){let n=r>0?r:"";delete t[`CONSUME${n}`],delete t[`SUBRULE${n}`],delete t[`OPTION${n}`],delete t[`OR${n}`],delete t[`MANY${n}`],delete t[`MANY_SEP${n}`],delete t[`AT_LEAST_ONE${n}`],delete t[`AT_LEAST_ONE_SEP${n}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA})}ACTION_RECORD(t){}BACKTRACK_RECORD(t,r){return()=>!0}LA_RECORD(t){return fr}topLevelRuleRecord(t,r){try{let n=new dt({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(t,r){return Hr.call(this,D,t,r)}atLeastOneInternalRecord(t,r){Hr.call(this,Y,r,t)}atLeastOneSepFirstInternalRecord(t,r){Hr.call(this,q,r,t,mc)}manyInternalRecord(t,r){Hr.call(this,L,r,t)}manySepFirstInternalRecord(t,r){Hr.call(this,j,r,t,mc)}orInternalRecord(t,r){return TA.call(this,t,r)}subruleInternalRecord(t,r,n){if(pi(r),!t||A(t,"ruleName")===!1){let a=new Error(`<SUBRULE${gc(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let i=_t(this.recordingProdStack),o=t.ruleName,s=new w({idx:r,nonTerminalName:o,label:n?.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?AA:hi}consumeInternalRecord(t,r,n){if(pi(r),!Xi(t)){let s=new Error(`<CONSUME${gc(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=_t(this.recordingProdStack),o=new v({idx:r,terminalType:t,label:n?.LABEL});return i.definition.push(o),xc}};function Hr(e,t,r,n=!1){pi(r);let i=_t(this.recordingProdStack),o=ht(t)?t:t.DEF,s=new e({definition:[],idx:r});return n&&(s.separator=t.SEP),A(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),hi}function TA(e,t){pi(t);let r=_t(this.recordingProdStack),n=O(e)===!1,i=n===!1?e:e.DEF,o=new V({definition:[],idx:t,ignoreAmbiguities:n&&e.IGNORE_AMBIGUITIES===!0});A(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD);let s=Cr(i,a=>ht(a.GATE));return o.hasPredicates=s,r.definition.push(o),x(i,a=>{let l=new F({definition:[]});o.definition.push(l),A(a,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=a.IGNORE_AMBIGUITIES:A(a,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),a.ALT.call(this),this.recordingProdStack.pop()}),hi}function gc(e){return e===0?"":`${e}`}function pi(e){if(e<0||e>dc){let t=new Error(`Invalid DSL Method idx value: <${e}>
	Idx value must be a none negative value smaller than ${dc+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}var mi=class{initPerformanceTracer(t){if(A(t,"traceInitPerf")){let r=t.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=Et.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${t}>`);let{time:i,value:o}=vr(r),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${n}<-- <${t}> time: ${i}ms`),this.traceInitIndent--,o}else return r()}};function Ac(e,t){t.forEach(r=>{let n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;let o=Object.getOwnPropertyDescriptor(n,i);o&&(o.get||o.set)?Object.defineProperty(e.prototype,i,o):e.prototype[i]=r.prototype[i]})})}var fr=ve(Pt,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(fr);var Et=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Kn,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),pr=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),nt;(function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(nt||(nt={}));var Xr=class e{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{Lr(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),x(this.definedRulesNames,i=>{let s=this[i].originalGrammarAction,a;this.TRACE_INIT(`${i} Rule`,()=>{a=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=a})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=nc({rules:_(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(b(n)&&this.skipValidations===!1){let i=ic({rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),errMsgProvider:kt,grammarName:r}),o=qu({lookaheadStrategy:this.lookaheadStrategy,rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,o)}}),b(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let i=fu(_(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,o;(o=(i=this.lookaheadStrategy).initialize)===null||o===void 0||o.call(i,{rules:_(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(_(this.gastProductionsCache))})),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!b(this.definitionErrors))throw t=d(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${t.join(`
-------------------------------
`)}`)})}constructor(t,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(t,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),A(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=A(r,"skipValidations")?r.skipValidations:Et.skipValidations}};Xr.DEFER_DEFINITION_ERRORS_HANDLING=!1;Ac(Xr,[Qn,ei,oi,si,li,ai,ui,ci,fi,mi]);var Yr=class extends Xr{constructor(t,r=Et){let n=M(r);n.outputCst=!0,super(t,n)}};var SA=m({name:"WhiteSpace",pattern:/\s+/,group:z.SKIPPED}),RA=m({name:"BlockComment",pattern:/\/\*[\s\S]*?\*\//,group:z.SKIPPED}),Eo=m({name:"DoubleLBrace",pattern:/\{\{/}),xo=m({name:"DoubleRBrace",pattern:/\}\}/}),Ao=m({name:"ChildOrSelfOf",pattern:/<<!/}),To=m({name:"DescendantOrSelfOf",pattern:/<</}),Oo=m({name:"ChildOf",pattern:/<!/}),So=m({name:"ParentOrSelfOf",pattern:/>>!/}),Ro=m({name:"AncestorOrSelfOf",pattern:/>>/}),yo=m({name:"ParentOf",pattern:/>!/}),Io=m({name:"MemberOf",pattern:/\^/}),No=m({name:"NotEquals",pattern:/!=/}),Co=m({name:"LessThanOrEquals",pattern:/<=/}),bo=m({name:"GreaterThanOrEquals",pattern:/>=/}),Vt=m({name:"Equals",pattern:/=/}),di=m({name:"DescendantOf",pattern:/</}),gi=m({name:"AncestorOf",pattern:/>/}),qr=m({name:"Wildcard",pattern:/\*/}),hr=m({name:"And",pattern:/AND/i}),mr=m({name:"Or",pattern:/OR/i}),vo=m({name:"Minus",pattern:/MINUS/i}),Lo=m({name:"DescendantOfKeyword",pattern:/descendantOf/}),_o=m({name:"DescendantOrSelfOfKeyword",pattern:/descendantOrSelfOf/}),Po=m({name:"ChildOfKeyword",pattern:/childOf/}),ko=m({name:"ChildOrSelfOfKeyword",pattern:/childOrSelfOf/}),Mo=m({name:"AncestorOfKeyword",pattern:/ancestorOf/}),wo=m({name:"AncestorOrSelfOfKeyword",pattern:/ancestorOrSelfOf/}),Fo=m({name:"ParentOfKeyword",pattern:/parentOf/}),Uo=m({name:"ParentOrSelfOfKeyword",pattern:/parentOrSelfOf/}),Do=m({name:"MemberOfKeyword",pattern:/memberOf/}),Bo=m({name:"ReverseOf",pattern:/reverseOf/i}),Go=m({name:"TermKeyword",pattern:/term/}),$o=m({name:"Language",pattern:/language/}),Ko=m({name:"TypeKeyword",pattern:/typeId|type/}),Wo=m({name:"Dialect",pattern:/dialectId|dialect/}),jo=m({name:"ModuleId",pattern:/moduleId/}),yA=m({name:"EffectiveTime",pattern:/effectiveTime/}),Vo=m({name:"Active",pattern:/active/}),zo=m({name:"DefinitionStatusId",pattern:/definitionStatusId/}),Ei=m({name:"Preferred",pattern:/PREFERRED/}),xi=m({name:"Acceptable",pattern:/ACCEPTABLE/}),Ho=m({name:"Primitive",pattern:/PRIMITIVE/}),Xo=m({name:"Defined",pattern:/DEFINED/}),Yo=m({name:"Match",pattern:/match/}),qo=m({name:"Wild",pattern:/wild/}),Ai=m({name:"True",pattern:/true/}),Ti=m({name:"False",pattern:/false/}),dr=m({name:"LParen",pattern:/\(/}),gr=m({name:"RParen",pattern:/\)/}),Zo=m({name:"LBrace",pattern:/\{/}),Qo=m({name:"RBrace",pattern:/\}/}),Jo=m({name:"LBracket",pattern:/\[/}),ts=m({name:"RBracket",pattern:/\]/}),Oi=m({name:"Colon",pattern:/:/}),Zr=m({name:"Comma",pattern:/,/}),Si=m({name:"Hash",pattern:/#/}),es=m({name:"DotDot",pattern:/\.\./}),rs=m({name:"Dot",pattern:/\./}),IA=m({name:"Pipe",pattern:/\|/}),Ri=m({name:"SctId",pattern:/\d{6,18}/}),Qr=m({name:"Integer",pattern:/\d+/}),Er=m({name:"StringLiteral",pattern:/"([^"\\]|\\.)*"/}),ns=m({name:"TermString",pattern:/\|[^|]*\|/}),yi=m({name:"DialectAlias",pattern:/[a-z]{2}-[A-Z]{2}/}),is=m({name:"AlternateIdCode",pattern:/\d+(?:-[a-zA-Z0-9]+)+/}),os=m({name:"DecimalValue",pattern:/[+-]?\d+\.\d+/}),ss=m({name:"SignedInteger",pattern:/[+-]\d+/}),Jr=m({name:"Identifier",pattern:/[a-zA-Z][a-zA-Z0-9_]*/}),as=[SA,RA,Eo,xo,Ao,To,Oo,So,Ro,yo,No,Co,bo,Vt,di,gi,Io,qr,hr,mr,vo,_o,Lo,ko,Po,wo,Mo,Uo,Fo,Do,Bo,zo,yA,jo,Ko,$o,Wo,Go,Vo,Yo,qo,Ei,xi,Ho,Xo,Ai,Ti,dr,gr,Zo,Qo,Jo,ts,Oi,Zr,Si,es,rs,ns,IA,is,os,ss,Ri,Qr,Er,yi,Jr],NA=new z(as);function Tc(e){return NA.tokenize(e)}var ls=class extends Yr{constructor(){super(as,{recoveryEnabled:!0});this.expressionConstraint=this.RULE("expressionConstraint",()=>{this.SUBRULE(this.simpleOrRefinedExpression),this.MANY(()=>{this.SUBRULE(this.booleanOperator),this.SUBRULE2(this.simpleOrRefinedExpression)})});this.simpleOrRefinedExpression=this.RULE("simpleOrRefinedExpression",()=>{this.SUBRULE(this.subExpressionConstraint),this.OPTION(()=>{this.CONSUME(Oi),this.SUBRULE(this.eclRefinement)})});this.booleanOperator=this.RULE("booleanOperator",()=>{this.OR([{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(mr)},{ALT:()=>this.CONSUME(vo)}])});this.subExpressionConstraint=this.RULE("subExpressionConstraint",()=>{this.OPTION(()=>{this.SUBRULE(this.constraintOperator)}),this.SUBRULE(this.eclFocusConcept),this.MANY(()=>{this.SUBRULE(this.filterConstraint)}),this.MANY2(()=>{this.CONSUME(rs),this.SUBRULE(this.eclAttributeName)})});this.constraintOperator=this.RULE("constraintOperator",()=>{this.OR([{ALT:()=>this.CONSUME(Ao)},{ALT:()=>this.CONSUME(To)},{ALT:()=>this.CONSUME(Oo)},{ALT:()=>this.CONSUME(di)},{ALT:()=>this.CONSUME(So)},{ALT:()=>this.CONSUME(Ro)},{ALT:()=>this.CONSUME(yo)},{ALT:()=>this.CONSUME(gi)},{ALT:()=>this.CONSUME(Io)},{ALT:()=>this.CONSUME(_o)},{ALT:()=>this.CONSUME(Lo)},{ALT:()=>this.CONSUME(ko)},{ALT:()=>this.CONSUME(Po)},{ALT:()=>this.CONSUME(wo)},{ALT:()=>this.CONSUME(Mo)},{ALT:()=>this.CONSUME(Uo)},{ALT:()=>this.CONSUME(Fo)},{ALT:()=>this.CONSUME(Do)}])});this.eclFocusConcept=this.RULE("eclFocusConcept",()=>{this.OR([{ALT:()=>this.SUBRULE(this.eclConceptReference)},{ALT:()=>this.CONSUME(qr)},{ALT:()=>{this.CONSUME(dr),this.SUBRULE(this.expressionConstraint),this.CONSUME(gr)}},{ALT:()=>this.SUBRULE(this.alternateIdentifier)}])});this.eclConceptReference=this.RULE("eclConceptReference",()=>{this.CONSUME(Ri),this.OPTION(()=>{this.CONSUME(ns)})});this.alternateIdentifier=this.RULE("alternateIdentifier",()=>{this.CONSUME(Jr),this.CONSUME(Si),this.OR([{ALT:()=>this.CONSUME(Er)},{ALT:()=>this.CONSUME(is)},{ALT:()=>this.CONSUME(Ri)},{ALT:()=>this.CONSUME2(Jr)}])});this.eclRefinement=this.RULE("eclRefinement",()=>{this.SUBRULE(this.eclRefinementItem),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(mr)},{ALT:()=>this.CONSUME(Zr)}]),this.SUBRULE2(this.eclRefinementItem)})});this.eclRefinementItem=this.RULE("eclRefinementItem",()=>{this.OPTION(()=>{this.SUBRULE(this.cardinality)}),this.OR([{ALT:()=>this.SUBRULE(this.eclAttributeGroup)},{ALT:()=>this.SUBRULE(this.subAttributeSet)}])});this.eclAttributeGroup=this.RULE("eclAttributeGroup",()=>{this.CONSUME(Zo),this.SUBRULE(this.eclAttributeSet),this.CONSUME(Qo)});this.eclAttributeSet=this.RULE("eclAttributeSet",()=>{this.SUBRULE(this.subAttributeSet),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(mr)},{ALT:()=>this.CONSUME(Zr)}]),this.SUBRULE2(this.subAttributeSet)})});this.subAttributeSet=this.RULE("subAttributeSet",()=>{this.OR([{GATE:this.BACKTRACK(this.parenthesizedAttributeSet),ALT:()=>this.SUBRULE(this.parenthesizedAttributeSet)},{ALT:()=>this.SUBRULE(this.eclAttribute)}])});this.parenthesizedAttributeSet=this.RULE("parenthesizedAttributeSet",()=>{this.CONSUME(dr),this.SUBRULE(this.eclAttributeSet),this.CONSUME(gr)});this.eclAttribute=this.RULE("eclAttribute",()=>{this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(Jr,{LABEL:"ReverseR"})},{ALT:()=>this.CONSUME(Bo)}])}),this.SUBRULE(this.eclAttributeName),this.SUBRULE(this.comparator),this.OR2([{ALT:()=>{this.CONSUME(Si),this.SUBRULE(this.numericValue)}},{ALT:()=>{this.SUBRULE(this.eclAttributeValue)}}])});this.eclAttributeName=this.RULE("eclAttributeName",()=>{this.OPTION(()=>{this.SUBRULE(this.constraintOperator)}),this.SUBRULE(this.eclFocusConcept),this.MANY(()=>{this.SUBRULE(this.filterConstraint)})});this.comparator=this.RULE("comparator",()=>{this.OR([{ALT:()=>this.CONSUME(Vt)},{ALT:()=>this.CONSUME(No)},{ALT:()=>this.CONSUME(Co)},{ALT:()=>this.CONSUME(bo)},{ALT:()=>this.CONSUME(di)},{ALT:()=>this.CONSUME(gi)}])});this.eclAttributeValue=this.RULE("eclAttributeValue",()=>{this.OR([{ALT:()=>this.CONSUME(Er)},{ALT:()=>this.CONSUME(Ai)},{ALT:()=>this.CONSUME(Ti)},{ALT:()=>this.SUBRULE(this.subExpressionConstraint)}])});this.numericValue=this.RULE("numericValue",()=>{this.OR([{ALT:()=>this.CONSUME(os)},{ALT:()=>this.CONSUME(ss)},{ALT:()=>this.CONSUME(Qr)}])});this.cardinality=this.RULE("cardinality",()=>{this.CONSUME(Jo),this.OR([{ALT:()=>this.CONSUME(Qr)},{ALT:()=>this.CONSUME(qr)}]),this.CONSUME(es),this.OR2([{ALT:()=>this.CONSUME2(Qr)},{ALT:()=>this.CONSUME2(qr)}]),this.CONSUME(ts)});this.filterConstraint=this.RULE("filterConstraint",()=>{this.CONSUME(Eo),this.SUBRULE(this.filterExpressionConstraint),this.CONSUME(xo)});this.filterExpressionConstraint=this.RULE("filterExpressionConstraint",()=>{this.SUBRULE(this.filter),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(mr)},{ALT:()=>this.CONSUME(Zr)}]),this.SUBRULE2(this.filter)})});this.filter=this.RULE("filter",()=>{this.OR([{ALT:()=>this.SUBRULE(this.termFilter)},{ALT:()=>this.SUBRULE(this.languageFilter)},{ALT:()=>this.SUBRULE(this.typeFilter)},{ALT:()=>this.SUBRULE(this.dialectFilter)},{ALT:()=>this.SUBRULE(this.moduleFilter)},{ALT:()=>this.SUBRULE(this.activeFilter)},{ALT:()=>this.SUBRULE(this.definitionStatusFilter)}])});this.termFilter=this.RULE("termFilter",()=>{this.CONSUME(Go),this.CONSUME(Vt),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(Yo)},{ALT:()=>this.CONSUME(qo)}]),this.CONSUME(Oi)}),this.OR2([{ALT:()=>{this.CONSUME(dr),this.AT_LEAST_ONE(()=>{this.CONSUME(Er)}),this.CONSUME(gr)}},{ALT:()=>this.CONSUME2(Er)}])});this.languageFilter=this.RULE("languageFilter",()=>{this.CONSUME($o),this.CONSUME(Vt),this.CONSUME(yi)});this.typeFilter=this.RULE("typeFilter",()=>{this.CONSUME(Ko),this.CONSUME(Vt),this.OR([{ALT:()=>this.CONSUME(Ei)},{ALT:()=>this.CONSUME(xi)},{ALT:()=>this.SUBRULE(this.eclConceptReference)}])});this.dialectFilter=this.RULE("dialectFilter",()=>{this.CONSUME(Wo),this.CONSUME(Vt),this.OR([{ALT:()=>this.CONSUME(yi)},{ALT:()=>this.SUBRULE(this.eclConceptReference)}]),this.OPTION(()=>{this.CONSUME(dr),this.OR2([{ALT:()=>this.CONSUME(Ei)},{ALT:()=>this.CONSUME(xi)}]),this.CONSUME(gr)})});this.moduleFilter=this.RULE("moduleFilter",()=>{this.CONSUME(jo),this.CONSUME(Vt),this.SUBRULE(this.eclConceptReference)});this.activeFilter=this.RULE("activeFilter",()=>{this.CONSUME(Vo),this.CONSUME(Vt),this.OR([{ALT:()=>this.CONSUME(Ai)},{ALT:()=>this.CONSUME(Ti)}])});this.definitionStatusFilter=this.RULE("definitionStatusFilter",()=>{this.CONSUME(zo),this.CONSUME(Vt),this.OR([{ALT:()=>this.CONSUME(Ho)},{ALT:()=>this.CONSUME(Xo)},{ALT:()=>this.SUBRULE(this.eclConceptReference)}])});this.performSelfAnalysis()}},tn=new ls;function Oc(e){return tn.input=e,{cst:tn.expressionConstraint(),errors:tn.errors}}var CA=tn.getBaseCstVisitorConstructor(),us=class extends CA{constructor(){super(),this.validateVisitor()}expressionConstraint(t){let r=this.visit(t.simpleOrRefinedExpression[0]);if(t.booleanOperator&&t.booleanOperator.length>0){let n=r;for(let i=0;i<t.booleanOperator.length;i++){let o=this.visit(t.booleanOperator[i]),s=this.visit(t.simpleOrRefinedExpression[i+1]);n={type:"CompoundExpression",operator:o,left:n,right:s}}return n}return r}simpleOrRefinedExpression(t){let r=this.visit(t.subExpressionConstraint[0]);return t.Colon&&t.eclRefinement?{type:"RefinedExpression",expression:r,refinement:this.visit(t.eclRefinement[0])}:r}booleanOperator(t){if(t.And)return"AND";if(t.Or)return"OR";if(t.Minus)return"MINUS";throw new Error("Unknown boolean operator")}subExpressionConstraint(t){let r=this.visit(t.eclFocusConcept[0]);if(t.Dot&&t.Dot.length>0){let i={type:"SubExpression",focusConcept:r};t.constraintOperator&&(i.constraintOperator=this.visit(t.constraintOperator[0])),t.filterConstraint&&t.filterConstraint.length>0&&(i.filters=t.filterConstraint.map(a=>this.visit(a)));let o=t.eclAttributeName.map(a=>this.visit(a));return{type:"SubExpression",focusConcept:{type:"DottedAttributePath",base:i,attributes:o}}}let n={type:"SubExpression",focusConcept:r};return t.constraintOperator&&(n.constraintOperator=this.visit(t.constraintOperator[0])),t.filterConstraint&&t.filterConstraint.length>0&&(n.filters=t.filterConstraint.map(i=>this.visit(i))),n}constraintOperator(t){let r;if(t.ChildOrSelfOf)r="<<!";else if(t.DescendantOrSelfOf)r="<<";else if(t.ChildOf)r="<!";else if(t.DescendantOf)r="<";else if(t.ParentOrSelfOf)r=">>!";else if(t.AncestorOrSelfOf)r=">>";else if(t.ParentOf)r=">!";else if(t.AncestorOf)r=">";else if(t.MemberOf)r="^";else if(t.DescendantOrSelfOfKeyword)r="descendantOrSelfOf";else if(t.DescendantOfKeyword)r="descendantOf";else if(t.ChildOrSelfOfKeyword)r="childOrSelfOf";else if(t.ChildOfKeyword)r="childOf";else if(t.AncestorOrSelfOfKeyword)r="ancestorOrSelfOf";else if(t.AncestorOfKeyword)r="ancestorOf";else if(t.ParentOrSelfOfKeyword)r="parentOrSelfOf";else if(t.ParentOfKeyword)r="parentOf";else if(t.MemberOfKeyword)r="memberOf";else throw new Error("Unknown constraint operator");return{type:"ConstraintOperator",operator:r}}eclFocusConcept(t){if(t.eclConceptReference)return this.visit(t.eclConceptReference[0]);if(t.Wildcard)return{type:"WildcardConcept"};if(t.expressionConstraint)return{type:"NestedExpression",expression:this.visit(t.expressionConstraint[0])};if(t.alternateIdentifier)return this.visit(t.alternateIdentifier[0]);throw new Error("Unknown focus concept type")}eclConceptReference(t){let r=t.SctId[0].image,n;return t.TermString&&(n=t.TermString[0].image.slice(1,-1).trim()),{type:"ConceptReference",sctId:r,term:n}}alternateIdentifier(t){let r=t.Identifier[0].image,n;if(t.StringLiteral)n=t.StringLiteral[0].image.slice(1,-1);else if(t.AlternateIdCode)n=t.AlternateIdCode[0].image;else if(t.SctId)n=t.SctId[0].image;else if(t.Identifier&&t.Identifier.length>1)n=t.Identifier[1].image;else throw new Error("Unknown alternate identifier code type");return{type:"AlternateIdentifier",scheme:r,code:n}}eclRefinement(t){let r=[],n=[];if(r.push(this.visit(t.eclRefinementItem[0])),t.eclRefinementItem.length>1)for(let i=1;i<t.eclRefinementItem.length;i++)t.And&&t.And[i-1]?n.push("AND"):t.Or&&t.Or[i-1]?n.push("OR"):t.Comma&&t.Comma[i-1]&&n.push(","),r.push(this.visit(t.eclRefinementItem[i]));return{type:"Refinement",items:r,conjunctions:n}}eclRefinementItem(t){let r;if(t.cardinality&&(r=this.visit(t.cardinality[0])),t.eclAttributeGroup){let n=this.visit(t.eclAttributeGroup[0]);return r&&(n.cardinality=r),n}if(t.subAttributeSet){let n=this.visit(t.subAttributeSet[0]);return r&&n.type==="Attribute"&&(n.cardinality=r),n}throw new Error("Unknown refinement item type")}eclAttributeGroup(t){let r=this.visit(t.eclAttributeSet[0]);return{type:"AttributeGroup",items:r.items,conjunctions:r.conjunctions}}eclAttributeSet(t){let r=[],n=[];if(r.push(this.visit(t.subAttributeSet[0])),t.subAttributeSet.length>1)for(let i=1;i<t.subAttributeSet.length;i++)t.And&&t.And[i-1]?n.push("AND"):t.Or&&t.Or[i-1]?n.push("OR"):t.Comma&&t.Comma[i-1]&&n.push(","),r.push(this.visit(t.subAttributeSet[i]));return{items:r,conjunctions:n}}subAttributeSet(t){if(t.eclAttribute)return this.visit(t.eclAttribute[0]);if(t.parenthesizedAttributeSet)return this.visit(t.parenthesizedAttributeSet[0]);throw new Error("Unknown subAttributeSet type")}parenthesizedAttributeSet(t){let r=this.visit(t.eclAttributeSet[0]);return{type:"NestedAttributeSet",items:r.items,conjunctions:r.conjunctions}}eclAttribute(t){let r=!1;if(t.ReverseOf)r=!0;else if(t.ReverseR){let i=t.ReverseR[0].image;if(i.toUpperCase()==="R")r=!0;else throw new Error(`Invalid reverse flag identifier: ${i}. Expected 'R'.`)}let n;if(t.Hash&&t.numericValue)n=this.visit(t.numericValue[0]);else if(t.eclAttributeValue)n=this.visit(t.eclAttributeValue[0]);else throw new Error("Attribute must have a value");return{type:"Attribute",reverseFlag:r||void 0,name:this.visit(t.eclAttributeName[0]),comparator:this.visit(t.comparator[0]),value:n}}eclAttributeName(t){let r={type:"SubExpression",focusConcept:this.visit(t.eclFocusConcept[0])};return t.constraintOperator&&(r.constraintOperator=this.visit(t.constraintOperator[0])),t.filterConstraint&&t.filterConstraint.length>0&&(r.filters=t.filterConstraint.map(n=>this.visit(n))),r}comparator(t){if(t.Equals)return"=";if(t.NotEquals)return"!=";if(t.LessThanOrEquals)return"<=";if(t.GreaterThanOrEquals)return">=";if(t.DescendantOf)return"<";if(t.AncestorOf)return">";throw new Error("Unknown comparator")}eclAttributeValue(t){if(t.expressionConstraint)return{type:"NestedExpression",expression:this.visit(t.expressionConstraint[0])};if(t.subExpressionConstraint)return this.visit(t.subExpressionConstraint[0]);if(t.StringLiteral)return{type:"StringValue",value:t.StringLiteral[0].image.slice(1,-1)};if(t.Integer)return{type:"NumberValue",value:parseInt(t.Integer[0].image,10)};if(t.True)return{type:"BooleanValue",value:!0};if(t.False)return{type:"BooleanValue",value:!1};throw new Error("Unknown attribute value type")}numericValue(t){if(t.DecimalValue)return{type:"NumberValue",value:parseFloat(t.DecimalValue[0].image)};if(t.SignedInteger)return{type:"NumberValue",value:parseInt(t.SignedInteger[0].image,10)};if(t.Integer)return{type:"NumberValue",value:parseInt(t.Integer[0].image,10)};throw new Error("Unknown numeric value type")}cardinality(t){let r=[];if(t.Integer)for(let a of t.Integer)r.push({token:a,isWildcard:!1});if(t.Wildcard)for(let a of t.Wildcard)r.push({token:a,isWildcard:!0});r.sort((a,l)=>a.token.startOffset-l.token.startOffset);let n=r[0],i=r[1],o=n.isWildcard?"*":parseInt(n.token.image,10),s=i.isWildcard?"*":parseInt(i.token.image,10);return{type:"Cardinality",min:o,max:s}}filterConstraint(t){return this.visit(t.filterExpressionConstraint[0])}filterExpressionConstraint(t){let r=[],n=[];if(r.push(this.visit(t.filter[0])),t.filter.length>1)for(let i=1;i<t.filter.length;i++)t.And&&t.And[i-1]?n.push("AND"):t.Or&&t.Or[i-1]&&n.push("OR"),r.push(this.visit(t.filter[i]));return{type:"Filter",constraints:r,conjunctions:n}}filter(t){if(t.termFilter)return this.visit(t.termFilter[0]);if(t.languageFilter)return this.visit(t.languageFilter[0]);if(t.typeFilter)return this.visit(t.typeFilter[0]);if(t.dialectFilter)return this.visit(t.dialectFilter[0]);if(t.moduleFilter)return this.visit(t.moduleFilter[0]);if(t.activeFilter)return this.visit(t.activeFilter[0]);if(t.definitionStatusFilter)return this.visit(t.definitionStatusFilter[0]);throw new Error("Unknown filter type")}termFilter(t){let r;t.Match&&(r="match"),t.Wild&&(r="wild");let n=t.StringLiteral.map(i=>i.image.slice(1,-1));return{type:"TermFilter",operator:r,values:n}}languageFilter(t){return{type:"LanguageFilter",value:t.DialectAlias[0].image}}typeFilter(t){let r;if(t.Preferred)r="PREFERRED";else if(t.Acceptable)r="ACCEPTABLE";else if(t.eclConceptReference)r=this.visit(t.eclConceptReference[0]);else throw new Error("Unknown type filter value");return{type:"TypeFilter",value:r}}dialectFilter(t){let r;if(t.DialectAlias)r=t.DialectAlias[0].image;else if(t.eclConceptReference)r=this.visit(t.eclConceptReference[0]);else throw new Error("Unknown dialect filter value");let n;return t.Preferred?n="PREFERRED":t.Acceptable&&(n="ACCEPTABLE"),{type:"DialectFilter",value:r,acceptability:n}}moduleFilter(t){return{type:"ModuleFilter",value:this.visit(t.eclConceptReference[0])}}activeFilter(t){return{type:"ActiveFilter",value:!!t.True}}definitionStatusFilter(t){let r;if(t.Primitive)r="PRIMITIVE";else if(t.Defined)r="DEFINED";else if(t.eclConceptReference)r=this.visit(t.eclConceptReference[0]);else throw new Error("Unknown definition status filter value");return{type:"DefinitionStatusFilter",value:r}}},bA=new us;function Sc(e){return bA.visit(e)}function Rc(e){let t=Tc(e);if(t.errors.length>0)return{ast:null,errors:t.errors};let r=Oc(t.tokens);if(r.errors.length>0)return{ast:null,errors:r.errors};try{return{ast:Sc(r.cst),errors:[]}}catch(n){return{ast:null,errors:[n]}}}var xr={indentSize:2};function vA(e){let t=1,r=e.left;for(;r.type==="CompoundExpression";)t++,r=r.left;return t++,t}function _e(e){switch(e.type){case"CompoundExpression":{let t=e;return vA(t)>2?!0:_e(t.left)||_e(t.right)}case"RefinedExpression":return!0;case"SubExpression":{let t=e;return!!(t.filters&&t.filters.length>0||t.focusConcept.type==="NestedExpression")}case"NestedExpression":return _e(e.expression);case"AttributeGroup":return e.items.length>1;case"NestedAttributeSet":return e.items.length>1;case"Refinement":{let t=e;return!!(t.items.length>1||t.items.some(r=>r.type==="AttributeGroup"))}default:return!1}}function cs(e){if(e.items.length>1||e.items.some(t=>t.type==="AttributeGroup"))return!0;for(let t of e.items)if(t.type==="AttributeGroup"&&t.items.length>1)return!0;return!1}function yc(e){return e.items.length>1}function Ic(e){return _e(e.left)||_e(e.right)}function at(e,t=xr,r=0,n=r){switch(e.type){case"CompoundExpression":return LA(e,t,r,n);case"RefinedExpression":return _A(e,t,r,n);case"SubExpression":return PA(e,t,r,n);case"ConceptReference":return en(e);case"WildcardConcept":return"*";case"AlternateIdentifier":return kA(e);case"NestedExpression":return MA(e,t,r,n);case"ConstraintOperator":return Nc(e);case"Refinement":return fs(e,t,r,n);case"AttributeGroup":return wA(e,t,r,n);case"Attribute":return bc(e,t,r,n);case"NestedAttributeSet":return Cc(e,t,r,n);case"DottedAttributePath":return FA(e,t,r,n);case"Cardinality":return ps(e);case"Filter":return vc(e,t,r,n);case"StringValue":return`"${e.value}"`;case"NumberValue":return String(e.value);case"BooleanValue":return e.value?"true":"false";default:throw new Error(`Unknown node type: ${e.type}`)}}function LA(e,t,r,n){let i=Ic(e),o=at(e.left,t,r,n);if(i){let s=" ".repeat(r);if(e.right.type==="SubExpression"&&!e.right.constraintOperator&&!e.right.filters&&e.right.focusConcept.type==="NestedExpression"){let u=e.right.focusConcept,c=r+e.operator.length,f=c+t.indentSize,p=at(u.expression,t,f,f),E=" ".repeat(c);return`${o}
${s}${e.operator}(
${" ".repeat(f)}${p}
${E})`}let a=r+e.operator.length+1,l=at(e.right,t,r,a);return`${o}
${s}${e.operator} ${l}`}else{let s=o.length,a=n+s+1+e.operator.length+1,l=at(e.right,t,r,a);return`${o} ${e.operator} ${l}`}}function _A(e,t,r,n){let i=at(e.expression,t,r,n);if(cs(e.refinement)){let s=r+t.indentSize,a=fs(e.refinement,t,s,s);return`${i}:
${a}`}else{let s=i.length,a=n+s+2,l=fs(e.refinement,t,r,a);return`${i}: ${l}`}}function PA(e,t,r,n){let i="",o=n;if(e.constraintOperator){let a=Nc(e.constraintOperator);i+=a+" ",o+=a.length+1}let s=at(e.focusConcept,t,r,o);if(i+=s,o+=s.length,e.filters&&e.filters.length>0)for(let a of e.filters){let l=vc(a,t,r,o+1);i+=" "+l,o+=1+l.length}return i}function en(e){return e.term?`${e.sctId} |${e.term}|`:e.sctId}function kA(e){return/[^a-zA-Z0-9_-]/.test(e.code)?`${e.scheme}#"${e.code}"`:`${e.scheme}#${e.code}`}function MA(e,t,r,n){if(!_e(e.expression)){let c=n+1;return`(${at(e.expression,t,r,c)})`}let o=e.expression.type==="SubExpression"&&!e.expression.constraintOperator&&!e.expression.filters&&e.expression.focusConcept.type==="NestedExpression",s,a;o?(s=n+1,a=s):(s=n+t.indentSize,a=s);let l=at(e.expression,t,s,a),u=" ".repeat(n);return`(
${" ".repeat(a)}${l}
${u})`}function Nc(e){switch(e.operator){case"descendantOf":return"<";case"descendantOrSelfOf":return"<<";case"childOf":return"<!";case"childOrSelfOf":return"<<!";case"ancestorOf":return">";case"ancestorOrSelfOf":return">>";case"parentOf":return">!";case"parentOrSelfOf":return">>!";case"memberOf":return"^";default:return e.operator}}function fs(e,t,r,n){let i=" ".repeat(r);if(cs(e)){let s=[];for(let l=0;l<e.items.length;l++){let u=at(e.items[l],t,r,r);s.push(i+u)}let a=s[0];for(let l=1;l<s.length;l++){let u=e.conjunctions[l-1]||",";a+=`${u===","?",":" "+u}
${s[l]}`}return a}else{let s=n,a=[];for(let u=0;u<e.items.length;u++){let c=at(e.items[u],t,r,s);if(a.push(c),s+=c.length,u<e.items.length-1){let f=e.conjunctions[u]||",",p=f===","?", ":" "+f+" ";s+=p.length}}let l=a[0];for(let u=1;u<a.length;u++){let c=e.conjunctions[u-1]||",";l+=`${c===","?", ":" "+c+" "}${a[u]}`}return l}}function wA(e,t,r,n){let i=yc(e),o="";if(e.cardinality&&(o=ps(e.cardinality)+" "),i){let s=r+t.indentSize,a=" ".repeat(s),l=[];for(let f of e.items)l.push(a+Ii(f,t,s,s));let u=l[0];for(let f=1;f<l.length;f++){let p=e.conjunctions[f-1]||",";u+=`${p===","?",":" "+p}
${l[f]}`}let c=" ".repeat(r);return`${o}{
${u}
${c}}`}else{let s=n+o.length+2,a=[];for(let u=0;u<e.items.length;u++){let c=Ii(e.items[u],t,r,s);if(a.push(c),s+=c.length,u<e.items.length-1){let f=e.conjunctions[u]||",",p=f===","?", ":" "+f+" ";s+=p.length}}let l=a[0];for(let u=1;u<a.length;u++){let c=e.conjunctions[u-1]||",";l+=`${c===","?", ":" "+c+" "}${a[u]}`}return`${o}{ ${l} }`}}function Ii(e,t,r,n){return e.type==="Attribute"?bc(e,t,r,n):Cc(e,t,r,n)}function Cc(e,t,r,n){if(!(e.items.length>1)){let c=n+1;return`(${Ii(e.items[0],t,r,c)})`}let o=n+t.indentSize,s=" ".repeat(o),a=[];for(let c of e.items)a.push(s+Ii(c,t,o,o));let l=a[0];for(let c=1;c<a.length;c++){let f=e.conjunctions[c-1]||",";l+=`${f===","?",":" "+f}
${a[c]}`}let u=" ".repeat(n);return`(
${l}
${u})`}function bc(e,t,r,n){let i="",o=n;if(e.cardinality){let l=ps(e.cardinality);i+=l+" ",o+=l.length+1}e.reverseFlag&&(i+="R ",o+=2);let s=at(e.name,t,r,o);i+=s,o+=s.length,i+=` ${e.comparator} `,o+=1+e.comparator.length+1;let a=e.value.type==="NumberValue"?"#"+at(e.value,t,r,o+1):at(e.value,t,r,o);return i+=a,i}function FA(e,t,r,n){let i=at(e.base,t,r,n),o=n+i.length;for(let s of e.attributes){i+=" . ",o+=3;let a=at(s,t,r,o);i+=a,o+=a.length}return i}function ps(e){let t=e.min==="*"?"*":String(e.min),r=e.max==="*"?"*":String(e.max);return`[${t}..${r}]`}function vc(e,t,r,n){let i=e.constraints.map(s=>UA(s,t,r,n)),o=i[0];for(let s=1;s<i.length;s++){let a=e.conjunctions[s-1]||"AND";o+=` ${a} ${i[s]}`}return`{{ ${o} }}`}function UA(e,t,r,n){switch(e.type){case"TermFilter":{let i=e,o=i.values.map(a=>`"${a}"`),s=i.values.length>1?`(${o.join(" ")})`:o[0];return i.operator?`term = ${i.operator}:${s}`:`term = ${s}`}case"LanguageFilter":return`language = ${e.value}`;case"TypeFilter":{let i=e;return typeof i.value=="string"?`type = ${i.value}`:`type = ${en(i.value)}`}case"DialectFilter":{let i=e,o="dialect = ";return typeof i.value=="string"?o+=i.value:o+=en(i.value),i.acceptability&&(o+=` (${i.acceptability})`),o}case"ModuleFilter":return`moduleId = ${en(e.value)}`;case"EffectiveTimeFilter":{let i=e;return`effectiveTime ${i.comparator} "${i.value}"`}case"ActiveFilter":return`active = ${e.value}`;case"DefinitionStatusFilter":{let i=e;return typeof i.value=="string"?`definitionStatusId = ${i.value}`:`definitionStatusId = ${en(i.value)}`}default:throw new Error(`Unknown filter type: ${e.type}`)}}function Lc(e,t=xr){let r=e.trim();if(!r)return{formatted:null,error:"Empty input"};let n=Rc(r);if(n.errors.length>0||!n.ast)return{formatted:null,error:n.errors[0]?.message||"Parse error"};try{return{formatted:at(n.ast,t,0),error:null}}catch(i){return{formatted:null,error:String(i)}}}return Dc(DA);})();
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
