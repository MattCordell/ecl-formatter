"use strict";var EclFormatter=(()=>{var ki=Object.defineProperty;var Mc=Object.getOwnPropertyDescriptor;var wc=Object.getOwnPropertyNames;var Fc=Object.prototype.hasOwnProperty;var Uc=(t,e)=>{for(var r in e)ki(t,r,{get:e[r],enumerable:!0})},Dc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of wc(e))!Fc.call(t,i)&&i!==r&&ki(t,i,{get:()=>e[i],enumerable:!(n=Mc(e,i))||n.enumerable});return t};var Bc=t=>Dc(ki({},"__esModule",{value:!0}),t);var GT={};Uc(GT,{defaultOptions:()=>Tr,formatEcl:()=>_c});var Gc=typeof global=="object"&&global&&global.Object===Object&&global,on=Gc;var $c=typeof self=="object"&&self&&self.Object===Object&&self,Kc=on||$c||Function("return this")(),Z=Kc;var Wc=Z.Symbol,ie=Wc;var Ts=Object.prototype,jc=Ts.hasOwnProperty,Vc=Ts.toString,Ir=ie?ie.toStringTag:void 0;function zc(t){var e=jc.call(t,Ir),r=t[Ir];try{t[Ir]=void 0;var n=!0}catch{}var i=Vc.call(t);return n&&(e?t[Ir]=r:delete t[Ir]),i}var As=zc;var Hc=Object.prototype,Xc=Hc.toString;function Yc(t){return Xc.call(t)}var Ss=Yc;var qc="[object Null]",Zc="[object Undefined]",Os=ie?ie.toStringTag:void 0;function Qc(t){return t==null?t===void 0?Zc:qc:Os&&Os in Object(t)?As(t):Ss(t)}var pe=Qc;function Jc(t){return t!=null&&typeof t=="object"}var H=Jc;var ef="[object Symbol]";function tf(t){return typeof t=="symbol"||H(t)&&pe(t)==ef}var it=tf;function rf(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var we=rf;var nf=Array.isArray,S=nf;var of=1/0,ys=ie?ie.prototype:void 0,Rs=ys?ys.toString:void 0;function Is(t){if(typeof t=="string")return t;if(S(t))return we(t,Is)+"";if(it(t))return Rs?Rs.call(t):"";var e=t+"";return e=="0"&&1/t==-of?"-0":e}var Ns=Is;var sf=/\s/;function af(t){for(var e=t.length;e--&&sf.test(t.charAt(e)););return e}var Cs=af;var lf=/^\s+/;function uf(t){return t&&t.slice(0,Cs(t)+1).replace(lf,"")}var bs=uf;function cf(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $=cf;var vs=NaN,ff=/^[-+]0x[0-9a-f]+$/i,pf=/^0b[01]+$/i,hf=/^0o[0-7]+$/i,mf=parseInt;function df(t){if(typeof t=="number")return t;if(it(t))return vs;if($(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=bs(t);var r=pf.test(t);return r||hf.test(t)?mf(t.slice(2),r?2:8):ff.test(t)?vs:+t}var Ls=df;var _s=1/0,gf=17976931348623157e292;function Ef(t){if(!t)return t===0?t:0;if(t=Ls(t),t===_s||t===-_s){var e=t<0?-1:1;return e*gf}return t===t?t:0}var Ps=Ef;function xf(t){var e=Ps(t),r=e%1;return e===e?r?e-r:e:0}var Fe=xf;function Tf(t){return t}var Ne=Tf;var Af="[object AsyncFunction]",Sf="[object Function]",Of="[object GeneratorFunction]",yf="[object Proxy]";function Rf(t){if(!$(t))return!1;var e=pe(t);return e==Sf||e==Of||e==Af||e==yf}var he=Rf;var If=Z["__core-js_shared__"],sn=If;var ks=function(){var t=/[^.]+$/.exec(sn&&sn.keys&&sn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Nf(t){return!!ks&&ks in t}var Ms=Nf;var Cf=Function.prototype,bf=Cf.toString;function vf(t){if(t!=null){try{return bf.call(t)}catch{}try{return t+""}catch{}}return""}var Xe=vf;var Lf=/[\\^$.*+?()[\]{}|]/g,_f=/^\[object .+?Constructor\]$/,Pf=Function.prototype,kf=Object.prototype,Mf=Pf.toString,wf=kf.hasOwnProperty,Ff=RegExp("^"+Mf.call(wf).replace(Lf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Uf(t){if(!$(t)||Ms(t))return!1;var e=he(t)?Ff:_f;return e.test(Xe(t))}var ws=Uf;function Df(t,e){return t?.[e]}var Fs=Df;function Bf(t,e){var r=Fs(t,e);return ws(r)?r:void 0}var xe=Bf;var Gf=xe(Z,"WeakMap"),an=Gf;var Us=Object.create,$f=function(){function t(){}return function(e){if(!$(e))return{};if(Us)return Us(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ds=$f;function Kf(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Bs=Kf;function Wf(){}var K=Wf;function jf(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Gs=jf;var Vf=800,zf=16,Hf=Date.now;function Xf(t){var e=0,r=0;return function(){var n=Hf(),i=zf-(n-r);if(r=n,i>0){if(++e>=Vf)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var $s=Xf;function Yf(t){return function(){return t}}var Ks=Yf;var qf=function(){try{var t=xe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ft=qf;var Zf=Ft?function(t,e){return Ft(t,"toString",{configurable:!0,enumerable:!1,value:Ks(e),writable:!0})}:Ne,Ws=Zf;var Qf=$s(Ws),js=Qf;function Jf(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var ln=Jf;function ep(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var un=ep;function tp(t){return t!==t}var Vs=tp;function rp(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var zs=rp;function np(t,e,r){return e===e?zs(t,e,r):un(t,Vs,r)}var Ut=np;function ip(t,e){var r=t==null?0:t.length;return!!r&&Ut(t,e,0)>-1}var cn=ip;var op=9007199254740991,sp=/^(?:0|[1-9]\d*)$/;function ap(t,e){var r=typeof t;return e=e??op,!!e&&(r=="number"||r!="symbol"&&sp.test(t))&&t>-1&&t%1==0&&t<e}var ot=ap;function lp(t,e,r){e=="__proto__"&&Ft?Ft(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Dt=lp;function up(t,e){return t===e||t!==t&&e!==e}var Ue=up;var cp=Object.prototype,fp=cp.hasOwnProperty;function pp(t,e,r){var n=t[e];(!(fp.call(t,e)&&Ue(n,r))||r===void 0&&!(e in t))&&Dt(t,e,r)}var st=pp;function hp(t,e,r,n){var i=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n?n(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),i?Dt(r,a,l):st(r,a,l)}return r}var De=hp;var Hs=Math.max;function mp(t,e,r){return e=Hs(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=Hs(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),Bs(t,this,a)}}var Xs=mp;function dp(t,e){return js(Xs(t,e,Ne),t+"")}var Bt=dp;var gp=9007199254740991;function Ep(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=gp}var Gt=Ep;function xp(t){return t!=null&&Gt(t.length)&&!he(t)}var Q=xp;function Tp(t,e,r){if(!$(r))return!1;var n=typeof e;return(n=="number"?Q(r)&&ot(e,r.length):n=="string"&&e in r)?Ue(r[e],t):!1}var at=Tp;function Ap(t){return Bt(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&at(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,o)}return e})}var Ys=Ap;var Sp=Object.prototype;function Op(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Sp;return t===r}var Be=Op;function yp(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var qs=yp;var Rp="[object Arguments]";function Ip(t){return H(t)&&pe(t)==Rp}var Mi=Ip;var Zs=Object.prototype,Np=Zs.hasOwnProperty,Cp=Zs.propertyIsEnumerable,bp=Mi(function(){return arguments}())?Mi:function(t){return H(t)&&Np.call(t,"callee")&&!Cp.call(t,"callee")},lt=bp;function vp(){return!1}var Qs=vp;var ta=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Js=ta&&typeof module=="object"&&module&&!module.nodeType&&module,Lp=Js&&Js.exports===ta,ea=Lp?Z.Buffer:void 0,_p=ea?ea.isBuffer:void 0,Pp=_p||Qs,Ye=Pp;var kp="[object Arguments]",Mp="[object Array]",wp="[object Boolean]",Fp="[object Date]",Up="[object Error]",Dp="[object Function]",Bp="[object Map]",Gp="[object Number]",$p="[object Object]",Kp="[object RegExp]",Wp="[object Set]",jp="[object String]",Vp="[object WeakMap]",zp="[object ArrayBuffer]",Hp="[object DataView]",Xp="[object Float32Array]",Yp="[object Float64Array]",qp="[object Int8Array]",Zp="[object Int16Array]",Qp="[object Int32Array]",Jp="[object Uint8Array]",eh="[object Uint8ClampedArray]",th="[object Uint16Array]",rh="[object Uint32Array]",U={};U[Xp]=U[Yp]=U[qp]=U[Zp]=U[Qp]=U[Jp]=U[eh]=U[th]=U[rh]=!0;U[kp]=U[Mp]=U[zp]=U[wp]=U[Hp]=U[Fp]=U[Up]=U[Dp]=U[Bp]=U[Gp]=U[$p]=U[Kp]=U[Wp]=U[jp]=U[Vp]=!1;function nh(t){return H(t)&&Gt(t.length)&&!!U[pe(t)]}var ra=nh;function ih(t){return function(e){return t(e)}}var Ge=ih;var na=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Nr=na&&typeof module=="object"&&module&&!module.nodeType&&module,oh=Nr&&Nr.exports===na,wi=oh&&on.process,sh=function(){try{var t=Nr&&Nr.require&&Nr.require("util").types;return t||wi&&wi.binding&&wi.binding("util")}catch{}}(),Ce=sh;var ia=Ce&&Ce.isTypedArray,ah=ia?Ge(ia):ra,$t=ah;var lh=Object.prototype,uh=lh.hasOwnProperty;function ch(t,e){var r=S(t),n=!r&&lt(t),i=!r&&!n&&Ye(t),o=!r&&!n&&!i&&$t(t),s=r||n||i||o,a=s?qs(t.length,String):[],l=a.length;for(var u in t)(e||uh.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ot(u,l)))&&a.push(u);return a}var fn=ch;function fh(t,e){return function(r){return t(e(r))}}var pn=fh;var ph=pn(Object.keys,Object),oa=ph;var hh=Object.prototype,mh=hh.hasOwnProperty;function dh(t){if(!Be(t))return oa(t);var e=[];for(var r in Object(t))mh.call(t,r)&&r!="constructor"&&e.push(r);return e}var hn=dh;function gh(t){return Q(t)?fn(t):hn(t)}var P=gh;var Eh=Object.prototype,xh=Eh.hasOwnProperty,Th=Ys(function(t,e){if(Be(e)||Q(e)){De(e,P(e),t);return}for(var r in e)xh.call(e,r)&&st(t,r,e[r])}),se=Th;function Ah(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var sa=Ah;var Sh=Object.prototype,Oh=Sh.hasOwnProperty;function yh(t){if(!$(t))return sa(t);var e=Be(t),r=[];for(var n in t)n=="constructor"&&(e||!Oh.call(t,n))||r.push(n);return r}var aa=yh;function Rh(t){return Q(t)?fn(t,!0):aa(t)}var ut=Rh;var Ih=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nh=/^\w*$/;function Ch(t,e){if(S(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||it(t)?!0:Nh.test(t)||!Ih.test(t)||e!=null&&t in Object(e)}var Kt=Ch;var bh=xe(Object,"create"),qe=bh;function vh(){this.__data__=qe?qe(null):{},this.size=0}var la=vh;function Lh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ua=Lh;var _h="__lodash_hash_undefined__",Ph=Object.prototype,kh=Ph.hasOwnProperty;function Mh(t){var e=this.__data__;if(qe){var r=e[t];return r===_h?void 0:r}return kh.call(e,t)?e[t]:void 0}var ca=Mh;var wh=Object.prototype,Fh=wh.hasOwnProperty;function Uh(t){var e=this.__data__;return qe?e[t]!==void 0:Fh.call(e,t)}var fa=Uh;var Dh="__lodash_hash_undefined__";function Bh(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=qe&&e===void 0?Dh:e,this}var pa=Bh;function Wt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wt.prototype.clear=la;Wt.prototype.delete=ua;Wt.prototype.get=ca;Wt.prototype.has=fa;Wt.prototype.set=pa;var Fi=Wt;function Gh(){this.__data__=[],this.size=0}var ha=Gh;function $h(t,e){for(var r=t.length;r--;)if(Ue(t[r][0],e))return r;return-1}var ct=$h;var Kh=Array.prototype,Wh=Kh.splice;function jh(t){var e=this.__data__,r=ct(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Wh.call(e,r,1),--this.size,!0}var ma=jh;function Vh(t){var e=this.__data__,r=ct(e,t);return r<0?void 0:e[r][1]}var da=Vh;function zh(t){return ct(this.__data__,t)>-1}var ga=zh;function Hh(t,e){var r=this.__data__,n=ct(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Ea=Hh;function jt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jt.prototype.clear=ha;jt.prototype.delete=ma;jt.prototype.get=da;jt.prototype.has=ga;jt.prototype.set=Ea;var ft=jt;var Xh=xe(Z,"Map"),pt=Xh;function Yh(){this.size=0,this.__data__={hash:new Fi,map:new(pt||ft),string:new Fi}}var xa=Yh;function qh(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Ta=qh;function Zh(t,e){var r=t.__data__;return Ta(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ht=Zh;function Qh(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e}var Aa=Qh;function Jh(t){return ht(this,t).get(t)}var Sa=Jh;function em(t){return ht(this,t).has(t)}var Oa=em;function tm(t,e){var r=ht(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var ya=tm;function Vt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vt.prototype.clear=xa;Vt.prototype.delete=Aa;Vt.prototype.get=Sa;Vt.prototype.has=Oa;Vt.prototype.set=ya;var Ot=Vt;var rm="Expected a function";function Ui(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(rm);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ui.Cache||Ot),r}Ui.Cache=Ot;var Ra=Ui;var nm=500;function im(t){var e=Ra(t,function(n){return r.size===nm&&r.clear(),n}),r=e.cache;return e}var Ia=im;var om=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sm=/\\(\\)?/g,am=Ia(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(om,function(r,n,i,o){e.push(i?o.replace(sm,"$1"):n||r)}),e}),Na=am;function lm(t){return t==null?"":Ns(t)}var Ca=lm;function um(t,e){return S(t)?t:Kt(t,e)?[t]:Na(Ca(t))}var mt=um;var cm=1/0;function fm(t){if(typeof t=="string"||it(t))return t;var e=t+"";return e=="0"&&1/t==-cm?"-0":e}var $e=fm;function pm(t,e){e=mt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[$e(e[r++])];return r&&r==n?t:void 0}var zt=pm;function hm(t,e,r){var n=t==null?void 0:zt(t,e);return n===void 0?r:n}var ba=hm;function mm(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Ht=mm;var va=ie?ie.isConcatSpreadable:void 0;function dm(t){return S(t)||lt(t)||!!(va&&t&&t[va])}var La=dm;function _a(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=La),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?_a(a,e-1,r,n,i):Ht(i,a):n||(i[i.length]=a)}return i}var Xt=_a;function gm(t){var e=t==null?0:t.length;return e?Xt(t,1):[]}var te=gm;var Em=pn(Object.getPrototypeOf,Object),mn=Em;function xm(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var dn=xm;function Tm(t,e,r,n){var i=-1,o=t==null?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}var Pa=Tm;function Am(){this.__data__=new ft,this.size=0}var ka=Am;function Sm(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Ma=Sm;function Om(t){return this.__data__.get(t)}var wa=Om;function ym(t){return this.__data__.has(t)}var Fa=ym;var Rm=200;function Im(t,e){var r=this.__data__;if(r instanceof ft){var n=r.__data__;if(!pt||n.length<Rm-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ot(n)}return r.set(t,e),this.size=r.size,this}var Ua=Im;function Yt(t){var e=this.__data__=new ft(t);this.size=e.size}Yt.prototype.clear=ka;Yt.prototype.delete=Ma;Yt.prototype.get=wa;Yt.prototype.has=Fa;Yt.prototype.set=Ua;var dt=Yt;function Nm(t,e){return t&&De(e,P(e),t)}var Da=Nm;function Cm(t,e){return t&&De(e,ut(e),t)}var Ba=Cm;var Wa=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ga=Wa&&typeof module=="object"&&module&&!module.nodeType&&module,bm=Ga&&Ga.exports===Wa,$a=bm?Z.Buffer:void 0,Ka=$a?$a.allocUnsafe:void 0;function vm(t,e){if(e)return t.slice();var r=t.length,n=Ka?Ka(r):new t.constructor(r);return t.copy(n),n}var ja=vm;function Lm(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var qt=Lm;function _m(){return[]}var gn=_m;var Pm=Object.prototype,km=Pm.propertyIsEnumerable,Va=Object.getOwnPropertySymbols,Mm=Va?function(t){return t==null?[]:(t=Object(t),qt(Va(t),function(e){return km.call(t,e)}))}:gn,Zt=Mm;function wm(t,e){return De(t,Zt(t),e)}var za=wm;var Fm=Object.getOwnPropertySymbols,Um=Fm?function(t){for(var e=[];t;)Ht(e,Zt(t)),t=mn(t);return e}:gn,En=Um;function Dm(t,e){return De(t,En(t),e)}var Ha=Dm;function Bm(t,e,r){var n=e(t);return S(t)?n:Ht(n,r(t))}var xn=Bm;function Gm(t){return xn(t,P,Zt)}var Cr=Gm;function $m(t){return xn(t,ut,En)}var Tn=$m;var Km=xe(Z,"DataView"),An=Km;var Wm=xe(Z,"Promise"),Sn=Wm;var jm=xe(Z,"Set"),gt=jm;var Xa="[object Map]",Vm="[object Object]",Ya="[object Promise]",qa="[object Set]",Za="[object WeakMap]",Qa="[object DataView]",zm=Xe(An),Hm=Xe(pt),Xm=Xe(Sn),Ym=Xe(gt),qm=Xe(an),yt=pe;(An&&yt(new An(new ArrayBuffer(1)))!=Qa||pt&&yt(new pt)!=Xa||Sn&&yt(Sn.resolve())!=Ya||gt&&yt(new gt)!=qa||an&&yt(new an)!=Za)&&(yt=function(t){var e=pe(t),r=e==Vm?t.constructor:void 0,n=r?Xe(r):"";if(n)switch(n){case zm:return Qa;case Hm:return Xa;case Xm:return Ya;case Ym:return qa;case qm:return Za}return e});var Le=yt;var Zm=Object.prototype,Qm=Zm.hasOwnProperty;function Jm(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Qm.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Ja=Jm;var ed=Z.Uint8Array,Qt=ed;function td(t){var e=new t.constructor(t.byteLength);return new Qt(e).set(new Qt(t)),e}var Jt=td;function rd(t,e){var r=e?Jt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var el=rd;var nd=/\w*$/;function id(t){var e=new t.constructor(t.source,nd.exec(t));return e.lastIndex=t.lastIndex,e}var tl=id;var rl=ie?ie.prototype:void 0,nl=rl?rl.valueOf:void 0;function od(t){return nl?Object(nl.call(t)):{}}var il=od;function sd(t,e){var r=e?Jt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var ol=sd;var ad="[object Boolean]",ld="[object Date]",ud="[object Map]",cd="[object Number]",fd="[object RegExp]",pd="[object Set]",hd="[object String]",md="[object Symbol]",dd="[object ArrayBuffer]",gd="[object DataView]",Ed="[object Float32Array]",xd="[object Float64Array]",Td="[object Int8Array]",Ad="[object Int16Array]",Sd="[object Int32Array]",Od="[object Uint8Array]",yd="[object Uint8ClampedArray]",Rd="[object Uint16Array]",Id="[object Uint32Array]";function Nd(t,e,r){var n=t.constructor;switch(e){case dd:return Jt(t);case ad:case ld:return new n(+t);case gd:return el(t,r);case Ed:case xd:case Td:case Ad:case Sd:case Od:case yd:case Rd:case Id:return ol(t,r);case ud:return new n;case cd:case hd:return new n(t);case fd:return tl(t);case pd:return new n;case md:return il(t)}}var sl=Nd;function Cd(t){return typeof t.constructor=="function"&&!Be(t)?Ds(mn(t)):{}}var al=Cd;var bd="[object Map]";function vd(t){return H(t)&&Le(t)==bd}var ll=vd;var ul=Ce&&Ce.isMap,Ld=ul?Ge(ul):ll,cl=Ld;var _d="[object Set]";function Pd(t){return H(t)&&Le(t)==_d}var fl=Pd;var pl=Ce&&Ce.isSet,kd=pl?Ge(pl):fl,hl=kd;var Md=1,wd=2,Fd=4,ml="[object Arguments]",Ud="[object Array]",Dd="[object Boolean]",Bd="[object Date]",Gd="[object Error]",dl="[object Function]",$d="[object GeneratorFunction]",Kd="[object Map]",Wd="[object Number]",gl="[object Object]",jd="[object RegExp]",Vd="[object Set]",zd="[object String]",Hd="[object Symbol]",Xd="[object WeakMap]",Yd="[object ArrayBuffer]",qd="[object DataView]",Zd="[object Float32Array]",Qd="[object Float64Array]",Jd="[object Int8Array]",eg="[object Int16Array]",tg="[object Int32Array]",rg="[object Uint8Array]",ng="[object Uint8ClampedArray]",ig="[object Uint16Array]",og="[object Uint32Array]",k={};k[ml]=k[Ud]=k[Yd]=k[qd]=k[Dd]=k[Bd]=k[Zd]=k[Qd]=k[Jd]=k[eg]=k[tg]=k[Kd]=k[Wd]=k[gl]=k[jd]=k[Vd]=k[zd]=k[Hd]=k[rg]=k[ng]=k[ig]=k[og]=!0;k[Gd]=k[dl]=k[Xd]=!1;function On(t,e,r,n,i,o){var s,a=e&Md,l=e&wd,u=e&Fd;if(r&&(s=i?r(t,n,i,o):r(t)),s!==void 0)return s;if(!$(t))return t;var c=S(t);if(c){if(s=Ja(t),!a)return Gs(t,s)}else{var f=Le(t),p=f==dl||f==$d;if(Ye(t))return ja(t,a);if(f==gl||f==ml||p&&!i){if(s=l||p?{}:al(t),!a)return l?Ha(t,Ba(s,t)):za(t,Da(s,t))}else{if(!k[f])return i?t:{};s=sl(t,f,a)}}o||(o=new dt);var E=o.get(t);if(E)return E;o.set(t,s),hl(t)?t.forEach(function(I){s.add(On(I,e,r,I,t,o))}):cl(t)&&t.forEach(function(I,A){s.set(A,On(I,e,r,A,t,o))});var O=u?l?Tn:Cr:l?ut:P,y=c?void 0:O(t);return ln(y||t,function(I,A){y&&(A=I,I=t[A]),st(s,A,On(I,e,r,A,t,o))}),s}var El=On;var sg=4;function ag(t){return El(t,sg)}var M=ag;function lg(t){for(var e=-1,r=t==null?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i}var Ke=lg;var ug="__lodash_hash_undefined__";function cg(t){return this.__data__.set(t,ug),this}var xl=cg;function fg(t){return this.__data__.has(t)}var Tl=fg;function yn(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Ot;++e<r;)this.add(t[e])}yn.prototype.add=yn.prototype.push=xl;yn.prototype.has=Tl;var er=yn;function pg(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Rn=pg;function hg(t,e){return t.has(e)}var tr=hg;var mg=1,dg=2;function gg(t,e,r,n,i,o){var s=r&mg,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,p=!0,E=r&dg?new er:void 0;for(o.set(t,e),o.set(e,t);++f<a;){var O=t[f],y=e[f];if(n)var I=s?n(y,O,f,e,t,o):n(O,y,f,t,e,o);if(I!==void 0){if(I)continue;p=!1;break}if(E){if(!Rn(e,function(A,g){if(!tr(E,g)&&(O===A||i(O,A,r,n,o)))return E.push(g)})){p=!1;break}}else if(!(O===y||i(O,y,r,n,o))){p=!1;break}}return o.delete(t),o.delete(e),p}var In=gg;function Eg(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var Al=Eg;function xg(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var rr=xg;var Tg=1,Ag=2,Sg="[object Boolean]",Og="[object Date]",yg="[object Error]",Rg="[object Map]",Ig="[object Number]",Ng="[object RegExp]",Cg="[object Set]",bg="[object String]",vg="[object Symbol]",Lg="[object ArrayBuffer]",_g="[object DataView]",Sl=ie?ie.prototype:void 0,Di=Sl?Sl.valueOf:void 0;function Pg(t,e,r,n,i,o,s){switch(r){case _g:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Lg:return!(t.byteLength!=e.byteLength||!o(new Qt(t),new Qt(e)));case Sg:case Og:case Ig:return Ue(+t,+e);case yg:return t.name==e.name&&t.message==e.message;case Ng:case bg:return t==e+"";case Rg:var a=Al;case Cg:var l=n&Tg;if(a||(a=rr),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=Ag,s.set(t,e);var c=In(a(t),a(e),n,i,o,s);return s.delete(t),c;case vg:if(Di)return Di.call(t)==Di.call(e)}return!1}var Ol=Pg;var kg=1,Mg=Object.prototype,wg=Mg.hasOwnProperty;function Fg(t,e,r,n,i,o){var s=r&kg,a=Cr(t),l=a.length,u=Cr(e),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var p=a[f];if(!(s?p in e:wg.call(e,p)))return!1}var E=o.get(t),O=o.get(e);if(E&&O)return E==e&&O==t;var y=!0;o.set(t,e),o.set(e,t);for(var I=s;++f<l;){p=a[f];var A=t[p],g=e[p];if(n)var h=s?n(g,A,p,e,t,o):n(A,g,p,t,e,o);if(!(h===void 0?A===g||i(A,g,r,n,o):h)){y=!1;break}I||(I=p=="constructor")}if(y&&!I){var N=t.constructor,C=e.constructor;N!=C&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof C=="function"&&C instanceof C)&&(y=!1)}return o.delete(t),o.delete(e),y}var yl=Fg;var Ug=1,Rl="[object Arguments]",Il="[object Array]",Nn="[object Object]",Dg=Object.prototype,Nl=Dg.hasOwnProperty;function Bg(t,e,r,n,i,o){var s=S(t),a=S(e),l=s?Il:Le(t),u=a?Il:Le(e);l=l==Rl?Nn:l,u=u==Rl?Nn:u;var c=l==Nn,f=u==Nn,p=l==u;if(p&&Ye(t)){if(!Ye(e))return!1;s=!0,c=!1}if(p&&!c)return o||(o=new dt),s||$t(t)?In(t,e,r,n,i,o):Ol(t,e,l,r,n,i,o);if(!(r&Ug)){var E=c&&Nl.call(t,"__wrapped__"),O=f&&Nl.call(e,"__wrapped__");if(E||O){var y=E?t.value():t,I=O?e.value():e;return o||(o=new dt),i(y,I,r,n,o)}}return p?(o||(o=new dt),yl(t,e,r,n,i,o)):!1}var Cl=Bg;function bl(t,e,r,n,i){return t===e?!0:t==null||e==null||!H(t)&&!H(e)?t!==t&&e!==e:Cl(t,e,r,n,bl,i)}var Cn=bl;var Gg=1,$g=2;function Kg(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=r[i];var l=a[0],u=t[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in t))return!1}else{var f=new dt;if(n)var p=n(u,c,l,t,e,f);if(!(p===void 0?Cn(c,u,Gg|$g,n,f):p))return!1}}return!0}var vl=Kg;function Wg(t){return t===t&&!$(t)}var bn=Wg;function jg(t){for(var e=P(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,bn(i)]}return e}var Ll=jg;function Vg(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var vn=Vg;function zg(t){var e=Ll(t);return e.length==1&&e[0][2]?vn(e[0][0],e[0][1]):function(r){return r===t||vl(r,t,e)}}var _l=zg;function Hg(t,e){return t!=null&&e in Object(t)}var Pl=Hg;function Xg(t,e,r){e=mt(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=$e(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Gt(i)&&ot(s,i)&&(S(t)||lt(t)))}var Ln=Xg;function Yg(t,e){return t!=null&&Ln(t,e,Pl)}var kl=Yg;var qg=1,Zg=2;function Qg(t,e){return Kt(t)&&bn(e)?vn($e(t),e):function(r){var n=ba(r,t);return n===void 0&&n===e?kl(r,t):Cn(e,n,qg|Zg)}}var Ml=Qg;function Jg(t){return function(e){return e?.[t]}}var wl=Jg;function eE(t){return function(e){return zt(e,t)}}var Fl=eE;function tE(t){return Kt(t)?wl($e(t)):Fl(t)}var Ul=tE;function rE(t){return typeof t=="function"?t:t==null?Ne:typeof t=="object"?S(t)?Ml(t[0],t[1]):_l(t):Ul(t)}var J=rE;function nE(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}var Dl=nE;function iE(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++i];if(r(o[l],l,o)===!1)break}return e}}var Bl=iE;var oE=Bl(),Gl=oE;function sE(t,e){return t&&Gl(t,e,P)}var $l=sE;function aE(t,e){return function(r,n){if(r==null)return r;if(!Q(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var Kl=aE;var lE=Kl($l),Te=lE;function uE(t,e,r,n){return Te(t,function(i,o,s){e(n,i,r(i),s)}),n}var Wl=uE;function cE(t,e){return function(r,n){var i=S(r)?Dl:Wl,o=e?e():{};return i(r,t,J(n,2),o)}}var jl=cE;var Vl=Object.prototype,fE=Vl.hasOwnProperty,pE=Bt(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&at(e[0],e[1],i)&&(n=1);++r<n;)for(var o=e[r],s=ut(o),a=-1,l=s.length;++a<l;){var u=s[a],c=t[u];(c===void 0||Ue(c,Vl[u])&&!fE.call(t,u))&&(t[u]=o[u])}return t}),nr=pE;function hE(t){return H(t)&&Q(t)}var Bi=hE;function mE(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var _n=mE;var dE=200;function gE(t,e,r,n){var i=-1,o=cn,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;r&&(e=we(e,Ge(r))),n?(o=_n,s=!1):e.length>=dE&&(o=tr,s=!1,e=new er(e));e:for(;++i<a;){var c=t[i],f=r==null?c:r(c);if(c=n||c!==0?c:0,s&&f===f){for(var p=u;p--;)if(e[p]===f)continue e;l.push(c)}else o(e,f,n)||l.push(c)}return l}var zl=gE;var EE=Bt(function(t,e){return Bi(t)?zl(t,Xt(e,1,Bi,!0)):[]}),Et=EE;function xE(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var _e=xE;function TE(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:Fe(e),dn(t,e<0?0:e,n)):[]}var X=TE;function AE(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:Fe(e),e=n-e,dn(t,0,e<0?0:e)):[]}var Ze=AE;function SE(t){return typeof t=="function"?t:Ne}var Hl=SE;function OE(t,e){var r=S(t)?ln:Te;return r(t,Hl(e))}var x=OE;function yE(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var Xl=yE;function RE(t,e){var r=!0;return Te(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var Yl=RE;function IE(t,e,r){var n=S(t)?Xl:Yl;return r&&at(t,e,r)&&(e=void 0),n(t,J(e,3))}var ue=IE;function NE(t,e){var r=[];return Te(t,function(n,i,o){e(n,i,o)&&r.push(n)}),r}var Pn=NE;function CE(t,e){var r=S(t)?qt:Pn;return r(t,J(e,3))}var ce=CE;function bE(t){return function(e,r,n){var i=Object(e);if(!Q(e)){var o=J(r,3);e=P(e),r=function(a){return o(i[a],a,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:void 0}}var ql=bE;var vE=Math.max;function LE(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Fe(r);return i<0&&(i=vE(n+i,0)),un(t,J(e,3),i)}var Zl=LE;var _E=ql(Zl),We=_E;function PE(t){return t&&t.length?t[0]:void 0}var oe=PE;function kE(t,e){var r=-1,n=Q(t)?Array(t.length):[];return Te(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var Ql=kE;function ME(t,e){var r=S(t)?we:Ql;return r(t,J(e,3))}var d=ME;function wE(t,e){return Xt(d(t,e),1)}var me=wE;var FE=Object.prototype,UE=FE.hasOwnProperty,DE=jl(function(t,e,r){UE.call(t,r)?t[r].push(e):Dt(t,r,[e])}),Gi=DE;var BE=Object.prototype,GE=BE.hasOwnProperty;function $E(t,e){return t!=null&&GE.call(t,e)}var Jl=$E;function KE(t,e){return t!=null&&Ln(t,e,Jl)}var T=KE;var WE="[object String]";function jE(t){return typeof t=="string"||!S(t)&&H(t)&&pe(t)==WE}var re=jE;function VE(t,e){return we(e,function(r){return t[r]})}var eu=VE;function zE(t){return t==null?[]:eu(t,P(t))}var _=zE;var HE=Math.max;function XE(t,e,r,n){t=Q(t)?t:_(t),r=r&&!n?Fe(r):0;var i=t.length;return r<0&&(r=HE(i+r,0)),re(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Ut(t,e,r)>-1}var B=XE;var YE=Math.max;function qE(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Fe(r);return i<0&&(i=YE(n+i,0)),Ut(t,e,i)}var kn=qE;var ZE="[object Map]",QE="[object Set]",JE=Object.prototype,ex=JE.hasOwnProperty;function tx(t){if(t==null)return!0;if(Q(t)&&(S(t)||typeof t=="string"||typeof t.splice=="function"||Ye(t)||$t(t)||lt(t)))return!t.length;var e=Le(t);if(e==ZE||e==QE)return!t.size;if(Be(t))return!hn(t).length;for(var r in t)if(ex.call(t,r))return!1;return!0}var b=tx;var rx="[object RegExp]";function nx(t){return H(t)&&pe(t)==rx}var tu=nx;var ru=Ce&&Ce.isRegExp,ix=ru?Ge(ru):tu,be=ix;function ox(t){return t===void 0}var fe=ox;var sx="Expected a function";function ax(t){if(typeof t!="function")throw new TypeError(sx);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var nu=ax;function lx(t,e,r,n){if(!$(t))return t;e=mt(e,t);for(var i=-1,o=e.length,s=o-1,a=t;a!=null&&++i<o;){var l=$e(e[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=s){var c=a[l];u=n?n(c,l,a):void 0,u===void 0&&(u=$(c)?c:ot(e[i+1])?[]:{})}st(a,l,u),a=a[l]}return t}var iu=lx;function ux(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var s=e[n],a=zt(t,s);r(a,s)&&iu(o,mt(s,t),a)}return o}var ou=ux;function cx(t,e){if(t==null)return{};var r=we(Tn(t),function(n){return[n]});return e=J(e),ou(t,r,function(n,i){return e(n,i[0])})}var Ae=cx;function fx(t,e,r,n,i){return i(t,function(o,s,a){r=n?(n=!1,o):e(r,o,s,a)}),r}var su=fx;function px(t,e,r){var n=S(t)?Pa:su,i=arguments.length<3;return n(t,J(e,4),r,i,Te)}var ee=px;function hx(t,e){var r=S(t)?qt:Pn;return r(t,nu(J(e,3)))}var xt=hx;function mx(t,e){var r;return Te(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var au=mx;function dx(t,e,r){var n=S(t)?Rn:au;return r&&at(t,e,r)&&(e=void 0),n(t,J(e,3))}var br=dx;var gx=1/0,Ex=gt&&1/rr(new gt([,-0]))[1]==gx?function(t){return new gt(t)}:K,lu=Ex;var xx=200;function Tx(t,e,r){var n=-1,i=cn,o=t.length,s=!0,a=[],l=a;if(r)s=!1,i=_n;else if(o>=xx){var u=e?null:lu(t);if(u)return rr(u);s=!1,i=tr,l=new er}else l=e?[]:a;e:for(;++n<o;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;e&&l.push(f),a.push(c)}else i(l,f,r)||(l!==a&&l.push(f),a.push(c))}return a}var uu=Tx;function Ax(t){return t&&t.length?uu(t):[]}var ir=Ax;function or(t){console&&console.error&&console.error(`Error: ${t}`)}function vr(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Lr(t){let e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function _r(t){function e(){}e.prototype=t;let r=new e;function n(){return typeof r.bar}return n(),n(),t;(0,eval)(t)}function Sx(t){return Ox(t)?t.LABEL:t.name}function Ox(t){return re(t.LABEL)&&t.LABEL!==""}var Re=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),x(this.definition,r=>{r.accept(e)})}},w=class extends Re{constructor(e){super([]),this.idx=1,se(this,Ae(e,r=>r!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},de=class extends Re{constructor(e){super(e.definition),this.orgText="",se(this,Ae(e,r=>r!==void 0))}},F=class extends Re{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,se(this,Ae(e,r=>r!==void 0))}},D=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ae(e,r=>r!==void 0))}},Y=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ae(e,r=>r!==void 0))}},q=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ae(e,r=>r!==void 0))}},L=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ae(e,r=>r!==void 0))}},j=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ae(e,r=>r!==void 0))}},V=class extends Re{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,se(this,Ae(e,r=>r!==void 0))}},v=class{constructor(e){this.idx=1,se(this,Ae(e,r=>r!==void 0))}accept(e){e.visit(this)}};function Mn(t){return d(t,sr)}function sr(t){function e(r){return d(r,sr)}if(t instanceof w){let r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return re(t.label)&&(r.label=t.label),r}else{if(t instanceof F)return{type:"Alternative",definition:e(t.definition)};if(t instanceof D)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Y)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof q)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:sr(new v({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof j)return{type:"RepetitionWithSeparator",idx:t.idx,separator:sr(new v({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof L)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof V)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof v){let r={type:"Terminal",name:t.terminalType.name,label:Sx(t.terminalType),idx:t.idx};re(t.label)&&(r.terminalLabel=t.label);let n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=be(n)?n.source:n),r}else{if(t instanceof de)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var ge=class{visit(e){let r=e;switch(r.constructor){case w:return this.visitNonTerminal(r);case F:return this.visitAlternative(r);case D:return this.visitOption(r);case Y:return this.visitRepetitionMandatory(r);case q:return this.visitRepetitionMandatoryWithSeparator(r);case j:return this.visitRepetitionWithSeparator(r);case L:return this.visitRepetition(r);case V:return this.visitAlternation(r);case v:return this.visitTerminal(r);case de:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function $i(t){return t instanceof F||t instanceof D||t instanceof L||t instanceof Y||t instanceof q||t instanceof j||t instanceof v||t instanceof de}function Rt(t,e=[]){return t instanceof D||t instanceof L||t instanceof j?!0:t instanceof V?br(t.definition,n=>Rt(n,e)):t instanceof w&&B(e,t)?!1:t instanceof Re?(t instanceof w&&e.push(t),ue(t.definition,n=>Rt(n,e))):!1}function Ki(t){return t instanceof V}function Se(t){if(t instanceof w)return"SUBRULE";if(t instanceof D)return"OPTION";if(t instanceof V)return"OR";if(t instanceof Y)return"AT_LEAST_ONE";if(t instanceof q)return"AT_LEAST_ONE_SEP";if(t instanceof j)return"MANY_SEP";if(t instanceof L)return"MANY";if(t instanceof v)return"CONSUME";throw Error("non exhaustive match")}var Qe=class{walk(e,r=[]){x(e.definition,(n,i)=>{let o=X(e.definition,i+1);if(n instanceof w)this.walkProdRef(n,o,r);else if(n instanceof v)this.walkTerminal(n,o,r);else if(n instanceof F)this.walkFlat(n,o,r);else if(n instanceof D)this.walkOption(n,o,r);else if(n instanceof Y)this.walkAtLeastOne(n,o,r);else if(n instanceof q)this.walkAtLeastOneSep(n,o,r);else if(n instanceof j)this.walkManySep(n,o,r);else if(n instanceof L)this.walkMany(n,o,r);else if(n instanceof V)this.walkOr(n,o,r);else throw Error("non exhaustive match")})}walkTerminal(e,r,n){}walkProdRef(e,r,n){}walkFlat(e,r,n){let i=r.concat(n);this.walk(e,i)}walkOption(e,r,n){let i=r.concat(n);this.walk(e,i)}walkAtLeastOne(e,r,n){let i=[new D({definition:e.definition})].concat(r,n);this.walk(e,i)}walkAtLeastOneSep(e,r,n){let i=cu(e,r,n);this.walk(e,i)}walkMany(e,r,n){let i=[new D({definition:e.definition})].concat(r,n);this.walk(e,i)}walkManySep(e,r,n){let i=cu(e,r,n);this.walk(e,i)}walkOr(e,r,n){let i=r.concat(n);x(e.definition,o=>{let s=new F({definition:[o]});this.walk(s,i)})}};function cu(t,e,r){return[new D({definition:[new v({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function It(t){if(t instanceof w)return It(t.referencedRule);if(t instanceof v)return Ix(t);if($i(t))return yx(t);if(Ki(t))return Rx(t);throw Error("non exhaustive match")}function yx(t){let e=[],r=t.definition,n=0,i=r.length>n,o,s=!0;for(;i&&s;)o=r[n],s=Rt(o),e=e.concat(It(o)),n=n+1,i=r.length>n;return ir(e)}function Rx(t){let e=d(t.definition,r=>It(r));return ir(te(e))}function Ix(t){return[t.terminalType]}var wn="_~IN~_";var Wi=class extends Qe{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,n){}walkProdRef(e,r,n){let i=Nx(e.referencedRule,e.idx)+this.topProd.name,o=r.concat(n),s=new F({definition:o}),a=It(s);this.follows[i]=a}};function fu(t){let e={};return x(t,r=>{let n=new Wi(r).startWalking();se(e,n)}),e}function Nx(t,e){return t.name+e+wn}function R(t){return t.charCodeAt(0)}function Fn(t,e){Array.isArray(t)?t.forEach(function(r){e.push(r)}):e.push(t)}function ar(t,e){if(t[e]===!0)throw"duplicate flag "+e;let r=t[e];t[e]=!0}function Nt(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function Pr(){throw Error("Internal Error - Should never get here!")}function ji(t){return t.type==="Character"}var kr=[];for(let t=R("0");t<=R("9");t++)kr.push(t);var Mr=[R("_")].concat(kr);for(let t=R("a");t<=R("z");t++)Mr.push(t);for(let t=R("A");t<=R("Z");t++)Mr.push(t);var Vi=[R(" "),R("\f"),R(`
`),R("\r"),R("	"),R("\v"),R("	"),R("\xA0"),R("\u1680"),R("\u2000"),R("\u2001"),R("\u2002"),R("\u2003"),R("\u2004"),R("\u2005"),R("\u2006"),R("\u2007"),R("\u2008"),R("\u2009"),R("\u200A"),R("\u2028"),R("\u2029"),R("\u202F"),R("\u205F"),R("\u3000"),R("\uFEFF")];var Cx=/[0-9a-fA-F]/,Un=/[0-9]/,bx=/[1-9]/,wr=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":ar(n,"global");break;case"i":ar(n,"ignoreCase");break;case"m":ar(n,"multiLine");break;case"u":ar(n,"unicode");break;case"y":ar(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){let e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){let e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}Nt(r);let n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(e)}}return Pr()}quantifier(e=!1){let r,n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let o;this.isDigit()?(o=this.integerIncludingZero(),r={atLeast:i,atMost:o}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&r===void 0)return;Nt(r);break}if(!(e===!0&&r===void 0)&&Nt(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let e,r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Nt(e)?(e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):Pr()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[R(`
`),R("\r"),R("\u2028"),R("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=kr;break;case"D":e=kr,r=!0;break;case"s":e=Vi;break;case"S":e=Vi,r=!0;break;case"w":e=Mr;break;case"W":e=Mr,r=!0;break}return Nt(e)?{type:"Set",value:e,complement:r}:Pr()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=R("\f");break;case"n":e=R(`
`);break;case"r":e=R("\r");break;case"t":e=R("	");break;case"v":e=R("\v");break}return Nt(e)?{type:"Character",value:e}:Pr()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:R("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:R(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:R(e)}}}characterClass(){let e=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let n=this.classAtom(),i=n.type==="Character";if(ji(n)&&this.isRangeDash()){this.consumeChar("-");let o=this.classAtom(),s=o.type==="Character";if(ji(o)){if(o.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:o.value})}else Fn(n.value,e),e.push(R("-")),Fn(o.value,e)}else Fn(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:R("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}let r=this.disjunction();this.consumeChar(")");let n={type:"Group",capturing:e,value:r};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(bx.test(e)===!1)throw Error("Expecting a positive integer");for(;Un.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Un.test(e)===!1)throw Error("Expecting an integer");for(;Un.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:R(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Un.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let i=0;i<e;i++){let o=this.popChar();if(Cx.test(o)===!1)throw Error("Expecting a HexDecimal digits");r+=o}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var Tt=class{visitChildren(e){for(let r in e){let n=e[r];e.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var Dn={},vx=new wr;function lr(t){let e=t.toString();if(Dn.hasOwnProperty(e))return Dn[e];{let r=vx.pattern(e);return Dn[e]=r,r}}function pu(){Dn={}}var mu="Complement Sets are not supported for first char optimization",Fr=`Unable to use "first char" lexer optimizations:
`;function du(t,e=!1){try{let r=lr(t);return zi(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===mu)e&&vr(`${Fr}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),or(`${Fr}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function zi(t,e,r){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)zi(t.value[i],e,r);break;case"Alternative":let n=t.value;for(let i=0;i<n.length;i++){let o=n[i];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=o;switch(s.type){case"Character":Bn(s.value,e,r);break;case"Set":if(s.complement===!0)throw Error(mu);x(s.value,l=>{if(typeof l=="number")Bn(l,e,r);else{let u=l;if(r===!0)for(let c=u.from;c<=u.to;c++)Bn(c,e,r);else{for(let c=u.from;c<=u.to&&c<ur;c++)Bn(c,e,r);if(u.to>=ur){let c=u.from>=ur?u.from:ur,f=u.to,p=je(c),E=je(f);for(let O=p;O<=E;O++)e[O]=O}}}});break;case"Group":zi(s.value,e,r);break;default:throw Error("Non Exhaustive Match")}let a=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&Hi(s)===!1||s.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return _(e)}function Bn(t,e,r){let n=je(t);e[n]=n,r===!0&&Lx(t,e)}function Lx(t,e){let r=String.fromCharCode(t),n=r.toUpperCase();if(n!==r){let i=je(n.charCodeAt(0));e[i]=i}else{let i=r.toLowerCase();if(i!==r){let o=je(i.charCodeAt(0));e[o]=o}}}function hu(t,e){return We(t.value,r=>{if(typeof r=="number")return B(e,r);{let n=r;return We(e,i=>n.from<=i&&i<=n.to)!==void 0}})}function Hi(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?S(t.value)?ue(t.value,Hi):Hi(t.value):!1}var Xi=class extends Tt{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){B(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?hu(e,this.targetCharCodes)===void 0&&(this.found=!0):hu(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Gn(t,e){if(e instanceof RegExp){let r=lr(e),n=new Xi(t);return n.visit(r),n.found}else return We(e,r=>B(t,r.charCodeAt(0)))!==void 0}var Ct="PATTERN",cr="defaultMode",$n="modes",qi=typeof new RegExp("(?:)").sticky=="boolean";function xu(t,e){e=nr(e,{useSticky:qi,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(g,h)=>h()});let r=e.tracer;r("initCharCodeToOptimizedIndexMap",()=>{Yx()});let n;r("Reject Lexer.NA",()=>{n=xt(t,g=>g[Ct]===z.NA)});let i=!1,o;r("Transform Patterns",()=>{i=!1,o=d(n,g=>{let h=g[Ct];if(be(h)){let N=h.source;return N.length===1&&N!=="^"&&N!=="$"&&N!=="."&&!h.ignoreCase?N:N.length===2&&N[0]==="\\"&&!B(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],N[1])?N[1]:e.useSticky?Eu(h):gu(h)}else{if(he(h))return i=!0,{exec:h};if(typeof h=="object")return i=!0,h;if(typeof h=="string"){if(h.length===1)return h;{let N=h.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),C=new RegExp(N);return e.useSticky?Eu(C):gu(C)}}else throw Error("non exhaustive match")}})});let s,a,l,u,c;r("misc mapping",()=>{s=d(n,g=>g.tokenTypeIdx),a=d(n,g=>{let h=g.GROUP;if(h!==z.SKIPPED){if(re(h))return h;if(fe(h))return!1;throw Error("non exhaustive match")}}),l=d(n,g=>{let h=g.LONGER_ALT;if(h)return S(h)?d(h,C=>kn(n,C)):[kn(n,h)]}),u=d(n,g=>g.PUSH_MODE),c=d(n,g=>T(g,"POP_MODE"))});let f;r("Line Terminator Handling",()=>{let g=Nu(e.lineTerminatorCharacters);f=d(n,h=>!1),e.positionTracking!=="onlyOffset"&&(f=d(n,h=>T(h,"LINE_BREAKS")?!!h.LINE_BREAKS:Iu(h,g)===!1&&Gn(g,h.PATTERN)))});let p,E,O,y;r("Misc Mapping #2",()=>{p=d(n,yu),E=d(o,Hx),O=ee(n,(g,h)=>{let N=h.GROUP;return re(N)&&N!==z.SKIPPED&&(g[N]=[]),g},{}),y=d(o,(g,h)=>({pattern:o[h],longerAlt:l[h],canLineTerminator:f[h],isCustom:p[h],short:E[h],group:a[h],push:u[h],pop:c[h],tokenTypeIdx:s[h],tokenType:n[h]}))});let I=!0,A=[];return e.safeMode||r("First Char Optimization",()=>{A=ee(n,(g,h,N)=>{if(typeof h.PATTERN=="string"){let C=h.PATTERN.charCodeAt(0),Oe=je(C);Yi(g,Oe,y[N])}else if(S(h.START_CHARS_HINT)){let C;x(h.START_CHARS_HINT,Oe=>{let vi=typeof Oe=="string"?Oe.charCodeAt(0):Oe,Me=je(vi);C!==Me&&(C=Me,Yi(g,Me,y[N]))})}else if(be(h.PATTERN))if(h.PATTERN.unicode)I=!1,e.ensureOptimizations&&or(`${Fr}	Unable to analyze < ${h.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let C=du(h.PATTERN,e.ensureOptimizations);b(C)&&(I=!1),x(C,Oe=>{Yi(g,Oe,y[N])})}else e.ensureOptimizations&&or(`${Fr}	TokenType: <${h.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),I=!1;return g},[])}),{emptyGroups:O,patternIdxToConfig:y,charCodeToPatternIdxToConfig:A,hasCustom:i,canBeOptimized:I}}function Tu(t,e){let r=[],n=Px(t);r=r.concat(n.errors);let i=kx(n.valid),o=i.valid;return r=r.concat(i.errors),r=r.concat(_x(o)),r=r.concat($x(o)),r=r.concat(Kx(o,e)),r=r.concat(Wx(o)),r}function _x(t){let e=[],r=ce(t,n=>be(n[Ct]));return e=e.concat(wx(r)),e=e.concat(Dx(r)),e=e.concat(Bx(r)),e=e.concat(Gx(r)),e=e.concat(Fx(r)),e}function Px(t){let e=ce(t,i=>!T(i,Ct)),r=d(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:G.MISSING_PATTERN,tokenTypes:[i]})),n=Et(t,e);return{errors:r,valid:n}}function kx(t){let e=ce(t,i=>{let o=i[Ct];return!be(o)&&!he(o)&&!T(o,"exec")&&!re(o)}),r=d(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:G.INVALID_PATTERN,tokenTypes:[i]})),n=Et(t,e);return{errors:r,valid:n}}var Mx=/[^\\][$]/;function wx(t){class e extends Tt{constructor(){super(...arguments),this.found=!1}visitEndAnchor(o){this.found=!0}}let r=ce(t,i=>{let o=i.PATTERN;try{let s=lr(o),a=new e;return a.visit(s),a.found}catch{return Mx.test(o.source)}});return d(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:G.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Fx(t){let e=ce(t,n=>n.PATTERN.test(""));return d(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:G.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}var Ux=/[^\\[][\^]|^\^/;function Dx(t){class e extends Tt{constructor(){super(...arguments),this.found=!1}visitStartAnchor(o){this.found=!0}}let r=ce(t,i=>{let o=i.PATTERN;try{let s=lr(o),a=new e;return a.visit(s),a.found}catch{return Ux.test(o.source)}});return d(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:G.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Bx(t){let e=ce(t,n=>{let i=n[Ct];return i instanceof RegExp&&(i.multiline||i.global)});return d(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:G.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function Gx(t){let e=[],r=d(t,o=>ee(t,(s,a)=>(o.PATTERN.source===a.PATTERN.source&&!B(e,a)&&a.PATTERN!==z.NA&&(e.push(a),s.push(a)),s),[]));r=Ke(r);let n=ce(r,o=>o.length>1);return d(n,o=>{let s=d(o,l=>l.name);return{message:`The same RegExp pattern ->${oe(o).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:G.DUPLICATE_PATTERNS_FOUND,tokenTypes:o}})}function $x(t){let e=ce(t,n=>{if(!T(n,"GROUP"))return!1;let i=n.GROUP;return i!==z.SKIPPED&&i!==z.NA&&!re(i)});return d(e,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:G.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function Kx(t,e){let r=ce(t,i=>i.PUSH_MODE!==void 0&&!B(e,i.PUSH_MODE));return d(r,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:G.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Wx(t){let e=[],r=ee(t,(n,i,o)=>{let s=i.PATTERN;return s===z.NA||(re(s)?n.push({str:s,idx:o,tokenType:i}):be(s)&&Vx(s)&&n.push({str:s.source,idx:o,tokenType:i})),n},[]);return x(t,(n,i)=>{x(r,({str:o,idx:s,tokenType:a})=>{if(i<s&&jx(o,n.PATTERN)){let l=`Token: ->${a.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:l,type:G.UNREACHABLE_PATTERN,tokenTypes:[n,a]})}})}),e}function jx(t,e){if(be(e)){if(zx(e))return!1;let r=e.exec(t);return r!==null&&r.index===0}else{if(he(e))return e(t,0,[],{});if(T(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function Vx(t){return We([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>t.source.indexOf(r)!==-1)===void 0}function zx(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function gu(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Eu(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Au(t,e,r){let n=[];return T(t,cr)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+cr+`> property in its definition
`,type:G.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),T(t,$n)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+$n+`> property in its definition
`,type:G.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),T(t,$n)&&T(t,cr)&&!T(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${cr}: <${t.defaultMode}>which does not exist
`,type:G.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),T(t,$n)&&x(t.modes,(i,o)=>{x(i,(s,a)=>{if(fe(s))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${o}> at index: <${a}>
`,type:G.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(T(s,"LONGER_ALT")){let l=S(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];x(l,u=>{!fe(u)&&!B(i,u)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${s.name}> outside of mode <${o}>
`,type:G.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function Su(t,e,r){let n=[],i=!1,o=Ke(te(_(t.modes))),s=xt(o,l=>l[Ct]===z.NA),a=Nu(r);return e&&x(s,l=>{let u=Iu(l,a);if(u!==!1){let f={message:Xx(l,u),type:u.issue,tokenType:l};n.push(f)}else T(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(i=!0):Gn(a,l.PATTERN)&&(i=!0)}),e&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:G.NO_LINE_BREAKS_FLAGS}),n}function Ou(t){let e={},r=P(t);return x(r,n=>{let i=t[n];if(S(i))e[n]=[];else throw Error("non exhaustive match")}),e}function yu(t){let e=t.PATTERN;if(be(e))return!1;if(he(e))return!0;if(T(e,"exec"))return!0;if(re(e))return!1;throw Error("non exhaustive match")}function Hx(t){return re(t)&&t.length===1?t.charCodeAt(0):!1}var Ru={test:function(t){let e=t.length;for(let r=this.lastIndex;r<e;r++){let n=t.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function Iu(t,e){if(T(t,"LINE_BREAKS"))return!1;if(be(t.PATTERN)){try{Gn(e,t.PATTERN)}catch(r){return{issue:G.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(re(t.PATTERN))return!1;if(yu(t))return{issue:G.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Xx(t,e){if(e.issue===G.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===G.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Nu(t){return d(t,r=>re(r)?r.charCodeAt(0):r)}function Yi(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}var ur=256,Kn=[];function je(t){return t<ur?t:Kn[t]}function Yx(){if(b(Kn)){Kn=new Array(65536);for(let t=0;t<65536;t++)Kn[t]=t>255?255+~~(t/255):t}}function Je(t,e){let r=t.tokenTypeIdx;return r===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[r]===!0}function fr(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var Cu=1,vu={};function et(t){let e=qx(t);Zx(e),Jx(e),Qx(e),x(e,r=>{r.isParent=r.categoryMatches.length>0})}function qx(t){let e=M(t),r=t,n=!0;for(;n;){r=Ke(te(d(r,o=>o.CATEGORIES)));let i=Et(r,e);e=e.concat(i),b(i)?n=!1:r=i}return e}function Zx(t){x(t,e=>{Zi(e)||(vu[Cu]=e,e.tokenTypeIdx=Cu++),bu(e)&&!S(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),bu(e)||(e.CATEGORIES=[]),eT(e)||(e.categoryMatches=[]),tT(e)||(e.categoryMatchesMap={})})}function Qx(t){x(t,e=>{e.categoryMatches=[],x(e.categoryMatchesMap,(r,n)=>{e.categoryMatches.push(vu[n].tokenTypeIdx)})})}function Jx(t){x(t,e=>{Lu([],e)})}function Lu(t,e){x(t,r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0}),x(e.CATEGORIES,r=>{let n=t.concat(e);B(n,r)||Lu(n,r)})}function Zi(t){return T(t,"tokenTypeIdx")}function bu(t){return T(t,"CATEGORIES")}function eT(t){return T(t,"categoryMatches")}function tT(t){return T(t,"categoryMatchesMap")}function _u(t){return T(t,"tokenTypeIdx")}var Qi={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,r,n,i,o){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}};var G;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(G||(G={}));var Ur={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Qi,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Ur);var z=class{constructor(e,r=Ur){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,o)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);let{time:a,value:l}=Lr(o),u=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${s}<-- <${i}> time: ${a}ms`),this.traceInitIndent--,l}else return o()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=se({},Ur,r);let n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,o=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Ur.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Ru;else if(this.config.lineTerminatorCharacters===Ur.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),S(e)?i={modes:{defaultMode:M(e)},defaultMode:cr}:(o=!1,i=M(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Au(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Su(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},x(i.modes,(a,l)=>{i.modes[l]=xt(a,u=>fe(u))});let s=P(i.modes);if(x(i.modes,(a,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Tu(a,s))}),b(this.lexerDefinitionErrors)){et(a);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=xu(a,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=u.charCodeToPatternIdxToConfig,this.emptyGroups=se({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!b(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let l=d(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}x(this.lexerDefinitionWarning,a=>{vr(a.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(qi?(this.chopInput=Ne,this.match=this.matchWithTest):(this.updateLastIndex=K,this.match=this.matchWithExec),o&&(this.handleModes=K),this.trackStartLines===!1&&(this.computeNewColumn=Ne),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=K),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let a=ee(this.canModeBeOptimized,(l,u,c)=>(u===!1&&l.push(c),l),[]);if(r.ensureOptimizations&&!b(a))throw Error(`Lexer Modes: < ${a.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{pu()}),this.TRACE_INIT("toFastProperties",()=>{_r(this)})})}tokenize(e,r=this.defaultMode){if(!b(this.lexerDefinitionErrors)){let i=d(this.lexerDefinitionErrors,o=>o.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,r)}tokenizeInternal(e,r){let n,i,o,s,a,l,u,c,f,p,E,O,y,I,A,g,h=e,N=h.length,C=0,Oe=0,vi=this.hasCustom?0:Math.floor(e.length/10),Me=new Array(vi),Li=[],Ar=this.trackStartLines?1:void 0,tt=this.trackStartLines?1:void 0,Sr=Ou(this.emptyGroups),Pc=this.trackStartLines,_i=this.config.lineTerminatorsPattern,nn=0,rt=[],Or=[],yr=[],hs=[];Object.freeze(hs);let Rr;function ms(){return rt}function ds(le){let Ie=je(le),wt=Or[Ie];return wt===void 0?hs:wt}let kc=le=>{if(yr.length===1&&le.tokenType.PUSH_MODE===void 0){let Ie=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(le);Li.push({offset:le.startOffset,line:le.startLine,column:le.startColumn,length:le.image.length,message:Ie})}else{yr.pop();let Ie=_e(yr);rt=this.patternIdxToConfig[Ie],Or=this.charCodeToPatternIdxToConfig[Ie],nn=rt.length;let wt=this.canModeBeOptimized[Ie]&&this.config.safeMode===!1;Or&&wt?Rr=ds:Rr=ms}};function gs(le){yr.push(le),Or=this.charCodeToPatternIdxToConfig[le],rt=this.patternIdxToConfig[le],nn=rt.length,nn=rt.length;let Ie=this.canModeBeOptimized[le]&&this.config.safeMode===!1;Or&&Ie?Rr=ds:Rr=ms}gs.call(this,r);let ve,Es=this.config.recoveryEnabled;for(;C<N;){l=null;let le=h.charCodeAt(C),Ie=Rr(le),wt=Ie.length;for(n=0;n<wt;n++){ve=Ie[n];let ye=ve.pattern;u=null;let ze=ve.short;if(ze!==!1?le===ze&&(l=ye):ve.isCustom===!0?(g=ye.exec(h,C,Me,Sr),g!==null?(l=g[0],g.payload!==void 0&&(u=g.payload)):l=null):(this.updateLastIndex(ye,C),l=this.match(ye,e,C)),l!==null){if(a=ve.longerAlt,a!==void 0){let nt=a.length;for(o=0;o<nt;o++){let He=rt[a[o]],St=He.pattern;if(c=null,He.isCustom===!0?(g=St.exec(h,C,Me,Sr),g!==null?(s=g[0],g.payload!==void 0&&(c=g.payload)):s=null):(this.updateLastIndex(St,C),s=this.match(St,e,C)),s&&s.length>l.length){l=s,u=c,ve=He;break}}}break}}if(l!==null){if(f=l.length,p=ve.group,p!==void 0&&(E=ve.tokenTypeIdx,O=this.createTokenInstance(l,C,E,ve.tokenType,Ar,tt,f),this.handlePayload(O,u),p===!1?Oe=this.addToken(Me,Oe,O):Sr[p].push(O)),e=this.chopInput(e,f),C=C+f,tt=this.computeNewColumn(tt,f),Pc===!0&&ve.canLineTerminator===!0){let ye=0,ze,nt;_i.lastIndex=0;do ze=_i.test(l),ze===!0&&(nt=_i.lastIndex-1,ye++);while(ze===!0);ye!==0&&(Ar=Ar+ye,tt=f-nt,this.updateTokenEndLineColumnLocation(O,p,nt,ye,Ar,tt,f))}this.handleModes(ve,kc,gs,O)}else{let ye=C,ze=Ar,nt=tt,He=Es===!1;for(;He===!1&&C<N;)for(e=this.chopInput(e,1),C++,i=0;i<nn;i++){let St=rt[i],Pi=St.pattern,xs=St.short;if(xs!==!1?h.charCodeAt(C)===xs&&(He=!0):St.isCustom===!0?He=Pi.exec(h,C,Me,Sr)!==null:(this.updateLastIndex(Pi,C),He=Pi.exec(e)!==null),He===!0)break}if(y=C-ye,tt=this.computeNewColumn(tt,y),A=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(h,ye,y,ze,nt,_e(yr)),Li.push({offset:ye,line:ze,column:nt,length:y,message:A}),Es===!1)break}}return this.hasCustom||(Me.length=Oe),{tokens:Me,groups:Sr,errors:Li}}handleModes(e,r,n,i){if(e.pop===!0){let o=e.push;r(i),o!==void 0&&n.call(this,o)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,r){return e.substring(r)}updateLastIndex(e,r){e.lastIndex=r}updateTokenEndLineColumnLocation(e,r,n,i,o,s,a){let l,u;r!==void 0&&(l=n===a-1,u=l?-1:0,i===1&&l===!0||(e.endLine=o+u,e.endColumn=s-1+-u))}computeNewColumn(e,r){return e+r}createOffsetOnlyToken(e,r,n,i){return{image:e,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(e,r,n,i,o,s){return{image:e,startOffset:r,startLine:o,startColumn:s,tokenTypeIdx:n,tokenType:i}}createFullToken(e,r,n,i,o,s,a){return{image:e,startOffset:r,endOffset:r+a-1,startLine:o,endLine:o,startColumn:s,endColumn:s+a-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(e,r,n){return e.push(n),r}addTokenUsingMemberAccess(e,r,n){return e[r]=n,r++,r}handlePayloadNoCustom(e,r){}handlePayloadWithCustom(e,r){r!==null&&(e.payload=r)}matchWithTest(e,r,n){return e.test(r)===!0?r.substring(n,e.lastIndex):null}matchWithExec(e,r){let n=e.exec(r);return n!==null?n[0]:null}};z.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";z.NA=/NOT_APPLICABLE/;function bt(t){return Ji(t)?t.LABEL:t.name}function Ji(t){return re(t.LABEL)&&t.LABEL!==""}var rT="parent",Pu="categories",ku="label",Mu="group",wu="push_mode",Fu="pop_mode",Uu="longer_alt",Du="line_breaks",Bu="start_chars_hint";function m(t){return nT(t)}function nT(t){let e=t.pattern,r={};if(r.name=t.name,fe(e)||(r.PATTERN=e),T(t,rT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return T(t,Pu)&&(r.CATEGORIES=t[Pu]),et([r]),T(t,ku)&&(r.LABEL=t[ku]),T(t,Mu)&&(r.GROUP=t[Mu]),T(t,Fu)&&(r.POP_MODE=t[Fu]),T(t,wu)&&(r.PUSH_MODE=t[wu]),T(t,Uu)&&(r.LONGER_ALT=t[Uu]),T(t,Du)&&(r.LINE_BREAKS=t[Du]),T(t,Bu)&&(r.START_CHARS_HINT=t[Bu]),r}var Pe=m({name:"EOF",pattern:z.NA});et([Pe]);function vt(t,e,r,n,i,o,s,a){return{image:e,startOffset:r,endOffset:n,startLine:i,endLine:o,startColumn:s,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function eo(t,e){return Je(t,e)}var Wn={buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:n}){return`Expecting ${Ji(t)?`--> ${bt(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:n,ruleName:i}){let o="Expecting: ",a=`
but found: '`+oe(e).image+"'";if(n)return o+n+a;{let l=ee(t,(p,E)=>p.concat(E),[]),u=d(l,p=>`[${d(p,E=>bt(E)).join(", ")}]`),f=`one of these possible Token sequences:
${d(u,(p,E)=>`  ${E+1}. ${p}`).join(`
`)}`;return o+f+a}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:n}){let i="Expecting: ",s=`
but found: '`+oe(e).image+"'";if(r)return i+r+s;{let l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${d(t,u=>`[${d(u,c=>bt(c)).join(",")}]`).join(" ,")}>`;return i+l+s}}};Object.freeze(Wn);var Gu={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},ke={buildDuplicateFoundError(t,e){function r(c){return c instanceof v?c.terminalType.name:c instanceof w?c.nonTerminalName:""}let n=t.name,i=oe(e),o=i.idx,s=Se(i),a=r(i),l=o>0,u=`->${s}${l?o:""}<- ${a?`with argument: ->${a}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=d(t.prefixPath,i=>bt(i)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=d(t.prefixPath,i=>bt(i)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx,n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=Se(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,r=d(t.leftRecursionPath,o=>o.name),n=`${e} --> ${r.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof de?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function $u(t,e){let r=new to(t,e);return r.resolveRefs(),r.errors}var to=class extends ge{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){x(_(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{let n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:ne.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var ro=class extends Qe{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=M(this.path.ruleStack).reverse(),this.occurrenceStack=M(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=r.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){b(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},jn=class extends ro{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let i=r.concat(n),o=new F({definition:i});this.possibleTokTypes=It(o),this.found=!0}}},pr=class extends Qe{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Vn=class extends pr{walkMany(e,r,n){if(e.idx===this.occurrence){let i=oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,r,n)}},Dr=class extends pr{walkManySep(e,r,n){if(e.idx===this.occurrence){let i=oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,r,n)}},zn=class extends pr{walkAtLeastOne(e,r,n){if(e.idx===this.occurrence){let i=oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,r,n)}},Br=class extends pr{walkAtLeastOneSep(e,r,n){if(e.idx===this.occurrence){let i=oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,r,n)}};function Hn(t,e,r=[]){r=M(r);let n=[],i=0;function o(a){return a.concat(X(t,i+1))}function s(a){let l=Hn(o(a),e,r);return n.concat(l)}for(;r.length<e&&i<t.length;){let a=t[i];if(a instanceof F)return s(a.definition);if(a instanceof w)return s(a.definition);if(a instanceof D)n=s(a.definition);else if(a instanceof Y){let l=a.definition.concat([new L({definition:a.definition})]);return s(l)}else if(a instanceof q){let l=[new F({definition:a.definition}),new L({definition:[new v({terminalType:a.separator})].concat(a.definition)})];return s(l)}else if(a instanceof j){let l=a.definition.concat([new L({definition:[new v({terminalType:a.separator})].concat(a.definition)})]);n=s(l)}else if(a instanceof L){let l=a.definition.concat([new L({definition:a.definition})]);n=s(l)}else{if(a instanceof V)return x(a.definition,l=>{b(l.definition)===!1&&(n=s(l.definition))}),n;if(a instanceof v)r.push(a.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:X(t,i)}),n}function Xn(t,e,r,n){let i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE",a=!1,l=e.length,u=l-n-1,c=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!b(f);){let p=f.pop();if(p===s){a&&_e(f).idx<=u&&f.pop();continue}let E=p.def,O=p.idx,y=p.ruleStack,I=p.occurrenceStack;if(b(E))continue;let A=E[0];if(A===i){let g={idx:O,def:X(E),ruleStack:Ze(y),occurrenceStack:Ze(I)};f.push(g)}else if(A instanceof v)if(O<l-1){let g=O+1,h=e[g];if(r(h,A.terminalType)){let N={idx:g,def:X(E),ruleStack:y,occurrenceStack:I};f.push(N)}}else if(O===l-1)c.push({nextTokenType:A.terminalType,nextTokenOccurrence:A.idx,ruleStack:y,occurrenceStack:I}),a=!0;else throw Error("non exhaustive match");else if(A instanceof w){let g=M(y);g.push(A.nonTerminalName);let h=M(I);h.push(A.idx);let N={idx:O,def:A.definition.concat(o,X(E)),ruleStack:g,occurrenceStack:h};f.push(N)}else if(A instanceof D){let g={idx:O,def:X(E),ruleStack:y,occurrenceStack:I};f.push(g),f.push(s);let h={idx:O,def:A.definition.concat(X(E)),ruleStack:y,occurrenceStack:I};f.push(h)}else if(A instanceof Y){let g=new L({definition:A.definition,idx:A.idx}),h=A.definition.concat([g],X(E)),N={idx:O,def:h,ruleStack:y,occurrenceStack:I};f.push(N)}else if(A instanceof q){let g=new v({terminalType:A.separator}),h=new L({definition:[g].concat(A.definition),idx:A.idx}),N=A.definition.concat([h],X(E)),C={idx:O,def:N,ruleStack:y,occurrenceStack:I};f.push(C)}else if(A instanceof j){let g={idx:O,def:X(E),ruleStack:y,occurrenceStack:I};f.push(g),f.push(s);let h=new v({terminalType:A.separator}),N=new L({definition:[h].concat(A.definition),idx:A.idx}),C=A.definition.concat([N],X(E)),Oe={idx:O,def:C,ruleStack:y,occurrenceStack:I};f.push(Oe)}else if(A instanceof L){let g={idx:O,def:X(E),ruleStack:y,occurrenceStack:I};f.push(g),f.push(s);let h=new L({definition:A.definition,idx:A.idx}),N=A.definition.concat([h],X(E)),C={idx:O,def:N,ruleStack:y,occurrenceStack:I};f.push(C)}else if(A instanceof V)for(let g=A.definition.length-1;g>=0;g--){let h=A.definition[g],N={idx:O,def:h.definition.concat(X(E)),ruleStack:y,occurrenceStack:I};f.push(N),f.push(s)}else if(A instanceof F)f.push({idx:O,def:A.definition.concat(X(E)),ruleStack:y,occurrenceStack:I});else if(A instanceof de)f.push(iT(A,O,y,I));else throw Error("non exhaustive match")}return c}function iT(t,e,r,n){let i=M(r);i.push(t.name);let o=M(n);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}var W;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(W||(W={}));function qn(t){if(t instanceof D||t==="Option")return W.OPTION;if(t instanceof L||t==="Repetition")return W.REPETITION;if(t instanceof Y||t==="RepetitionMandatory")return W.REPETITION_MANDATORY;if(t instanceof q||t==="RepetitionMandatoryWithSeparator")return W.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof j||t==="RepetitionWithSeparator")return W.REPETITION_WITH_SEPARATOR;if(t instanceof V||t==="Alternation")return W.ALTERNATION;throw Error("non exhaustive match")}function Wu(t,e,r,n,i,o){let s=Gr(t,e,r),a=Yu(s)?fr:Je;return o(s,n,a,i)}function ju(t,e,r,n,i,o){let s=$r(t,e,i,r),a=Yu(s)?fr:Je;return o(s[0],a,n)}function Vu(t,e,r,n){let i=t.length,o=ue(t,s=>ue(s,a=>a.length===1));if(e)return function(s){let a=d(s,l=>l.GATE);for(let l=0;l<i;l++){let u=t[l],c=u.length,f=a[l];if(!(f!==void 0&&f.call(this)===!1))e:for(let p=0;p<c;p++){let E=u[p],O=E.length;for(let y=0;y<O;y++){let I=this.LA(y+1);if(r(I,E[y])===!1)continue e}return l}}};if(o&&!n){let s=d(t,l=>te(l)),a=ee(s,(l,u,c)=>(x(u,f=>{T(l,f.tokenTypeIdx)||(l[f.tokenTypeIdx]=c),x(f.categoryMatches,p=>{T(l,p)||(l[p]=c)})}),l),{});return function(){let l=this.LA(1);return a[l.tokenTypeIdx]}}else return function(){for(let s=0;s<i;s++){let a=t[s],l=a.length;e:for(let u=0;u<l;u++){let c=a[u],f=c.length;for(let p=0;p<f;p++){let E=this.LA(p+1);if(r(E,c[p])===!1)continue e}return s}}}}function zu(t,e,r){let n=ue(t,o=>o.length===1),i=t.length;if(n&&!r){let o=te(t);if(o.length===1&&b(o[0].categoryMatches)){let a=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}else{let s=ee(o,(a,l,u)=>(a[l.tokenTypeIdx]=!0,x(l.categoryMatches,c=>{a[c]=!0}),a),[]);return function(){let a=this.LA(1);return s[a.tokenTypeIdx]===!0}}}else return function(){e:for(let o=0;o<i;o++){let s=t[o],a=s.length;for(let l=0;l<a;l++){let u=this.LA(l+1);if(e(u,s[l])===!1)continue e}return!0}return!1}}var io=class extends Qe{constructor(e,r,n){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,n,i){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(e,r,n){this.checkIsTarget(e,W.OPTION,r,n)||super.walkOption(e,r,n)}walkAtLeastOne(e,r,n){this.checkIsTarget(e,W.REPETITION_MANDATORY,r,n)||super.walkOption(e,r,n)}walkAtLeastOneSep(e,r,n){this.checkIsTarget(e,W.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}walkMany(e,r,n){this.checkIsTarget(e,W.REPETITION,r,n)||super.walkOption(e,r,n)}walkManySep(e,r,n){this.checkIsTarget(e,W.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}},Yn=class extends ge{constructor(e,r,n){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,W.OPTION)}visitRepetition(e){this.checkIsTarget(e,W.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,W.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,W.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,W.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,W.ALTERNATION)}};function Ku(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function no(t){let e=[""];for(let r=0;r<t.length;r++){let n=t[r],i=[];for(let o=0;o<e.length;o++){let s=e[o];i.push(s+"_"+n.tokenTypeIdx);for(let a=0;a<n.categoryMatches.length;a++){let l="_"+n.categoryMatches[a];i.push(s+l)}}e=i}return e}function oT(t,e,r){for(let n=0;n<t.length;n++){if(n===r)continue;let i=t[n];for(let o=0;o<e.length;o++){let s=e[o];if(i[s]===!0)return!1}}return!0}function Hu(t,e){let r=d(t,s=>Hn([s],1)),n=Ku(r.length),i=d(r,s=>{let a={};return x(s,l=>{let u=no(l.partialPath);x(u,c=>{a[c]=!0})}),a}),o=r;for(let s=1;s<=e;s++){let a=o;o=Ku(a.length);for(let l=0;l<a.length;l++){let u=a[l];for(let c=0;c<u.length;c++){let f=u[c].partialPath,p=u[c].suffixDef,E=no(f);if(oT(i,E,l)||b(p)||f.length===e){let y=n[l];if(Zn(y,f)===!1){y.push(f);for(let I=0;I<E.length;I++){let A=E[I];i[l][A]=!0}}}else{let y=Hn(p,s+1,f);o[l]=o[l].concat(y),x(y,I=>{let A=no(I.partialPath);x(A,g=>{i[l][g]=!0})})}}}}return n}function Gr(t,e,r,n){let i=new Yn(t,W.ALTERNATION,n);return e.accept(i),Hu(i.result,r)}function $r(t,e,r,n){let i=new Yn(t,r);e.accept(i);let o=i.result,a=new io(e,t,r).startWalking(),l=new F({definition:o}),u=new F({definition:a});return Hu([l,u],n)}function Zn(t,e){e:for(let r=0;r<t.length;r++){let n=t[r];if(n.length===e.length){for(let i=0;i<n.length;i++){let o=e[i],s=n[i];if((o===s||s.categoryMatchesMap[o.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Xu(t,e){return t.length<e.length&&ue(t,(r,n)=>{let i=e[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function Yu(t){return ue(t,e=>ue(e,r=>ue(r,n=>b(n.categoryMatches))))}function qu(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return d(e,r=>Object.assign({type:ne.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Zu(t,e,r,n){let i=me(t,l=>sT(l,r)),o=pT(t,e,r),s=me(t,l=>uT(l,r)),a=me(t,l=>lT(l,t,n,r));return i.concat(o,s,a)}function sT(t,e){let r=new oo;t.accept(r);let n=r.allProductions,i=Gi(n,aT),o=Ae(i,a=>a.length>1);return d(_(o),a=>{let l=oe(a),u=e.buildDuplicateFoundError(t,a),c=Se(l),f={message:u,type:ne.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:c,occurrence:l.idx},p=Qu(l);return p&&(f.parameter=p),f})}function aT(t){return`${Se(t)}_#_${t.idx}_#_${Qu(t)}`}function Qu(t){return t instanceof v?t.terminalType.name:t instanceof w?t.nonTerminalName:""}var oo=class extends ge{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function lT(t,e,r,n){let i=[];if(ee(e,(s,a)=>a.name===t.name?s+1:s,0)>1){let s=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});i.push({message:s,type:ne.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function Ju(t,e,r){let n=[],i;return B(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:ne.INVALID_RULE_OVERRIDE,ruleName:t})),n}function ao(t,e,r,n=[]){let i=[],o=Qn(e.definition);if(b(o))return[];{let s=t.name;B(o,t)&&i.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:ne.LEFT_RECURSION,ruleName:s});let l=Et(o,n.concat([t])),u=me(l,c=>{let f=M(n);return f.push(c),ao(t,c,r,f)});return i.concat(u)}}function Qn(t){let e=[];if(b(t))return e;let r=oe(t);if(r instanceof w)e.push(r.referencedRule);else if(r instanceof F||r instanceof D||r instanceof Y||r instanceof q||r instanceof j||r instanceof L)e=e.concat(Qn(r.definition));else if(r instanceof V)e=te(d(r.definition,o=>Qn(o.definition)));else if(!(r instanceof v))throw Error("non exhaustive match");let n=Rt(r),i=t.length>1;if(n&&i){let o=X(t);return e.concat(Qn(o))}else return e}var Kr=class extends ge{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function ec(t,e){let r=new Kr;t.accept(r);let n=r.alternations;return me(n,o=>{let s=Ze(o.definition);return me(s,(a,l)=>{let u=Xn([a],[],Je,1);return b(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:o,emptyChoiceIdx:l}),type:ne.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:o.idx,alternative:l+1}]:[]})})}function tc(t,e,r){let n=new Kr;t.accept(n);let i=n.alternations;return i=xt(i,s=>s.ignoreAmbiguities===!0),me(i,s=>{let a=s.idx,l=s.maxLookahead||e,u=Gr(a,t,l,s),c=cT(u,s,t,r),f=fT(u,s,t,r);return c.concat(f)})}var so=class extends ge{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function uT(t,e){let r=new Kr;t.accept(r);let n=r.alternations;return me(n,o=>o.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:o}),type:ne.TOO_MANY_ALTS,ruleName:t.name,occurrence:o.idx}]:[])}function rc(t,e,r){let n=[];return x(t,i=>{let o=new so;i.accept(o);let s=o.allProductions;x(s,a=>{let l=qn(a),u=a.maxLookahead||e,c=a.idx,p=$r(c,i,l,u)[0];if(b(te(p))){let E=r.buildEmptyRepetitionError({topLevelRule:i,repetition:a});n.push({message:E,type:ne.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function cT(t,e,r,n){let i=[],o=ee(t,(a,l,u)=>(e.definition[u].ignoreAmbiguities===!0||x(l,c=>{let f=[u];x(t,(p,E)=>{u!==E&&Zn(p,c)&&e.definition[E].ignoreAmbiguities!==!0&&f.push(E)}),f.length>1&&!Zn(i,c)&&(i.push(c),a.push({alts:f,path:c}))}),a),[]);return d(o,a=>{let l=d(a.alts,c=>c+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:l,prefixPath:a.path}),type:ne.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:a.alts}})}function fT(t,e,r,n){let i=ee(t,(s,a,l)=>{let u=d(a,c=>({idx:l,path:c}));return s.concat(u)},[]);return Ke(me(i,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];let l=s.idx,u=s.path,c=ce(i,p=>e.definition[p.idx].ignoreAmbiguities!==!0&&p.idx<l&&Xu(p.path,u));return d(c,p=>{let E=[p.idx+1,l+1],O=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:E,prefixPath:p.path}),type:ne.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:O,alternatives:E}})}))}function pT(t,e,r){let n=[],i=d(e,o=>o.name);return x(t,o=>{let s=o.name;if(B(i,s)){let a=r.buildNamespaceConflictError(o);n.push({message:a,type:ne.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),n}function nc(t){let e=nr(t,{errMsgProvider:Gu}),r={};return x(t.rules,n=>{r[n.name]=n}),$u(r,e.errMsgProvider)}function ic(t){return t=nr(t,{errMsgProvider:ke}),Zu(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var oc="MismatchedTokenException",sc="NoViableAltException",ac="EarlyExitException",lc="NotAllInputParsedException",uc=[oc,sc,ac,lc];Object.freeze(uc);function At(t){return B(uc,t.name)}var hr=class extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Lt=class extends hr{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=oc}},Wr=class extends hr{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=sc}},jr=class extends hr{constructor(e,r){super(e,r),this.name=lc}},Vr=class extends hr{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=ac}};var lo={},co="InRuleRecoveryException",uo=class extends Error{constructor(e){super(e),this.name=co}},Jn=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=T(e,"recoveryEnabled")?e.recoveryEnabled:Ee.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=hT)}getTokenToInsert(e){let r=vt(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,n,i){let o=this.findReSyncTokenType(),s=this.exportLexerState(),a=[],l=!1,u=this.LA(1),c=this.LA(1),f=()=>{let p=this.LA(0),E=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:p,ruleName:this.getCurrRuleFullName()}),O=new Lt(E,u,this.LA(0));O.resyncedTokens=Ze(a),this.SAVE_ERROR(O)};for(;!l;)if(this.tokenMatcher(c,i)){f();return}else if(n.call(this)){f(),e.apply(this,r);return}else this.tokenMatcher(c,o)?l=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,a));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(e,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r)))}getFollowsForInRuleRecovery(e,r){let n=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new uo("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||b(r))return!1;let n=this.LA(1);return We(r,o=>this.tokenMatcher(n,o))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return B(n,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),r=this.LA(1),n=2;for(;;){let i=We(e,o=>eo(r,o));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return lo;let e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return d(e,(n,i)=>i===0?lo:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=d(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return te(e)}getFollowSetFromFollowKey(e){if(e===lo)return[Pe];let r=e.ruleName+e.idxInCallingRule+wn+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,Pe)||r.push(e),r}reSyncTo(e){let r=[],n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return Ze(r)}attemptInRepetitionRecovery(e,r,n,i,o,s,a){}getCurrentGrammarPath(e,r){let n=this.getHumanReadableRuleStack(),i=M(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return d(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function hT(t,e,r,n,i,o,s){let a=this.getKeyForAutomaticLookahead(n,i),l=this.firstAfterRepMap[a];if(l===void 0){let p=this.getCurrRuleFullName(),E=this.getGAstProductions()[p];l=new o(E,i).startWalking(),this.firstAfterRepMap[a]=l}let u=l.token,c=l.occurrence,f=l.isEndOfRule;this.RULE_STACK.length===1&&f&&u===void 0&&(u=Pe,c=1),!(u===void 0||c===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,c,s)&&this.tryInRepetitionRecovery(t,e,r,u)}function ei(t,e,r){return r|e|t}var zr=class{constructor(e){var r;this.maxLookahead=(r=e?.maxLookahead)!==null&&r!==void 0?r:Ee.maxLookahead}validate(e){let r=this.validateNoLeftRecursion(e.rules);if(b(r)){let n=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...n,...i,...o]}return r}validateNoLeftRecursion(e){return me(e,r=>ao(r,r,ke))}validateEmptyOrAlternatives(e){return me(e,r=>ec(r,ke))}validateAmbiguousAlternationAlternatives(e,r){return me(e,n=>tc(n,r,ke))}validateSomeNonEmptyLookaheadPath(e,r){return rc(e,r,ke)}buildLookaheadForAlternation(e){return Wu(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Vu)}buildLookaheadForOptional(e){return ju(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,qn(e.prodType),zu)}};var ri=class{initLooksAhead(e){this.dynamicTokensEnabled=T(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Ee.dynamicTokensEnabled,this.maxLookahead=T(e,"maxLookahead")?e.maxLookahead:Ee.maxLookahead,this.lookaheadStrategy=T(e,"lookaheadStrategy")?e.lookaheadStrategy:new zr({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){x(e,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:n,repetition:i,option:o,repetitionMandatory:s,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:l}=mT(r);x(n,u=>{let c=u.idx===0?"":u.idx;this.TRACE_INIT(`${Se(u)}${c}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:r,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),p=ei(this.fullRuleNameToShort[r.name],256,u.idx);this.setLaFuncCache(p,f)})}),x(i,u=>{this.computeLookaheadFunc(r,u.idx,768,"Repetition",u.maxLookahead,Se(u))}),x(o,u=>{this.computeLookaheadFunc(r,u.idx,512,"Option",u.maxLookahead,Se(u))}),x(s,u=>{this.computeLookaheadFunc(r,u.idx,1024,"RepetitionMandatory",u.maxLookahead,Se(u))}),x(a,u=>{this.computeLookaheadFunc(r,u.idx,1536,"RepetitionMandatoryWithSeparator",u.maxLookahead,Se(u))}),x(l,u=>{this.computeLookaheadFunc(r,u.idx,1280,"RepetitionWithSeparator",u.maxLookahead,Se(u))})})})}computeLookaheadFunc(e,r,n,i,o,s){this.TRACE_INIT(`${s}${r===0?"":r}`,()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),l=ei(this.fullRuleNameToShort[e.name],n,r);this.setLaFuncCache(l,a)})}getKeyForAutomaticLookahead(e,r){let n=this.getLastExplicitRuleShortName();return ei(n,e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}},fo=class extends ge{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},ti=new fo;function mT(t){ti.reset(),t.accept(ti);let e=ti.dslMethods;return ti.reset(),e}function mo(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function go(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function cc(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function fc(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}var dT="name";function Eo(t,e){Object.defineProperty(t,dT,{enumerable:!1,configurable:!0,writable:!1,value:e})}function gT(t,e){let r=P(t),n=r.length;for(let i=0;i<n;i++){let o=r[i],s=t[o],a=s.length;for(let l=0;l<a;l++){let u=s[l];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}function pc(t,e){let r=function(){};Eo(r,t+"BaseSemantics");let n={visit:function(i,o){if(S(i)&&(i=i[0]),!fe(i))return this[i.name](i.children,o)},validateVisitor:function(){let i=ET(this,e);if(!b(i)){let o=d(i,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${o.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=e,r}function hc(t,e,r){let n=function(){};Eo(n,t+"BaseSemanticsWithDefaults");let i=Object.create(r.prototype);return x(e,o=>{i[o]=gT}),n.prototype=i,n.prototype.constructor=n,n}var xo;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(xo||(xo={}));function ET(t,e){return xT(t,e)}function xT(t,e){let r=ce(e,i=>he(t[i])===!1),n=d(r,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:xo.MISSING_METHOD,methodName:i}));return Ke(n)}var si=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=T(e,"nodeLocationTracking")?e.nodeLocationTracking:Ee.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=K,this.cstFinallyStateUpdate=K,this.cstPostTerminal=K,this.cstPostNonTerminal=K,this.cstPostRule=K;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=go,this.setNodeLocationFromNode=go,this.cstPostRule=K,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=K,this.setNodeLocationFromNode=K,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=mo,this.setNodeLocationFromNode=mo,this.cstPostRule=K,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=K,this.setNodeLocationFromNode=K,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=K,this.setNodeLocationFromNode=K,this.cstPostRule=K,this.setInitialNodeLocation=K;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){let r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(e,r){let n=this.CST_STACK[this.CST_STACK.length-1];cc(n,r,e),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(e,r){let n=this.CST_STACK[this.CST_STACK.length-1];fc(n,r,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(fe(this.baseCstVisitorConstructor)){let e=pc(this.className,P(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(fe(this.baseCstVisitorWithDefaultsConstructor)){let e=hc(this.className,P(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var ai=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):mr}LA(e){let r=this.currIdx+e;return r<0||this.tokVectorLength<=r?mr:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var li=class{ACTION(e){return e.call(this)}consume(e,r,n){return this.consumeInternal(r,e,n)}subrule(e,r,n){return this.subruleInternal(r,e,n)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,n=dr){if(B(this.definedRulesNames,e)){let s={message:ke.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ne.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);let i=this.defineRule(e,r,n);return this[e]=i,i}OVERRIDE_RULE(e,r,n=dr){let i=Ju(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let o=this.defineRule(e,r,n);return this[e]=o,o}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);let n=this.saveRecogState();try{return e.apply(this,r),!0}catch(i){if(At(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Mn(_(this.gastProductionsCache))}};var ui=class{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=fr,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},T(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(S(e)){if(b(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(S(e))this.tokensMap=ee(e,(o,s)=>(o[s.name]=s,o),{});else if(T(e,"modes")&&ue(te(_(e.modes)),_u)){let o=te(_(e.modes)),s=ir(o);this.tokensMap=ee(s,(a,l)=>(a[l.name]=l,a),{})}else if($(e))this.tokensMap=M(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Pe;let n=T(e,"modes")?te(_(e.modes)):_(e),i=ue(n,o=>b(o.categoryMatches));this.tokenMatcher=i?fr:Je,et(_(this.tokensMap))}defineRule(e,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=T(n,"resyncEnabled")?n.resyncEnabled:dr.resyncEnabled,o=T(n,"recoveryValueFunc")?n.recoveryValueFunc:dr.recoveryValueFunc,s=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;let a;return this.outputCst===!0?a=function(...c){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),r.apply(this,c);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}}:a=function(...c){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),r.apply(this,c)}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,n){let i=this.RULE_STACK.length===1,o=r&&!this.isBackTracking()&&this.recoveryEnabled;if(At(e)){let s=e;if(o){let a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(s.resyncedTokens=this.reSyncTo(a),this.outputCst){let l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return n(e);else{if(this.outputCst){let l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,s.partialCstResult=l}throw s}}else{if(i)return this.moveToTerminatedState(),n(e);throw s}}else throw e}optionInternal(e,r){let n=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(e,r,n)}optionInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof e!="function"){o=e.DEF;let s=e.GATE;if(s!==void 0){let a=i;i=()=>s.call(this)&&a.call(this)}}else o=e;if(i.call(this)===!0)return o.call(this)}atLeastOneInternal(e,r){let n=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,r,n)}atLeastOneInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof r!="function"){o=r.DEF;let s=r.GATE;if(s!==void 0){let a=i;i=()=>s.call(this)&&a.call(this)}}else o=r;if(i.call(this)===!0){let s=this.doSingleRepetition(o);for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o)}else throw this.raiseEarlyExitException(e,W.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],i,1024,e,zn)}atLeastOneSepFirstInternal(e,r){let n=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,r,n)}atLeastOneSepFirstInternalLogic(e,r,n){let i=r.DEF,o=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let a=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,a,i,Br],a,1536,e,Br)}else throw this.raiseEarlyExitException(e,W.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(e,r){let n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,r,n)}manyInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof r!="function"){o=r.DEF;let a=r.GATE;if(a!==void 0){let l=i;i=()=>a.call(this)&&l.call(this)}}else o=r;let s=!0;for(;i.call(this)===!0&&s===!0;)s=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],i,768,e,Vn,s)}manySepFirstInternal(e,r){let n=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,r,n)}manySepFirstInternalLogic(e,r,n){let i=r.DEF,o=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let a=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,a,i,Dr],a,1280,e,Dr)}}repetitionSepSecondInternal(e,r,n,i,o){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,n,i,o],n,1536,e,o)}doSingleRepetition(e){let r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){let n=this.getKeyForAutomaticLookahead(256,r),i=S(e)?e:e.DEF,s=this.getLaFuncFromCache(n).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new jr(r,e))}}subruleInternal(e,r,n){let i;try{let o=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=e.apply(this,o),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),i}catch(o){throw this.subruleInternalError(o,n,e.ruleName)}}subruleInternalError(e,r,n){throw At(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,r,n){let i;try{let o=this.LA(1);this.tokenMatcher(o,e)===!0?(this.consumeToken(),i=o):this.consumeInternalError(e,o,n)}catch(o){i=this.consumeInternalRecovery(e,r,o)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,i),i}consumeInternalError(e,r,n){let i,o=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Lt(i,r,o))}consumeInternalRecovery(e,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,i)}catch(o){throw o.name===co?n:o}}else throw n}saveRecogState(){let e=this.errors,r=M(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Pe)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var ci=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=T(e,"errorMessageProvider")?e.errorMessageProvider:Ee.errorMessageProvider}SAVE_ERROR(e){if(At(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:M(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return M(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,n){let i=this.getCurrRuleFullName(),o=this.getGAstProductions()[i],a=$r(e,o,r,this.maxLookahead)[0],l=[];for(let c=1;c<=this.maxLookahead;c++)l.push(this.LA(c));let u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:l,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new Vr(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){let n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],o=Gr(e,i,this.maxLookahead),s=[];for(let u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));let a=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:s,previous:a,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Wr(l,this.LA(1),a))}};var fi=class{initContentAssist(){}computeContentAssist(e,r){let n=this.gastProductionsCache[e];if(fe(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Xn([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let r=oe(e.ruleStack),i=this.getGAstProductions()[r];return new jn(i,e).startWalking()}};var mi={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(mi);var mc=!0,dc=Math.pow(2,8)-1,Ec=m({name:"RECORDING_PHASE_TOKEN",pattern:z.NA});et([Ec]);var xc=vt(Ec,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(xc);var AT={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},pi=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let r=e>0?e:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,e,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,e,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${r}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,r,n){return this.consumeInternalRecord(r,e,n)},this.subrule=function(e,r,n){return this.subruleInternalRecord(r,e,n)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let r=0;r<10;r++){let n=r>0?r:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return mr}topLevelRuleRecord(e,r){try{let n=new de({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,r){return Xr.call(this,D,e,r)}atLeastOneInternalRecord(e,r){Xr.call(this,Y,r,e)}atLeastOneSepFirstInternalRecord(e,r){Xr.call(this,q,r,e,mc)}manyInternalRecord(e,r){Xr.call(this,L,r,e)}manySepFirstInternalRecord(e,r){Xr.call(this,j,r,e,mc)}orInternalRecord(e,r){return ST.call(this,e,r)}subruleInternalRecord(e,r,n){if(hi(r),!e||T(e,"ruleName")===!1){let a=new Error(`<SUBRULE${gc(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let i=_e(this.recordingProdStack),o=e.ruleName,s=new w({idx:r,nonTerminalName:o,label:n?.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?AT:mi}consumeInternalRecord(e,r,n){if(hi(r),!Zi(e)){let s=new Error(`<CONSUME${gc(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=_e(this.recordingProdStack),o=new v({idx:r,terminalType:e,label:n?.LABEL});return i.definition.push(o),xc}};function Xr(t,e,r,n=!1){hi(r);let i=_e(this.recordingProdStack),o=he(e)?e:e.DEF,s=new t({definition:[],idx:r});return n&&(s.separator=e.SEP),T(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),mi}function ST(t,e){hi(e);let r=_e(this.recordingProdStack),n=S(t)===!1,i=n===!1?t:t.DEF,o=new V({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});T(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);let s=br(i,a=>he(a.GATE));return o.hasPredicates=s,r.definition.push(o),x(i,a=>{let l=new F({definition:[]});o.definition.push(l),T(a,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=a.IGNORE_AMBIGUITIES:T(a,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),a.ALT.call(this),this.recordingProdStack.pop()}),mi}function gc(t){return t===0?"":`${t}`}function hi(t){if(t<0||t>dc){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${dc+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var di=class{initPerformanceTracer(e){if(T(e,"traceInitPerf")){let r=e.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=Ee.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);let{time:i,value:o}=Lr(r),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${n}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,o}else return r()}};function Tc(t,e){e.forEach(r=>{let n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;let o=Object.getOwnPropertyDescriptor(n,i);o&&(o.get||o.set)?Object.defineProperty(t.prototype,i,o):t.prototype[i]=r.prototype[i]})})}var mr=vt(Pe,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(mr);var Ee=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Wn,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),dr=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),ne;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ne||(ne={}));var Yr=class t{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{_r(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),x(this.definedRulesNames,i=>{let s=this[i].originalGrammarAction,a;this.TRACE_INIT(`${i} Rule`,()=>{a=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=a})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=nc({rules:_(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(b(n)&&this.skipValidations===!1){let i=ic({rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),errMsgProvider:ke,grammarName:r}),o=qu({lookaheadStrategy:this.lookaheadStrategy,rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,o)}}),b(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let i=fu(_(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,o;(o=(i=this.lookaheadStrategy).initialize)===null||o===void 0||o.call(i,{rules:_(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(_(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!b(this.definitionErrors))throw e=d(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(e,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),T(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=T(r,"skipValidations")?r.skipValidations:Ee.skipValidations}};Yr.DEFER_DEFINITION_ERRORS_HANDLING=!1;Tc(Yr,[Jn,ri,si,ai,ui,li,ci,fi,pi,di]);var qr=class extends Yr{constructor(e,r=Ee){let n=M(r);n.outputCst=!0,super(e,n)}};var yT=m({name:"WhiteSpace",pattern:/\s+/,group:z.SKIPPED}),RT=m({name:"BlockComment",pattern:/\/\*[\s\S]*?\*\//,group:z.SKIPPED}),Ao=m({name:"DoubleLBrace",pattern:/\{\{/}),So=m({name:"DoubleRBrace",pattern:/\}\}/}),Oo=m({name:"ChildOrSelfOf",pattern:/<<!/}),yo=m({name:"DescendantOrSelfOf",pattern:/<</}),Ro=m({name:"ChildOf",pattern:/<!/}),Io=m({name:"ParentOrSelfOf",pattern:/>>!/}),No=m({name:"AncestorOrSelfOf",pattern:/>>/}),Co=m({name:"ParentOf",pattern:/>!/}),gi=m({name:"MemberOf",pattern:/\^/}),bo=m({name:"NotEquals",pattern:/!=/}),vo=m({name:"LessThanOrEquals",pattern:/<=/}),Lo=m({name:"GreaterThanOrEquals",pattern:/>=/}),Ve=m({name:"Equals",pattern:/=/}),Ei=m({name:"DescendantOf",pattern:/</}),xi=m({name:"AncestorOf",pattern:/>/}),Zr=m({name:"Wildcard",pattern:/\*/}),gr=m({name:"And",pattern:/AND/i}),Er=m({name:"Or",pattern:/OR/i}),_o=m({name:"Minus",pattern:/MINUS/i}),Po=m({name:"DescendantOfKeyword",pattern:/descendantOf/}),ko=m({name:"DescendantOrSelfOfKeyword",pattern:/descendantOrSelfOf/}),Mo=m({name:"ChildOfKeyword",pattern:/childOf/}),wo=m({name:"ChildOrSelfOfKeyword",pattern:/childOrSelfOf/}),Fo=m({name:"AncestorOfKeyword",pattern:/ancestorOf/}),Uo=m({name:"AncestorOrSelfOfKeyword",pattern:/ancestorOrSelfOf/}),Do=m({name:"ParentOfKeyword",pattern:/parentOf/}),Bo=m({name:"ParentOrSelfOfKeyword",pattern:/parentOrSelfOf/}),Go=m({name:"MemberOfKeyword",pattern:/memberOf/}),$o=m({name:"ReverseOf",pattern:/reverseOf/i}),Ko=m({name:"TermKeyword",pattern:/term/}),Wo=m({name:"Language",pattern:/language/}),jo=m({name:"TypeKeyword",pattern:/typeId|type/}),Vo=m({name:"Dialect",pattern:/dialectId|dialect/}),zo=m({name:"ModuleId",pattern:/moduleId/}),IT=m({name:"EffectiveTime",pattern:/effectiveTime/}),Ho=m({name:"Active",pattern:/active/}),Xo=m({name:"DefinitionStatusId",pattern:/definitionStatusId/}),Ti=m({name:"Preferred",pattern:/PREFERRED/}),Ai=m({name:"Acceptable",pattern:/ACCEPTABLE/}),Yo=m({name:"Primitive",pattern:/PRIMITIVE/}),qo=m({name:"Defined",pattern:/DEFINED/}),Si=m({name:"Match",pattern:/match/}),Oi=m({name:"Wild",pattern:/wild/}),yi=m({name:"True",pattern:/true/}),Ri=m({name:"False",pattern:/false/}),_t=m({name:"LParen",pattern:/\(/}),Pt=m({name:"RParen",pattern:/\)/}),Zo=m({name:"LBrace",pattern:/\{/}),Qo=m({name:"RBrace",pattern:/\}/}),Jo=m({name:"LBracket",pattern:/\[/}),es=m({name:"RBracket",pattern:/\]/}),xr=m({name:"Colon",pattern:/:/}),Qr=m({name:"Comma",pattern:/,/}),Ii=m({name:"Hash",pattern:/#/}),ts=m({name:"DotDot",pattern:/\.\./}),rs=m({name:"Dot",pattern:/\./}),NT=m({name:"Pipe",pattern:/\|/}),Ni=m({name:"SctId",pattern:/\d{6,18}/}),Jr=m({name:"Integer",pattern:/\d+/}),kt=m({name:"StringLiteral",pattern:/"([^"\\]|\\.)*"/}),ns=m({name:"TermString",pattern:/\|[^|]*\|/}),Ci=m({name:"DialectAlias",pattern:/[a-z]{2}-[A-Z]{2}/}),is=m({name:"AlternateIdCode",pattern:/\d+(?:-[a-zA-Z0-9]+)+/}),os=m({name:"DecimalValue",pattern:/[+-]?\d+\.(?!\d{6})\d+/}),ss=m({name:"SignedInteger",pattern:/[+-]\d+/}),en=m({name:"Identifier",pattern:/[a-zA-Z][a-zA-Z0-9_]*/}),as=[yT,RT,Ao,So,Oo,yo,Ro,Io,No,Co,bo,vo,Lo,Ve,Ei,xi,gi,Zr,gr,Er,_o,ko,Po,wo,Mo,Uo,Fo,Bo,Do,Go,$o,Xo,IT,zo,jo,Wo,Vo,Ko,Ho,Si,Oi,Ti,Ai,Yo,qo,yi,Ri,_t,Pt,Zo,Qo,Jo,es,xr,Qr,Ii,ts,rs,ns,NT,is,os,ss,Ni,Jr,kt,Ci,en],CT=new z(as);function Ac(t){return CT.tokenize(t)}var ls=class extends qr{constructor(){super(as,{recoveryEnabled:!0});this.expressionConstraint=this.RULE("expressionConstraint",()=>{this.SUBRULE(this.simpleOrRefinedExpression),this.MANY(()=>{this.SUBRULE(this.booleanOperator),this.SUBRULE2(this.simpleOrRefinedExpression)})});this.simpleOrRefinedExpression=this.RULE("simpleOrRefinedExpression",()=>{this.SUBRULE(this.subExpressionConstraint),this.OPTION(()=>{this.CONSUME(xr),this.SUBRULE(this.eclRefinement)})});this.booleanOperator=this.RULE("booleanOperator",()=>{this.OR([{ALT:()=>this.CONSUME(gr)},{ALT:()=>this.CONSUME(Er)},{ALT:()=>this.CONSUME(_o)}])});this.subExpressionConstraint=this.RULE("subExpressionConstraint",()=>{this.OPTION(()=>{this.SUBRULE(this.constraintOperator)}),this.OPTION2(()=>{this.CONSUME(gi)}),this.SUBRULE(this.eclFocusConcept),this.MANY(()=>{this.SUBRULE(this.filterConstraint)}),this.MANY2(()=>{this.CONSUME(rs),this.SUBRULE(this.eclAttributeName)})});this.constraintOperator=this.RULE("constraintOperator",()=>{this.OR([{ALT:()=>this.CONSUME(Oo)},{ALT:()=>this.CONSUME(yo)},{ALT:()=>this.CONSUME(Ro)},{ALT:()=>this.CONSUME(Ei)},{ALT:()=>this.CONSUME(Io)},{ALT:()=>this.CONSUME(No)},{ALT:()=>this.CONSUME(Co)},{ALT:()=>this.CONSUME(xi)},{ALT:()=>this.CONSUME(gi)},{ALT:()=>this.CONSUME(ko)},{ALT:()=>this.CONSUME(Po)},{ALT:()=>this.CONSUME(wo)},{ALT:()=>this.CONSUME(Mo)},{ALT:()=>this.CONSUME(Uo)},{ALT:()=>this.CONSUME(Fo)},{ALT:()=>this.CONSUME(Bo)},{ALT:()=>this.CONSUME(Do)},{ALT:()=>this.CONSUME(Go)}])});this.eclFocusConcept=this.RULE("eclFocusConcept",()=>{this.OR([{ALT:()=>this.SUBRULE(this.eclConceptReference)},{ALT:()=>this.CONSUME(Zr)},{ALT:()=>{this.CONSUME(_t),this.SUBRULE(this.expressionConstraint),this.CONSUME(Pt)}},{ALT:()=>this.SUBRULE(this.alternateIdentifier)}])});this.eclConceptReference=this.RULE("eclConceptReference",()=>{this.CONSUME(Ni),this.OPTION(()=>{this.CONSUME(ns)})});this.alternateIdentifier=this.RULE("alternateIdentifier",()=>{this.CONSUME(en),this.CONSUME(Ii),this.OR([{ALT:()=>this.CONSUME(kt)},{ALT:()=>this.CONSUME(is)},{ALT:()=>this.CONSUME(Ni)},{ALT:()=>this.CONSUME2(en)}])});this.eclRefinement=this.RULE("eclRefinement",()=>{this.SUBRULE(this.eclRefinementItem),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(gr)},{ALT:()=>this.CONSUME(Er)},{ALT:()=>this.CONSUME(Qr)}]),this.SUBRULE2(this.eclRefinementItem)})});this.eclRefinementItem=this.RULE("eclRefinementItem",()=>{this.OPTION(()=>{this.SUBRULE(this.cardinality)}),this.OR([{ALT:()=>this.SUBRULE(this.eclAttributeGroup)},{ALT:()=>this.SUBRULE(this.subAttributeSet)}])});this.eclAttributeGroup=this.RULE("eclAttributeGroup",()=>{this.CONSUME(Zo),this.SUBRULE(this.eclAttributeSet),this.CONSUME(Qo)});this.eclAttributeSet=this.RULE("eclAttributeSet",()=>{this.SUBRULE(this.subAttributeSet),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(gr)},{ALT:()=>this.CONSUME(Er)},{ALT:()=>this.CONSUME(Qr)}]),this.SUBRULE2(this.subAttributeSet)})});this.subAttributeSet=this.RULE("subAttributeSet",()=>{this.OR([{GATE:this.BACKTRACK(this.parenthesizedAttributeSet),ALT:()=>this.SUBRULE(this.parenthesizedAttributeSet)},{ALT:()=>this.SUBRULE(this.eclAttribute)}])});this.parenthesizedAttributeSet=this.RULE("parenthesizedAttributeSet",()=>{this.CONSUME(_t),this.SUBRULE(this.eclAttributeSet),this.CONSUME(Pt)});this.eclAttribute=this.RULE("eclAttribute",()=>{this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(en,{LABEL:"ReverseR"})},{ALT:()=>this.CONSUME($o)}])}),this.SUBRULE(this.eclAttributeName),this.SUBRULE(this.comparator),this.OR2([{ALT:()=>{this.CONSUME(Ii),this.SUBRULE(this.numericValue)}},{ALT:()=>{this.SUBRULE(this.eclAttributeValue)}}])});this.eclAttributeName=this.RULE("eclAttributeName",()=>{this.OPTION(()=>{this.SUBRULE(this.constraintOperator)}),this.SUBRULE(this.eclFocusConcept),this.MANY(()=>{this.SUBRULE(this.filterConstraint)})});this.comparator=this.RULE("comparator",()=>{this.OR([{ALT:()=>this.CONSUME(Ve)},{ALT:()=>this.CONSUME(bo)},{ALT:()=>this.CONSUME(vo)},{ALT:()=>this.CONSUME(Lo)},{ALT:()=>this.CONSUME(Ei)},{ALT:()=>this.CONSUME(xi)}])});this.eclAttributeValue=this.RULE("eclAttributeValue",()=>{this.OR([{ALT:()=>this.SUBRULE(this.typedSearchTermSet)},{ALT:()=>this.SUBRULE(this.typedSearchTerm)},{ALT:()=>this.CONSUME(yi)},{ALT:()=>this.CONSUME(Ri)},{ALT:()=>this.SUBRULE(this.subExpressionConstraint)}])});this.typedSearchTerm=this.RULE("typedSearchTerm",()=>{this.OR([{ALT:()=>{this.CONSUME(Oi),this.CONSUME(xr),this.CONSUME(kt)}},{ALT:()=>{this.OPTION(()=>{this.CONSUME(Si),this.CONSUME2(xr)}),this.CONSUME2(kt)}}])});this.typedSearchTermSet=this.RULE("typedSearchTermSet",()=>{this.CONSUME(_t),this.AT_LEAST_ONE(()=>{this.SUBRULE(this.typedSearchTerm)}),this.CONSUME(Pt)});this.numericValue=this.RULE("numericValue",()=>{this.OR([{ALT:()=>this.CONSUME(os)},{ALT:()=>this.CONSUME(ss)},{ALT:()=>this.CONSUME(Jr)}])});this.cardinality=this.RULE("cardinality",()=>{this.CONSUME(Jo),this.OR([{ALT:()=>this.CONSUME(Jr)},{ALT:()=>this.CONSUME(Zr)}]),this.CONSUME(ts),this.OR2([{ALT:()=>this.CONSUME2(Jr)},{ALT:()=>this.CONSUME2(Zr)}]),this.CONSUME(es)});this.filterConstraint=this.RULE("filterConstraint",()=>{this.CONSUME(Ao),this.SUBRULE(this.filterExpressionConstraint),this.CONSUME(So)});this.filterExpressionConstraint=this.RULE("filterExpressionConstraint",()=>{this.SUBRULE(this.filter),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(gr)},{ALT:()=>this.CONSUME(Er)},{ALT:()=>this.CONSUME(Qr)}]),this.SUBRULE2(this.filter)})});this.filter=this.RULE("filter",()=>{this.OR([{ALT:()=>this.SUBRULE(this.termFilter)},{ALT:()=>this.SUBRULE(this.languageFilter)},{ALT:()=>this.SUBRULE(this.typeFilter)},{ALT:()=>this.SUBRULE(this.dialectFilter)},{ALT:()=>this.SUBRULE(this.moduleFilter)},{ALT:()=>this.SUBRULE(this.activeFilter)},{ALT:()=>this.SUBRULE(this.definitionStatusFilter)}])});this.termFilter=this.RULE("termFilter",()=>{this.CONSUME(Ko),this.CONSUME(Ve),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(Si)},{ALT:()=>this.CONSUME(Oi)}]),this.CONSUME(xr)}),this.OR2([{ALT:()=>{this.CONSUME(_t),this.AT_LEAST_ONE(()=>{this.CONSUME(kt)}),this.CONSUME(Pt)}},{ALT:()=>this.CONSUME2(kt)}])});this.languageFilter=this.RULE("languageFilter",()=>{this.CONSUME(Wo),this.CONSUME(Ve),this.CONSUME(Ci)});this.typeFilter=this.RULE("typeFilter",()=>{this.CONSUME(jo),this.CONSUME(Ve),this.OR([{ALT:()=>this.CONSUME(Ti)},{ALT:()=>this.CONSUME(Ai)},{ALT:()=>this.SUBRULE(this.eclConceptReference)}])});this.dialectFilter=this.RULE("dialectFilter",()=>{this.CONSUME(Vo),this.CONSUME(Ve),this.OR([{ALT:()=>this.CONSUME(Ci)},{ALT:()=>this.SUBRULE(this.eclConceptReference)}]),this.OPTION(()=>{this.CONSUME(_t),this.OR2([{ALT:()=>this.CONSUME(Ti)},{ALT:()=>this.CONSUME(Ai)}]),this.CONSUME(Pt)})});this.moduleFilter=this.RULE("moduleFilter",()=>{this.CONSUME(zo),this.CONSUME(Ve),this.SUBRULE(this.eclConceptReference)});this.activeFilter=this.RULE("activeFilter",()=>{this.CONSUME(Ho),this.CONSUME(Ve),this.OR([{ALT:()=>this.CONSUME(yi)},{ALT:()=>this.CONSUME(Ri)}])});this.definitionStatusFilter=this.RULE("definitionStatusFilter",()=>{this.CONSUME(Xo),this.CONSUME(Ve),this.OR([{ALT:()=>this.CONSUME(Yo)},{ALT:()=>this.CONSUME(qo)},{ALT:()=>this.SUBRULE(this.eclConceptReference)}])});this.performSelfAnalysis()}},tn=new ls;function Sc(t){return tn.input=t,{cst:tn.expressionConstraint(),errors:tn.errors}}var bT=tn.getBaseCstVisitorConstructor(),us=class extends bT{constructor(){super(),this.validateVisitor()}expressionConstraint(e){let r=this.visit(e.simpleOrRefinedExpression[0]);if(e.booleanOperator&&e.booleanOperator.length>0){let n=r;for(let i=0;i<e.booleanOperator.length;i++){let o=this.visit(e.booleanOperator[i]),s=this.visit(e.simpleOrRefinedExpression[i+1]);n={type:"CompoundExpression",operator:o,left:n,right:s}}return n}return r}simpleOrRefinedExpression(e){let r=this.visit(e.subExpressionConstraint[0]);return e.Colon&&e.eclRefinement?{type:"RefinedExpression",expression:r,refinement:this.visit(e.eclRefinement[0])}:r}booleanOperator(e){if(e.And)return"AND";if(e.Or)return"OR";if(e.Minus)return"MINUS";throw new Error("Unknown boolean operator")}subExpressionConstraint(e){let r=this.visit(e.eclFocusConcept[0]);if(e.Dot&&e.Dot.length>0){let i={type:"SubExpression",focusConcept:r};e.constraintOperator&&(i.constraintOperator=this.visit(e.constraintOperator[0])),e.MemberOf&&(i.memberOf=!0),e.filterConstraint&&e.filterConstraint.length>0&&(i.filters=e.filterConstraint.map(a=>this.visit(a)));let o=e.eclAttributeName.map(a=>this.visit(a));return{type:"SubExpression",focusConcept:{type:"DottedAttributePath",base:i,attributes:o}}}let n={type:"SubExpression",focusConcept:r};return e.constraintOperator&&(n.constraintOperator=this.visit(e.constraintOperator[0])),e.MemberOf&&(n.memberOf=!0),e.filterConstraint&&e.filterConstraint.length>0&&(n.filters=e.filterConstraint.map(i=>this.visit(i))),n}constraintOperator(e){let r;if(e.ChildOrSelfOf)r="<<!";else if(e.DescendantOrSelfOf)r="<<";else if(e.ChildOf)r="<!";else if(e.DescendantOf)r="<";else if(e.ParentOrSelfOf)r=">>!";else if(e.AncestorOrSelfOf)r=">>";else if(e.ParentOf)r=">!";else if(e.AncestorOf)r=">";else if(e.MemberOf)r="^";else if(e.DescendantOrSelfOfKeyword)r="descendantOrSelfOf";else if(e.DescendantOfKeyword)r="descendantOf";else if(e.ChildOrSelfOfKeyword)r="childOrSelfOf";else if(e.ChildOfKeyword)r="childOf";else if(e.AncestorOrSelfOfKeyword)r="ancestorOrSelfOf";else if(e.AncestorOfKeyword)r="ancestorOf";else if(e.ParentOrSelfOfKeyword)r="parentOrSelfOf";else if(e.ParentOfKeyword)r="parentOf";else if(e.MemberOfKeyword)r="memberOf";else throw new Error("Unknown constraint operator");return{type:"ConstraintOperator",operator:r}}eclFocusConcept(e){if(e.eclConceptReference)return this.visit(e.eclConceptReference[0]);if(e.Wildcard)return{type:"WildcardConcept"};if(e.expressionConstraint)return{type:"NestedExpression",expression:this.visit(e.expressionConstraint[0])};if(e.alternateIdentifier)return this.visit(e.alternateIdentifier[0]);throw new Error("Unknown focus concept type")}eclConceptReference(e){let r=e.SctId[0].image,n;return e.TermString&&(n=e.TermString[0].image.slice(1,-1).trim()),{type:"ConceptReference",sctId:r,term:n}}alternateIdentifier(e){let r=e.Identifier[0].image,n;if(e.StringLiteral)n=e.StringLiteral[0].image.slice(1,-1);else if(e.AlternateIdCode)n=e.AlternateIdCode[0].image;else if(e.SctId)n=e.SctId[0].image;else if(e.Identifier&&e.Identifier.length>1)n=e.Identifier[1].image;else throw new Error("Unknown alternate identifier code type");return{type:"AlternateIdentifier",scheme:r,code:n}}eclRefinement(e){let r=[],n=[];if(r.push(this.visit(e.eclRefinementItem[0])),e.eclRefinementItem.length>1)for(let i=1;i<e.eclRefinementItem.length;i++)e.And&&e.And[i-1]?n.push("AND"):e.Or&&e.Or[i-1]?n.push("OR"):e.Comma&&e.Comma[i-1]&&n.push(","),r.push(this.visit(e.eclRefinementItem[i]));return{type:"Refinement",items:r,conjunctions:n}}eclRefinementItem(e){let r;if(e.cardinality&&(r=this.visit(e.cardinality[0])),e.eclAttributeGroup){let n=this.visit(e.eclAttributeGroup[0]);return r&&(n.cardinality=r),n}if(e.subAttributeSet){let n=this.visit(e.subAttributeSet[0]);return r&&n.type==="Attribute"&&(n.cardinality=r),n}throw new Error("Unknown refinement item type")}eclAttributeGroup(e){let r=this.visit(e.eclAttributeSet[0]);return{type:"AttributeGroup",items:r.items,conjunctions:r.conjunctions}}eclAttributeSet(e){let r=[],n=[];if(r.push(this.visit(e.subAttributeSet[0])),e.subAttributeSet.length>1)for(let i=1;i<e.subAttributeSet.length;i++)e.And&&e.And[i-1]?n.push("AND"):e.Or&&e.Or[i-1]?n.push("OR"):e.Comma&&e.Comma[i-1]&&n.push(","),r.push(this.visit(e.subAttributeSet[i]));return{items:r,conjunctions:n}}subAttributeSet(e){if(e.eclAttribute)return this.visit(e.eclAttribute[0]);if(e.parenthesizedAttributeSet)return this.visit(e.parenthesizedAttributeSet[0]);throw new Error("Unknown subAttributeSet type")}parenthesizedAttributeSet(e){let r=this.visit(e.eclAttributeSet[0]);return{type:"NestedAttributeSet",items:r.items,conjunctions:r.conjunctions}}eclAttribute(e){let r=!1;if(e.ReverseOf)r=!0;else if(e.ReverseR){let i=e.ReverseR[0].image;if(i.toUpperCase()==="R")r=!0;else throw new Error(`Invalid reverse flag identifier: ${i}. Expected 'R'.`)}let n;if(e.Hash&&e.numericValue)n=this.visit(e.numericValue[0]);else if(e.eclAttributeValue)n=this.visit(e.eclAttributeValue[0]);else throw new Error("Attribute must have a value");return{type:"Attribute",reverseFlag:r||void 0,name:this.visit(e.eclAttributeName[0]),comparator:this.visit(e.comparator[0]),value:n}}eclAttributeName(e){let r={type:"SubExpression",focusConcept:this.visit(e.eclFocusConcept[0])};return e.constraintOperator&&(r.constraintOperator=this.visit(e.constraintOperator[0])),e.filterConstraint&&e.filterConstraint.length>0&&(r.filters=e.filterConstraint.map(n=>this.visit(n))),r}comparator(e){if(e.Equals)return"=";if(e.NotEquals)return"!=";if(e.LessThanOrEquals)return"<=";if(e.GreaterThanOrEquals)return">=";if(e.DescendantOf)return"<";if(e.AncestorOf)return">";throw new Error("Unknown comparator")}eclAttributeValue(e){if(e.typedSearchTermSet)return this.visit(e.typedSearchTermSet[0]);if(e.typedSearchTerm)return this.visit(e.typedSearchTerm[0]);if(e.expressionConstraint)return{type:"NestedExpression",expression:this.visit(e.expressionConstraint[0])};if(e.subExpressionConstraint)return this.visit(e.subExpressionConstraint[0]);if(e.True)return{type:"BooleanValue",value:!0};if(e.False)return{type:"BooleanValue",value:!1};throw new Error("Unknown attribute value type")}typedSearchTerm(e){let r=e.Wild?"wild":"match",n=e.StringLiteral[0];return{type:"TypedSearchTerm",searchType:r,value:n.image.slice(1,-1)}}typedSearchTermSet(e){return{type:"TypedSearchTermSet",terms:e.typedSearchTerm.map(r=>this.visit(r))}}numericValue(e){if(e.DecimalValue)return{type:"NumberValue",value:parseFloat(e.DecimalValue[0].image)};if(e.SignedInteger)return{type:"NumberValue",value:parseInt(e.SignedInteger[0].image,10)};if(e.Integer)return{type:"NumberValue",value:parseInt(e.Integer[0].image,10)};throw new Error("Unknown numeric value type")}cardinality(e){let r=[];if(e.Integer)for(let a of e.Integer)r.push({token:a,isWildcard:!1});if(e.Wildcard)for(let a of e.Wildcard)r.push({token:a,isWildcard:!0});r.sort((a,l)=>a.token.startOffset-l.token.startOffset);let n=r[0],i=r[1],o=n.isWildcard?"*":parseInt(n.token.image,10),s=i.isWildcard?"*":parseInt(i.token.image,10);return{type:"Cardinality",min:o,max:s}}filterConstraint(e){return this.visit(e.filterExpressionConstraint[0])}filterExpressionConstraint(e){let r=[],n=[];if(r.push(this.visit(e.filter[0])),e.filter.length>1)for(let i=1;i<e.filter.length;i++)e.And&&e.And[i-1]?n.push("AND"):e.Or&&e.Or[i-1]&&n.push("OR"),r.push(this.visit(e.filter[i]));return{type:"Filter",constraints:r,conjunctions:n}}filter(e){if(e.termFilter)return this.visit(e.termFilter[0]);if(e.languageFilter)return this.visit(e.languageFilter[0]);if(e.typeFilter)return this.visit(e.typeFilter[0]);if(e.dialectFilter)return this.visit(e.dialectFilter[0]);if(e.moduleFilter)return this.visit(e.moduleFilter[0]);if(e.activeFilter)return this.visit(e.activeFilter[0]);if(e.definitionStatusFilter)return this.visit(e.definitionStatusFilter[0]);throw new Error("Unknown filter type")}termFilter(e){let r;e.Match&&(r="match"),e.Wild&&(r="wild");let n=e.StringLiteral.map(i=>i.image.slice(1,-1));return{type:"TermFilter",operator:r,values:n}}languageFilter(e){return{type:"LanguageFilter",value:e.DialectAlias[0].image}}typeFilter(e){let r;if(e.Preferred)r="PREFERRED";else if(e.Acceptable)r="ACCEPTABLE";else if(e.eclConceptReference)r=this.visit(e.eclConceptReference[0]);else throw new Error("Unknown type filter value");return{type:"TypeFilter",value:r}}dialectFilter(e){let r;if(e.DialectAlias)r=e.DialectAlias[0].image;else if(e.eclConceptReference)r=this.visit(e.eclConceptReference[0]);else throw new Error("Unknown dialect filter value");let n;return e.Preferred?n="PREFERRED":e.Acceptable&&(n="ACCEPTABLE"),{type:"DialectFilter",value:r,acceptability:n}}moduleFilter(e){return{type:"ModuleFilter",value:this.visit(e.eclConceptReference[0])}}activeFilter(e){return{type:"ActiveFilter",value:!!e.True}}definitionStatusFilter(e){let r;if(e.Primitive)r="PRIMITIVE";else if(e.Defined)r="DEFINED";else if(e.eclConceptReference)r=this.visit(e.eclConceptReference[0]);else throw new Error("Unknown definition status filter value");return{type:"DefinitionStatusFilter",value:r}}},vT=new us;function Oc(t){return vT.visit(t)}function yc(t){let e=Ac(t);if(e.errors.length>0)return{ast:null,errors:e.errors};let r=Sc(e.tokens);if(r.errors.length>0)return{ast:null,errors:r.errors};try{return{ast:Oc(r.cst),errors:[]}}catch(n){return{ast:null,errors:[n]}}}var Tr={indentSize:2};function LT(t){let e=1,r=t.left;for(;r.type==="CompoundExpression";)e++,r=r.left;return e++,e}function Mt(t){switch(t.type){case"CompoundExpression":{let e=t;return LT(e)>2?!0:Mt(e.left)||Mt(e.right)}case"RefinedExpression":return!0;case"SubExpression":{let e=t;return!!(e.filters&&e.filters.length>0||e.focusConcept.type==="NestedExpression")}case"NestedExpression":return Mt(t.expression);case"AttributeGroup":return t.items.length>1;case"NestedAttributeSet":return t.items.length>1;case"Refinement":{let e=t;return!!(e.items.length>1||e.items.some(r=>r.type==="AttributeGroup"))}default:return!1}}function cs(t){if(t.items.length>1||t.items.some(e=>e.type==="AttributeGroup"))return!0;for(let e of t.items)if(e.type==="AttributeGroup"&&e.items.length>1)return!0;return!1}function Rc(t){return t.items.length>1}function Ic(t){return Mt(t.left)||Mt(t.right)}function ae(t,e=Tr,r=0,n=r){switch(t.type){case"CompoundExpression":return _T(t,e,r,n);case"RefinedExpression":return PT(t,e,r,n);case"SubExpression":return kT(t,e,r,n);case"ConceptReference":return rn(t);case"WildcardConcept":return"*";case"AlternateIdentifier":return MT(t);case"NestedExpression":return wT(t,e,r,n);case"ConstraintOperator":return Nc(t);case"Refinement":return fs(t,e,r,n);case"AttributeGroup":return FT(t,e,r,n);case"Attribute":return bc(t,e,r,n);case"NestedAttributeSet":return Cc(t,e,r,n);case"DottedAttributePath":return UT(t,e,r,n);case"Cardinality":return ps(t);case"Filter":return vc(t,e,r,n);case"StringValue":return`"${t.value}"`;case"NumberValue":return String(t.value);case"BooleanValue":return t.value?"true":"false";case"TypedSearchTerm":return Lc(t);case"TypedSearchTermSet":return BT(t,e,r,n);default:throw new Error(`Unknown node type: ${t.type}`)}}function _T(t,e,r,n){let i=Ic(t),o=ae(t.left,e,r,n);if(i){let s=" ".repeat(r);if(t.right.type==="SubExpression"&&!t.right.constraintOperator&&!t.right.filters&&t.right.focusConcept.type==="NestedExpression"){let u=t.right.focusConcept,c=r+t.operator.length,f=c+e.indentSize,p=ae(u.expression,e,f,f),E=" ".repeat(c);return`${o}
${s}${t.operator}(
${" ".repeat(f)}${p}
${E})`}let a=r+t.operator.length+1,l=ae(t.right,e,r,a);return`${o}
${s}${t.operator} ${l}`}else{let s=o.length,a=n+s+1+t.operator.length+1,l=ae(t.right,e,r,a);return`${o} ${t.operator} ${l}`}}function PT(t,e,r,n){let i=ae(t.expression,e,r,n);if(cs(t.refinement)){let s=r+e.indentSize,a=fs(t.refinement,e,s,s);return`${i}:
${a}`}else{let s=i.length,a=n+s+2,l=fs(t.refinement,e,r,a);return`${i}: ${l}`}}function kT(t,e,r,n){let i="",o=n;if(t.constraintOperator){let a=Nc(t.constraintOperator);i+=a+" ",o+=a.length+1}t.memberOf&&(i+="^ ",o+=2);let s=ae(t.focusConcept,e,r,o);if(i+=s,o+=s.length,t.filters&&t.filters.length>0)for(let a of t.filters){let l=vc(a,e,r,o+1);i+=" "+l,o+=1+l.length}return i}function rn(t){return t.term?`${t.sctId} |${t.term}|`:t.sctId}function MT(t){return/[^a-zA-Z0-9_-]/.test(t.code)?`${t.scheme}#"${t.code}"`:`${t.scheme}#${t.code}`}function wT(t,e,r,n){if(!Mt(t.expression)){let c=n+1;return`(${ae(t.expression,e,r,c)})`}let o=t.expression.type==="SubExpression"&&!t.expression.constraintOperator&&!t.expression.filters&&t.expression.focusConcept.type==="NestedExpression",s,a;o?(s=n+1,a=s):(s=n+e.indentSize,a=s);let l=ae(t.expression,e,s,a),u=" ".repeat(n);return`(
${" ".repeat(a)}${l}
${u})`}function Nc(t){switch(t.operator){case"descendantOf":return"<";case"descendantOrSelfOf":return"<<";case"childOf":return"<!";case"childOrSelfOf":return"<<!";case"ancestorOf":return">";case"ancestorOrSelfOf":return">>";case"parentOf":return">!";case"parentOrSelfOf":return">>!";case"memberOf":return"^";default:return t.operator}}function fs(t,e,r,n){let i=" ".repeat(r);if(cs(t)){let s=[];for(let l=0;l<t.items.length;l++){let u=ae(t.items[l],e,r,r);s.push(i+u)}let a=s[0];for(let l=1;l<s.length;l++){let u=t.conjunctions[l-1]||",";a+=`${u===","?",":" "+u}
${s[l]}`}return a}else{let s=n,a=[];for(let u=0;u<t.items.length;u++){let c=ae(t.items[u],e,r,s);if(a.push(c),s+=c.length,u<t.items.length-1){let f=t.conjunctions[u]||",",p=f===","?", ":" "+f+" ";s+=p.length}}let l=a[0];for(let u=1;u<a.length;u++){let c=t.conjunctions[u-1]||",";l+=`${c===","?", ":" "+c+" "}${a[u]}`}return l}}function FT(t,e,r,n){let i=Rc(t),o="";if(t.cardinality&&(o=ps(t.cardinality)+" "),i){let s=r+e.indentSize,a=" ".repeat(s),l=[];for(let f of t.items)l.push(a+bi(f,e,s,s));let u=l[0];for(let f=1;f<l.length;f++){let p=t.conjunctions[f-1]||",";u+=`${p===","?",":" "+p}
${l[f]}`}let c=" ".repeat(r);return`${o}{
${u}
${c}}`}else{let s=n+o.length+2,a=[];for(let u=0;u<t.items.length;u++){let c=bi(t.items[u],e,r,s);if(a.push(c),s+=c.length,u<t.items.length-1){let f=t.conjunctions[u]||",",p=f===","?", ":" "+f+" ";s+=p.length}}let l=a[0];for(let u=1;u<a.length;u++){let c=t.conjunctions[u-1]||",";l+=`${c===","?", ":" "+c+" "}${a[u]}`}return`${o}{ ${l} }`}}function bi(t,e,r,n){return t.type==="Attribute"?bc(t,e,r,n):Cc(t,e,r,n)}function Cc(t,e,r,n){if(!(t.items.length>1)){let c=n+1;return`(${bi(t.items[0],e,r,c)})`}let o=n+e.indentSize,s=" ".repeat(o),a=[];for(let c of t.items)a.push(s+bi(c,e,o,o));let l=a[0];for(let c=1;c<a.length;c++){let f=t.conjunctions[c-1]||",";l+=`${f===","?",":" "+f}
${a[c]}`}let u=" ".repeat(n);return`(
${l}
${u})`}function bc(t,e,r,n){let i="",o=n;if(t.cardinality){let l=ps(t.cardinality);i+=l+" ",o+=l.length+1}t.reverseFlag&&(i+="R ",o+=2);let s=ae(t.name,e,r,o);i+=s,o+=s.length,i+=` ${t.comparator} `,o+=1+t.comparator.length+1;let a=t.value.type==="NumberValue"?"#"+ae(t.value,e,r,o+1):ae(t.value,e,r,o);return i+=a,i}function UT(t,e,r,n){let i=ae(t.base,e,r,n),o=n+i.length;for(let s of t.attributes){i+=" . ",o+=3;let a=ae(s,e,r,o);i+=a,o+=a.length}return i}function ps(t){let e=t.min==="*"?"*":String(t.min),r=t.max==="*"?"*":String(t.max);return`[${e}..${r}]`}function vc(t,e,r,n){let i=t.constraints.map(s=>DT(s,e,r,n)),o=i[0];for(let s=1;s<i.length;s++){let a=t.conjunctions[s-1]||"AND";o+=` ${a} ${i[s]}`}return`{{ ${o} }}`}function DT(t,e,r,n){switch(t.type){case"TermFilter":{let i=t,o=i.values.map(a=>`"${a}"`),s=i.values.length>1?`(${o.join(" ")})`:o[0];return i.operator?`term = ${i.operator}:${s}`:`term = ${s}`}case"LanguageFilter":return`language = ${t.value}`;case"TypeFilter":{let i=t;return typeof i.value=="string"?`type = ${i.value}`:`type = ${rn(i.value)}`}case"DialectFilter":{let i=t,o="dialect = ";return typeof i.value=="string"?o+=i.value:o+=rn(i.value),i.acceptability&&(o+=` (${i.acceptability})`),o}case"ModuleFilter":return`moduleId = ${rn(t.value)}`;case"EffectiveTimeFilter":{let i=t;return`effectiveTime ${i.comparator} "${i.value}"`}case"ActiveFilter":return`active = ${t.value}`;case"DefinitionStatusFilter":{let i=t;return typeof i.value=="string"?`definitionStatusId = ${i.value}`:`definitionStatusId = ${rn(i.value)}`}default:throw new Error(`Unknown filter type: ${t.type}`)}}function Lc(t){return t.searchType==="wild"?`wild: "${t.value}"`:`"${t.value}"`}function BT(t,e,r,n){return`(${t.terms.map(o=>Lc(o)).join(" ")})`}function _c(t,e=Tr){let r=t.trim();if(!r)return{formatted:null,error:"Empty input"};let n=yc(r);if(n.errors.length>0||!n.ast)return{formatted:null,error:n.errors[0]?.message||"Parse error"};try{return{formatted:ae(n.ast,e,0),error:null}}catch(i){return{formatted:null,error:String(i)}}}return Bc(GT);})();
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
